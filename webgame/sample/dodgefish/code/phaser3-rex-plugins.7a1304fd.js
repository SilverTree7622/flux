const ed=Phaser.Renderer.WebGL.Utils;var id=function(e,t,i,s){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){i.addToRenderList(t);var r=t.frame,n=r.width,a=r.height,h=ed.getTintAppendFloatAlpha,o=e.pipelines.set(t.pipeline,t),l=o.setTexture2D(r.glTexture,t);e.pipelines.preBatch(t),o.batchTexture(t,r.glTexture,n,a,t.x,t.y,n/t.resolution,a/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,a,h(t.tintTopLeft,i.alpha*t._alphaTL),h(t.tintTopRight,i.alpha*t._alphaTR),h(t.tintBottomLeft,i.alpha*t._alphaBL),h(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,s,!1,l),e.pipelines.postBatch(t)}},sd=function(e,t,i,s){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,s))};const rd={renderWebGL:id,renderCanvas:sd},nd=Phaser.Display.Color,ad={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(e,t){var i=this,s=new Image;return s.onload=function(){i.width!==s.width||i.height!==s.height?i.resize(s.width,s.height):i.clear(),i.context.drawImage(s,0,0),i.updateTexture(),t&&t(),s.onload=null,s.src="",s.remove()},s.src=e,this},loadFromURLPromise(e){var t=this;return new Promise(function(i,s){t.loadFromURL(e,i)})},getDataURL(e,t){return this.canvas.toDataURL(e,t)},getPixel(e,t,i){i===void 0&&(i=new nd);var s=this.context.getImageData(e,t,1,1);return i.setTo(s.data[0],s.data[1],s.data[2],s.data[3]),i},setPixel(e,t,i,s,r,n){if(typeof i!="number"){var a=i;i=a.red,s=a.green,r=a.blue,n=a.alpha}n===void 0&&(n=i!==0||s!==0||r!==0?255:0);var h=this.context.createImageData(1,1);return h.data[0]=i,h.data[1]=s,h.data[2]=r,h.data[3]=n,this.context.putImageData(h,e,t),this.dirty=!0,this}};var mo=function(e,t,i,s,r,n,a){var h=e.sys.textures,o=e.renderer;s===void 0&&(s=0),r===void 0&&(r=0),n===void 0&&(n=t.width),a===void 0&&(a=t.height);var l;h.exists(i)?l=h.get(i):l=h.createCanvas(i,n,a);var u=l.getSourceImage();u.width!==n&&(u.width=n),u.height!==a&&(u.height=a);var d=u.getContext("2d");d.clearRect(0,0,n,a),d.drawImage(t,s,r,n,a),o.gl&&l&&o.canvasToTexture(u,l.source[0].glTexture,!0,0)};const hd={updateTexture(e,t){e&&(t?e.call(t,this.canvas,this.context):e(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},generateTexture(e,t,i,s,r){var n=this.canvas;return s===void 0?s=n.width:s*=this.resolution,r===void 0?r=n.height:r*=this.resolution,mo(this.scene,n,e,t,i,s,r),this},loadTexture(e,t){var i=this.scene.sys.textures.getFrame(e,t);return i?(this.width!==i.cutWidth||this.height!==i.cutHeight?this.setSize(i.cutWidth,i.cutHeight):this.clear(),this.context.drawImage(i.source.image,i.cutX,i.cutY,i.cutWidth,i.cutHeight,0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this):this}},Yn=Phaser.Display.Canvas.CanvasPool,od=Phaser.GameObjects.GameObject;class yi extends od{constructor(t,i,s,r,n){i===void 0&&(i=0),s===void 0&&(s=0),r===void 0&&(r=1),n===void 0&&(n=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=r,this._height=n,r=Math.max(Math.ceil(r*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas=Yn.create(this,r,n),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(i,s),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0,t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),Yn.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setSize(t,i){return this._width===t&&this._height===i?this:(this._width=t,this._height=i,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),i=Math.max(Math.ceil(i*this.resolution),1),this.canvas.width=t,this.canvas.height=i,this.frame.setSize(t,i),this.dirty=!0,this)}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,i){return this.setSize(t,i),this}}const vt=Phaser.GameObjects.Components;Phaser.Class.mixin(yi,[vt.Alpha,vt.BlendMode,vt.Crop,vt.Depth,vt.Flip,vt.GetBounds,vt.Mask,vt.Origin,vt.Pipeline,vt.ScrollFactor,vt.Tint,vt.Transform,vt.Visible,rd,ad,hd]);const ld=Phaser.Utils.String.Pad;var E=function(e,t,i){if(e==null)return e;switch(typeof e){case"string":return e;case"number":return`#${ld(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,i);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e;default:return e}},Ws=function(e,t,i,s,r,n,a,h,o,l,u,d){l===void 0&&(l=0),u===void 0&&(u=2*Math.PI),d===void 0&&(d=!1),t.beginPath(),t.ellipse(i,s,r,n,0,l,u,d),a!=null&&(t.fillStyle=a,t.fill()),h!=null&&(t.strokeStyle=h,t.lineWidth=o,t.stroke())},ud=function(e,t,i,s,r,n,a,h,o,l,u){o===void 0&&h!=null&&(o=2),l===void 0&&(l="start"),u===void 0&&(u="alphabetic"),t.font=n,t.textAlign=l,t.textBaseline=u,t.fillStyle=a,t.strokeStyle=h,t.lineWidth=o,t.lineCap="round",t.lineJoin="round",h!=null&&h!=="none"&&o>0&&t.strokeText(r,i,s),a!=null&&a!=="none"&&t.fillText(r,i,s)},dd=function(){var e=this.radius,t=this.thickness*this.radius,i=this.radius-t/2,s=this.radius-t,r=this.canvas,n=this.context;if(this.trackColor&&t>0&&(n.save(),Ws(r,n,e,e,i,i,void 0,this.trackColor,t),n.restore()),this.barColor&&i>0){var a,h,o;if(this.value===1)a=!1,h=0,o=2*Math.PI;else{a=this.anticlockwise,h=this.startAngle;var l=2*Math.PI*(a?1-this.value:this.value);o=l+h}n.save(),Ws(r,n,e,e,i,i,void 0,this.barColor,t,h,o,a),n.restore()}if(this.centerColor&&s>0){var u;this.centerColor2?(u=this.context.createRadialGradient(e,e,0,e,e,s),u.addColorStop(0,this.centerColor),u.addColorStop(1,this.centerColor2)):u=this.centerColor,n.save(),Ws(r,n,e,e,s,s,u),n.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(n.save(),ud(r,n,e,e,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),n.restore())};const Xe={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},cd=Phaser.Scene;var as=function(e){return e instanceof cd},Co=function(e){if(e==null||typeof e!="object")return null;if(as(e))return e;if(e.scene&&as(e.scene))return e.scene;if(e.parent&&e.parent.scene&&as(e.parent.scene))return e.parent.scene};const fd=Phaser.Utils.Objects.GetValue;class Mt{constructor(t,i){this.parent=t,this.scene=Co(t),this.isShutdown=!1,this.setEventEmitter(fd(i,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}}Object.assign(Mt.prototype,Xe);const pd=Phaser.Utils.Objects.GetValue;class gs extends Mt{constructor(t,i){super(t,i),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(pd(i,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=vd[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const vd={no:0,lazy:1,always:2};class gd extends gs{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}}const se=Phaser.Utils.Objects.GetValue,Nn=Phaser.Math.Clamp;class bo{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=se(t,"state",qe),this.timeScale=se(t,"timeScale",1),this.delay=se(t,"delay",0),this.repeat=se(t,"repeat",0),this.repeatCounter=se(t,"repeatCounter",0),this.duration=se(t,"duration",0),this.nowTime=se(t,"nowTime",0),this.justRestart=se(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?Re:_e,this.repeatCounter=0,this}stop(){return this.state=qe,this}update(t,i){this.state===qe||this.state===Bi||i===0||this.timeScale===0||(this.nowTime+=i*this.timeScale,this.state=this.nowTime>=0?Re:_e,this.justRestart=!1,this.nowTime>=this.duration&&(this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=Bi)))}get t(){var t;switch(this.state){case qe:case _e:t=0;break;case Re:t=this.nowTime/this.duration;break;case Bi:t=1;break}return Nn(t,0,1)}set t(t){t=Nn(t,-1,1),t<0?(this.state=_e,this.nowTime=-this.delay*t):(this.state=Re,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===qe}get isDelay(){return this.state===_e}get isCountDown(){return this.state===Re}get isRunning(){return this.state===_e||this.state===Re}get isDone(){return this.state===Bi}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const qe=0,_e=1,Re=2,Bi=-1;class md extends gd{constructor(t,i){super(t,i),this.timer=new bo}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const Qe=Phaser.Utils.Objects.GetValue,Hn=Phaser.Utils.Objects.GetAdvancedValue,Cd=Phaser.Tweens.Builders.GetEaseFunction;class Si extends md{resetFromJSON(t){return this.timer.resetFromJSON(Qe(t,"timer")),this.setEnable(Qe(t,"enable",!0)),this.setTarget(Qe(t,"target",this.parent)),this.setDelay(Hn(t,"delay",0)),this.setDuration(Hn(t,"duration",1e3)),this.setEase(Qe(t,"ease","Linear")),this.setRepeat(Qe(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=Cd(t),this}setRepeat(t){return this.repeat=t,this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,i){if(!this.isRunning||!this.enable||!this.parent.active)return this;var s=this.target,r=this.timer;return r.update(t,i),r.isDelay||this.updateGameObject(s,r),this.emit("update",s,this),r.isDone&&this.complete(),this}updateGameObject(t,i){}}const ti=Phaser.Utils.Objects.GetValue,bd=Phaser.Math.Linear;class en extends Si{constructor(t,i){super(t,i),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var i=this.target;this.propertyKey=ti(t,"key","value");var s=i[this.propertyKey];return this.fromValue=ti(t,"from",s),this.toValue=ti(t,"to",s),this.setEase(ti(t,"ease",this.ease)),this.setDuration(ti(t,"duration",this.duration)),this.timer.setDuration(this.duration),i[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,i){var s=i.t;s=this.easeFn(s),t[this.propertyKey]=bd(this.fromValue,this.toValue,s)}}const yd=Phaser.Math.Percent;var Sd=function(e){return this.easeValuePropName=e,this},xd=function(e){return this.easeValueDuration=e,this},Td=function(e){return this.easeFunction=e,this},kd=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},Pd=function(e,t,i){return e==null?this:(t!==void 0&&(e=yd(e,t,i)),this.easeValueTask===void 0&&(this.easeValueTask=new en(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:e,duration:this.easeValueDuration,ease:this.easeFunction}),this)};const xi={setEaseValuePropName:Sd,setEaseValueDuration:xd,setEaseValueFunction:Td,stopEaseValue:kd,easeValueTo:Pd},z=Phaser.Utils.Objects.GetValue,wd=Phaser.Utils.Objects.IsPlainObject,Un=Phaser.Math.Clamp,Md=Phaser.Math.Linear,Xn=Phaser.Math.Percent,Ed=Phaser.Math.DegToRad(270);class Od extends yi{constructor(t,i,s,r,n,a,h){wd(i)&&(h=i,i=z(h,"x",0),s=z(h,"y",0),r=z(h,"radius",1),n=z(h,"barColor",void 0),a=z(h,"value",0));var o=r*2;super(t,i,s,o,o),this.type="rexCircularProgressCanvas",this.eventEmitter=z(h,"eventEmitter",this),this.setRadius(r),this.setTrackColor(z(h,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(z(h,"centerColor",void 0)),this.setThickness(z(h,"thickness",.2)),this.setStartAngle(z(h,"startAngle",Ed)),this.setAnticlockwise(z(h,"anticlockwise",!1)),this.setTextColor(z(h,"textColor",void 0)),this.setTextStrokeColor(z(h,"textStrokeColor",void 0),z(h,"textStrokeThickness",void 0));var l=z(h,"textFont",void 0);l?this.setTextFont(l):this.setTextFont(z(h,"textSize","16px"),z(h,"textFamily","Courier"),z(h,"textStyle","")),this.setTextFormatCallback(z(h,"textFormatCallback",void 0),z(h,"textFormatCallbackScope",void 0));var u=z(h,"valuechangeCallback",null);if(u!==null){var d=z(h,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",u,d)}this.setEaseValuePropName("value").setEaseValueDuration(z(h,"easeValue.duration",0)).setEaseValueFunction(z(h,"easeValue.ease","Linear")),this.setValue(a)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get value(){return this._value}set value(t){t=Un(t,0,1);var i=this._value,s=i!=t;this.dirty=this.dirty||s,this._value=t,s&&this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter)}setValue(t,i,s){return t==null?this:(i!==void 0&&(t=Xn(t,i,s)),this.value=t,this)}addValue(t,i,s){return i!==void 0&&(t=Xn(t,i,s)),this.value+=t,this}getValue(t,i){var s=this.value;return t!==void 0&&(s=Md(t,i,s)),s}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=E(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=E(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Un(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=E(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=E(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,i){return this.centerColor=t,this.centerColor2=i,this}get textColor(){return this._textColor}set textColor(t){t=E(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=E(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,i){return i===void 0&&(i=2),this.textStrokeColor=t,this.textStrokeThickness=i,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,i,s){var r;return i===void 0?r=t:r=s+" "+t+" "+i,this.textFont=r,this}setTextFormatCallback(t,i){return this.textFormatCallback=t,this.textFormatCallbackScope=i,this}updateTexture(){return this.clear(),dd.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(t):i=this.textFormatCallback.call(this.textFormatCallbackScope,t),i}}Object.assign(Od.prototype,xi);var _d=function(e){return e===void 0&&(e=Rd),this.getFrameNameCallback=e,this},Rd=function(e,t,i){return i==="__BASE"?`${e},${t}`:`${i}_${e},${t}`},Ar=function(e){var t,i,s;if(typeof e!="object"||e===null)return e;t=Array.isArray(e)?[]:{};for(s in e)i=e[s],t[s]=Ar(i);return t},Ld=function(e,t,i,s){Array.isArray(t)&&(s=i,i=t,t=void 0),t===void 0&&(t="__BASE"),i=Ar(i),s=Ar(s),this.textureKey=e,this.baseFrameName=t,this.columns.data=i,this.columns.count=i?i.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=s,this.rows.count=s?s.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var r=this.scene.sys.textures.get(e);if(!r)return this.clear(),this;if(!i||!s)return this.clear(),this;for(var n=r.frames[t],a=n.width,h=0,o=0,l=i.length;o<l;o++)i[o]===void 0?h++:typeof i[o]=="number"?a-=i[o]:a-=i[o].width;for(var u=a/h,d=n.height,c=0,o=0,l=s.length;o<l;o++)s[o]===void 0?c++:typeof s[o]=="number"?d-=s[o]:d-=s[o].width;for(var f=d/c,p,v,g,m,b,S=0,x=0,C=0,y=s.length;C<y;C++){s[C]===void 0&&(s[C]=f),typeof s[C]=="number"&&(s[C]={height:s[C],stretch:C%2}),p=s[C],g=p.height,this.rows.stretch+=p.stretch|0,this.rows.minHeight+=p.stretch>0?0:g,S=0;for(var o=0,T=i.length;o<T;o++){if(i[o]===void 0&&(i[o]=u),typeof i[o]=="number"&&(i[o]={width:i[o],stretch:o%2}),v=i[o],m=v.width,C===0&&(this.columns.stretch+=v.stretch|0,this.columns.minWidth+=v.stretch>0?0:m),m>=1&&g>=1){b=this.getFrameNameCallback(o,C,t);var P=typeof b;(P==="string"||P==="number")&&r.add(b,0,S+n.cutX,x+n.cutY,m,g)}S+=m}x+=g}return this.updateTexture(),this},Bd=function(){if(this.clear(),this.textureKey===void 0)return this;var e=this.scene.sys.textures.get(this.textureKey);if(!e)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,i=this.rows.minHeight*this.maxFixedPartScaleY,s=this.width-t,r=this.height-i,n=s>=0?this.maxFixedPartScaleX:this.width/t,a=r>=0?this.maxFixedPartScaleY:this.height/i;if(this.preserveRatio){var h=Math.min(n,a);if(n>h){var o=(n-h)*t;s>=0?s+=o:s=o,n=h}if(a>h){var l=(a-h)*i;r>=0?r+=l:r=l,a=h}}this.columns.scale=n,this.rows.scale=a;var u;s>0?u=this.columns.stretch>0?s/this.columns.stretch:0:u=0;var d;r>0?d=this.rows.stretch>0?r/this.rows.stretch:0:d=0;for(var c,f,p,v,g,m=0,b=0,S,x=0,C=this.rows.count;x<C;x++){p=this.rows.data[x],g=p.stretch===0?p.height*a:d*p.stretch,m=0;for(var y=0,T=this.columns.count;y<T;y++)f=this.columns.data[y],v=f.stretch===0?f.width*n:u*f.stretch,c=this.getFrameNameCallback(y,x,this.baseFrameName),e.has(c)&&v>0&&g>0&&(p.stretch===0&&f.stretch===0||this.getStretchMode(y,x)===0?S=0:S=1,S===0?this._drawImage(this.textureKey,c,m,b,v,g):this._drawTileSprite(this.textureKey,c,m,b,v,g)),m+=v;b+=g}};const Id=Phaser.Utils.Objects.IsPlainObject,jn=Phaser.Utils.Objects.GetValue;var Gd=function(e){return Id(e)?(this.stretchMode.edge=Ys(jn(e,"edge",0)),this.stretchMode.internal=Ys(jn(e,"internal",0))):(e=Ys(e),this.stretchMode.edge=e,this.stretchMode.internal=e),this},Ys=function(e){return typeof e=="string"&&(e=Dd[e]),e};const Dd={scale:0,repeat:1};var Ad=function(e,t){return e===0||e===this.columns.count-1||t===0||t===this.rows.count-1},$d=function(e,t){return Ad.call(this,e,t)?this.stretchMode.edge:this.stretchMode.internal},Vd=function(e){return e==null&&(e=!0),this.preserveRatio=e,this},zd=function(e,t){return t===void 0&&(t=e),this.maxFixedPartScaleX=e,this.maxFixedPartScaleY=t,this},kt=function(){};const Fd={_drawImage:kt,_drawTileSprite:kt,setGetFrameNameCallback:_d,setTexture:Ld,updateTexture:Bd,setStretchMode:Gd,getStretchMode:$d,setPreserveRatio:Vd,setMaxFixedPartScale:zd},ei=Phaser.Utils.Objects.IsPlainObject,I=Phaser.Utils.Objects.GetValue;var yo=function(e,t){class i extends e{constructor(r,n,a,h,o,l,u,d,c,f){ei(n)?(f=n,n=I(f,"x",0),a=I(f,"y",0),h=I(f,"width",1),o=I(f,"height",1),l=I(f,"key",void 0),u=I(f,"baseFrame",void 0),d=I(f,"columns",void 0),c=I(f,"rows",void 0)):ei(h)?(f=h,h=I(f,"width",1),o=I(f,"height",1),l=I(f,"key",void 0),u=I(f,"baseFrame",void 0),d=I(f,"columns",void 0),c=I(f,"rows",void 0)):ei(l)?(f=l,l=I(f,"key",void 0),u=I(f,"baseFrame",void 0),d=I(f,"columns",void 0),c=I(f,"rows",void 0)):ei(u)?(f=u,u=I(f,"baseFrame",void 0),d=I(f,"columns",void 0),c=I(f,"rows",void 0)):Array.isArray(u)?(f=c,c=d,d=u,u=I(f,"baseFrame",void 0)):ei(d)&&(f=d,d=I(f,"columns",void 0),c=I(f,"rows",void 0)),super(r),this.type=t,this.setPosition(n,a).setSize(h,o).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(I(f,"getFrameNameCallback",void 0)),this.setStretchMode(I(f,"stretchMode",0)),this.setPreserveRatio(I(f,"preserveRatio",!0));var p=I(f,"maxFixedPartScale",1),v=I(f,"maxFixedPartScaleX",p),g=I(f,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(v,g),this.setTexture(l,u,d,c)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(r,n){return this.width===r&&this.height===n?this:(super.resize(r,n),this.updateTexture(),this)}}return Object.assign(i.prototype,Fd),i},So=function(e,t,i){return i===void 0&&(i="image"),e[t]||(e[t]=e.scene.make[i]({add:!1,origin:{x:0,y:0}}),e.once("destroy",function(){e[t]&&(e[t].destroy(),e[t]=void 0)})),e[t]},Wd=function(e,t,i,s,r,n){var a=So(this,"_image","image").setTexture(e,t).setDisplaySize(r,n);this.draw(a,i,s)},Yd=function(e,t,i,s,r,n){var a=So(this,"_tileSprite","tileSprite").setTexture(e,t).setSize(r,n);this.draw(a,i,s)};const Nd={_drawImage:Wd,_drawTileSprite:Yd},Hd=Phaser.GameObjects.RenderTexture;class Ud extends yo(Hd,"rexNinePatch"){}Object.assign(Ud.prototype,Nd);const Xd=Phaser.GameObjects.GetCalcMatrix;var jd=function(e,t,i,s){var r=t.getRenderList();if(r.length!==0){i.addToRenderList(t);var n=e.pipelines.set(t.pipeline),a=t.frame.glTexture,h=n.setGameObject(t),o=i.roundPixels,l=Xd(t,i,s),u=n.calcMatrix.copyFrom(l.calc),d=t._displayOriginX,c=t._displayOriginY,f=i.alpha*t.alpha;e.pipelines.preBatch(t);for(var p=0,v=r.length;p<v;p++)r[p].webglRender(n,u,f,d,c,a,h,o);e.pipelines.postBatch(t)}};const Kd=Phaser.Renderer.Canvas.SetTransform;var Jd=function(e,t,i,s){var r=e.currentContext,n=t.getRenderList();if(!(n.length===0||!Kd(e,r,t,i,s))){i.addToRenderList(t);var a=i.roundPixels,h=-t._displayOriginX,o=-t._displayOriginY;r.translate(h,o);for(var l=0,u=n.length;l<u;l++)n[l].canvasRender(r,h,o,a);r.restore()}};const Zd={renderWebGL:jd,renderCanvas:Jd};var xo=function(e,t){return this.texture=this.scene.sys.textures.get(e),this.frame=this.texture.get(t),this},Kn=function(e,t){if(this.width===e&&this.height===t)return this;this.width=e,this.height=t,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=e,i.hitArea.height=t),this},qd=function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.add(e),this.lastAppendedChildren.push(...e)):(this.children.add(e),this.lastAppendedChildren.push(e)),this};const Qd=Phaser.Utils.Array.Remove;var tc=function(e){return this.poolManager&&this.poolManager.free(e),Qd(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},Jn=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},ec=function(){return this.lastAppendedChildren},ic=function(){return this.children.list};const sc={setTint(e){return this.tint=e,this.tintFill=!1,this},setTintFill(e){return this.tint=e,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var To={setTexture:xo,resize:Kn,setSize:Kn,addChild:qd,removeChild:tc,removeChildren:Jn,clear:Jn,getLastAppendedChildren:ec,getChildren:ic};Object.assign(To,sc);class te{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const rc=Phaser.Utils.Objects.GetValue;var nc={};class ac{constructor(t){this.pools=rc(t,"pools",nc)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new te),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,s=t.length;i<s;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const hc=Phaser.GameObjects.GameObject,oc=Phaser.Utils.Objects.IsPlainObject,ii=Phaser.Utils.Objects.GetValue,lc=Phaser.Structs.List,uc=Phaser.Utils.Array.StableSort;class ko extends hc{constructor(t,i,s,r,n,a){oc(i)&&(a=i,i=ii(a,"x",0),s=ii(a,"y",0),r=ii(a,"texture"),n=ii(a,"frame")),i===void 0&&(i=0),s===void 0&&(s=0),super(t,"rexBlitter"),this.children=new lc,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var h=ii(a,"reuseBob",!0);this.poolManager=h?new ac(a):void 0,this.setTexture(r,n).setPosition(i,s).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,i=this.children.list,s=0,r=i.length;s<r;s++){var n=i[s];dc(n)&&(this.renderList.push(n),t||(t=n.depth!==0))}t&&uc(this.renderList,cc),this.displayListDirty=!1}return this.renderList}}var dc=function(e){return e.active&&e.visible&&e.alpha>0},cc=function(e,t){return e._depth-t._depth};const Ot=Phaser.GameObjects.Components;Phaser.Class.mixin(ko,[Ot.Alpha,Ot.BlendMode,Ot.ComputedSize,Ot.Depth,Ot.GetBounds,Ot.Mask,Ot.Origin,Ot.Pipeline,Ot.ScrollFactor,Ot.Transform,Ot.Visible,Zd,To]);const Po="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var bt=function(e,t,i){if(!e||typeof e=="number")return i;if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")!==-1){for(var s=t.split("."),r=e,n=i,a=0;a<s.length;a++)if(r.hasOwnProperty(s[a]))n=r[s[a]],r=r[s[a]];else{n=i;break}return n}else return i},le=function(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e},vi=function(e,t){var i=Array.isArray(e);if(t===void 0?t=i?[]:{}:le(t),i){t.length=e.length;for(var s=0,r=e.length;s<r;s++)t[s]=e[s]}else for(var n in e)t[n]=e[n];return t};const ms={enableData(){return this.data===void 0&&(this.data={}),this},getData(e,t){return this.enableData(),e===void 0?this.data:bt(this.data,e,t)},setData(e,t){if(this.enableData(),arguments.length===1){var i=e;for(e in i)this.data[e]=i[e]}else this.data[e]=t;return this},incData(e,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(e,this.getData(e,i)+t),this},mulData(e,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(e,this.getData(e,i)*t),this},clearData(){return this.data&&le(this.data),this}};class wo{constructor(t,i){this.type=i,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}}Object.assign(wo.prototype,ms);const fc=Phaser.Math.DegToRad,pc=Phaser.Math.RadToDeg,Le=Phaser.Utils.Objects.GetValue;class vc extends wo{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setRotation(t){return this.rotation=t,this}get angle(){return pc(this.rotation)}set angle(t){this.rotation=fc(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,i){return i===void 0&&(i=!1),this.displayWidth=t,i&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,i){return i===void 0&&(i=!1),this.displayHeight=t,i&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,i){return i===void 0&&(i=t),this.setOriginX(t).setOriginY(i),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=Le(t,"width",void 0),s=Le(t,"height",void 0),r=Le(t,"scale",void 0),n=Le(t,"scaleX",r),a=Le(t,"scaleY",r);i!==void 0?s===void 0&&a===void 0?this.setWidth(i,!0):this.setWidth(i):n!==void 0?this.setScaleX(n):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),s!==void 0?i===void 0&&n===void 0?this.setHeight(s,!0):this.setHeight(s):a!==void 0?this.setScaleY(a):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var h=Le(t,"origin",void 0);return h!==void 0?this.setOrigin(h):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,i,s,r,n,a,h,o){}canvasRender(t,i,s,r){}}const gc=Phaser.GameObjects.Components.TransformMatrix,mc=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var _t=new gc,Cc=function(e,t,i,s,r,n,a,h){var o=this._width,l=this._height,u=o*this.originX,d=l*this.originY,c=this.x-s,f=this.y-r,p=1,v=1;this.flipX&&(c+=o-u*2,p=-1),this.flipY&&(f+=l-d*2,v=-1),_t.applyITRS(c,f,this.rotation,this.scaleX*p,this.scaleY*v),t.multiply(_t,_t);var g=-u,m=-d,b=g+o,S=m+l,x=_t.getXRound(g,m,h),C=_t.getXRound(g,S,h),y=_t.getXRound(b,S,h),T=_t.getXRound(b,m,h),P=_t.getYRound(g,m,h),w=_t.getYRound(g,S,h),M=_t.getYRound(b,S,h),R=_t.getYRound(b,m,h),G=this.frame.u0,D=this.frame.v0,Y=this.frame.u1,N=this.frame.v1,A=mc(this.tint,this.alpha*i);e.batchQuad(this.parent,x,P,C,w,y,M,T,R,G,D,Y,N,A,A,A,A,this.tintFill,n,a)},bc=function(e,t,i,s){e.save();var r=this._width,n=this._height,a=r*this.originX,h=n*this.originY,o=this.x-a,l=this.y-h,u=1,d=1;this.flipX&&(o+=r,u=-1),this.flipY&&(l+=n,d=-1),s&&(o=Math.round(o),l=Math.round(l)),e.translate(o,l),e.rotate(this.rotation),e.scale(this.scaleX*u,this.scaleY*d);var c=this.frame;e.drawImage(c.source.image,c.cutX,c.cutY,r,n,0,0,r,n),e.restore()};const yc=Phaser.Utils.Objects.IsPlainObject;class Mo extends vc{constructor(t,i){super(t,Po),this.setFrame(i)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!yc(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}}var Sc={webglRender:Cc,canvasRender:bc};Object.assign(Mo.prototype,Sc);var Eo=function(e,t){typeof t=="string"&&(t={frame:t});var i=e.poolManager?e.poolManager.allocate(Po):null;return i===null?i=new Mo(e):i.setParent(e).setActive(),i.modifyPorperties(t),e.addChild(i),i},xc=function(e,t,i,s,r,n){Eo(this,{frame:t,x:i,y:s,width:r,height:n})},Tc=function(e,t,i,s,r,n){var a=this.texture.get(t),h=a.width,o=a.height,l=Math.floor(r/h),u=Math.floor(n/o);i+=(r-l*h)/2,s+=(n-u*o)/2;for(var d=0;d<l;d++)for(var c=0;c<u;c++)Eo(this,{frame:t,x:i+d*h,y:s+c*o})};const kc={_drawImage:xc,_drawTileSprite:Tc};class Pc extends yo(ko,"rexNinePatch2"){setTexture(t,i,s,r){return xo.call(this,t,"__BASE"),this.columns?(super.setTexture(t,i,s,r),this):this}}Object.assign(Pc.prototype,kc);const oe=Phaser.Utils.Objects.GetValue;class Oo{constructor(t,i,s,r,n){this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,s,r,n)}setTo(t,i,s,r,n){return this.setPosition(t,i),this.setRadius(n),this.setSize(s,r),this}setPosition(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.x=t,this.y=i,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var i,s;typeof t=="number"?(i=t,s=t):(i=oe(t,"x",0),s=oe(t,"y",0));var r=this.cornerRadius;r.tl=Ii(oe(t,"tl",void 0),i,s),r.tr=Ii(oe(t,"tr",void 0),i,s),r.bl=Ii(oe(t,"bl",void 0),i,s),r.br=Ii(oe(t,"br",void 0),i,s)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Gi(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Gi(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Gi(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Gi(this.cornerRadius.br,t)}}var Ii=function(e,t,i){return e===void 0?{x:t,y:i}:typeof e=="number"?{x:e,y:e}:e},Gi=function(e,t){typeof t=="number"?(e.x=t,e.y=t):(e.x=oe(t,"x",0),e.y=oe(t,"y",0))},He=function(e,t,i){var s=i.length;if(s>=2){var r=i[s-2],n=i[s-1];if(e===r&&t===n)return i}return i.push(e,t),i};const Zn=Phaser.Math.DegToRad;var Ue=function(e,t,i,s,r,n,a,h,o){a&&n>r?n-=360:!a&&n<r&&(n+=360);var l=n-r,u=Zn(l)/h;r=Zn(r);for(var d=0;d<=h;d++){var c=r+u*d,f=e+i*Math.cos(c),p=t+s*Math.sin(c);He(f,p,o)}return o},wc=Phaser.Renderer.WebGL.Utils,_o=function(e,t,i,s,r,n){for(var a=wc.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*s),h=i.pathData,o=i.pathIndexes,l=0;l<o.length;l+=3){var u=o[l]*2,d=o[l+1]*2,c=o[l+2]*2,f=h[u+0]-r,p=h[u+1]-n,v=h[d+0]-r,g=h[d+1]-n,m=h[c+0]-r,b=h[c+1]-n,S=t.getX(f,p),x=t.getY(f,p),C=t.getX(v,g),y=t.getY(v,g),T=t.getX(m,b),P=t.getY(m,b);e.batchTri(i,S,x,C,y,T,P,0,0,1,1,a,a,a,2)}},Mc=Phaser.Renderer.WebGL.Utils,Cs=function(e,t,i,s,r){var n=e.strokeTint,a=Mc.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);n.TL=a,n.TR=a,n.BL=a,n.BR=a;var h=t.pathData,o=h.length-1,l=t.lineWidth,u=l/2,d=h[0]-s,c=h[1]-r;t.closePath||(o-=2);for(var f=2;f<o;f+=2){var p=h[f]-s,v=h[f+1]-r;e.batchLine(d,c,p,v,u,u,l,f-2,t.closePath?f===o-1:!1),d=p,c=v}};const Ec=Phaser.GameObjects.GetCalcMatrix;var Oc=function(e,t,i,s){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var r=e.pipelines.set(t.pipeline),n=Ec(t,i,s),a=r.calcMatrix.copyFrom(n.calc),h=t._displayOriginX,o=t._displayOriginY,l=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&_o(r,a,t,l,h,o),t.isStroked&&Cs(r,t,l,h,o),e.pipelines.postBatch(t)},Ti=function(e,t,i,s){var r=i||t.fillColor,n=s||t.fillAlpha,a=(r&16711680)>>>16,h=(r&65280)>>>8,o=r&255;e.fillStyle="rgba("+a+","+h+","+o+","+n+")"},ki=function(e,t,i,s){var r=i||t.strokeColor,n=s||t.strokeAlpha,a=(r&16711680)>>>16,h=(r&65280)>>>8,o=r&255;e.strokeStyle="rgba("+a+","+h+","+o+","+n+")",e.lineWidth=t.lineWidth};const _c=Phaser.Renderer.Canvas.SetTransform;var Rc=function(e,t,i,s){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var r=e.currentContext;if(_c(e,r,t,i,s)){var n=t._displayOriginX,a=t._displayOriginY,h=t.pathData,o=h.length-1,l=h[0]-n,u=h[1]-a;r.beginPath(),r.moveTo(l,u),t.closePath||(o-=2);for(var d=2;d<o;d+=2){var c=h[d]-n,f=h[d+1]-a;r.lineTo(c,f)}r.closePath(),t.isFilled&&(Ti(r,t),r.fill()),t.isStroked&&(ki(r,t),r.stroke()),r.restore()}};const Lc={renderWebGL:Oc,renderCanvas:Rc},Bc=Phaser.GameObjects.Shape,Ic=Phaser.Utils.Objects.IsPlainObject,qn=Phaser.Utils.Objects.GetValue,Gc=Phaser.Geom.Polygon.Earcut;class Dc extends Bc{constructor(t,i,s,r,n,a,h,o){var l,u,d;if(Ic(i)){var c=i;i=c.x,s=c.y,r=c.width,n=c.height,a=c.radius,h=c.color,o=c.alpha,l=c.strokeColor,u=c.strokeAlpha,d=c.strokeWidth}i===void 0&&(i=0),s===void 0&&(s=0),a===void 0&&(a=0);var f=new Oo;super(t,"rexRoundRectangleShape",f);var p=qn(a,"radius",a);f.setTo(0,0,r,n,p);var v=qn(a,"iteration",void 0);this.setIteration(v),this.setPosition(i,s),h!==void 0&&this.setFillStyle(h,o),l!==void 0&&(d===void 0&&(d=2),this.setStrokeStyle(d,l,u)),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var s=t.cornerRadius,r,n=this.iteration+1;if(r=s.br,Di(r)){var a=t.width-r.x,h=t.height-r.y;Ue(a,h,r.x,r.y,0,90,!1,n,i)}else He(t.width,t.height,i);if(r=s.bl,Di(r)){var a=r.x,h=t.height-r.y;Ue(a,h,r.x,r.y,90,180,!1,n,i)}else He(0,t.height,i);if(r=s.tl,Di(r)){var a=r.x,h=r.y;Ue(a,h,r.x,r.y,180,270,!1,n,i)}else He(0,0,i);if(r=s.tr,Di(r)){var a=t.width-r.x,h=r.y;Ue(a,h,r.x,r.y,270,360,!1,n,i)}else He(t.width,0,i);return i.push(i[0],i[1]),this.pathIndexes=Gc(i),this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,i){if(i===void 0&&(i=t),this.geom.width===t&&this.geom.height===i)return this;this.geom.setSize(t,i),this.updateDisplayOrigin(),this.dirty=!0;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=t,s.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiuBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}}var Di=function(e){return e.x!==0&&e.y!==0};Object.assign(Dc.prototype,Lc);const bs=Phaser.Math.DegToRad,Qn=bs(0),ta=bs(90),ea=bs(180),ia=bs(270);var Ac=function(e,t,i,s,r,n,a){var h=new Oo(t,i,s,r,n),o=h.minWidth,l=h.minHeight,u=s>=o?1:s/o,d=r>=l?1:r/l,c=h.cornerRadius,f,p,v,g,m;e.save(),e.beginPath(),e.translate(t,i),f=c.br,p=f.x*u,v=f.y*d,g=s-p,m=r-v,e.moveTo(s,m),p>0&&v>0?Ai(e,g,m,p,v,Qn,ta,a):(e.lineTo(s,r),e.lineTo(g,r)),f=c.bl,p=f.x*u,v=f.y*d,g=p,m=r-v,e.lineTo(p,r),p>0&&v>0?Ai(e,g,m,p,v,ta,ea,a):(e.lineTo(0,r),e.lineTo(0,m)),f=c.tl,p=f.x*u,v=f.y*d,g=p,m=v,e.lineTo(0,m),p>0&&v>0?Ai(e,g,m,p,v,ea,ia,a):(e.lineTo(0,0),e.lineTo(g,0)),f=c.tr,p=f.x*u,v=f.y*d,g=s-p,m=v,e.lineTo(g,0),p>0&&v>0?Ai(e,g,m,p,v,ia,Qn,a):(e.lineTo(s,0),e.lineTo(s,m)),e.closePath(),e.restore()},Ai=function(e,t,i,s,r,n,a,h){if(h==null)e.ellipse(t,i,s,r,0,n,a);else{h+=1;for(var o,l,u,d=(a-n)/h,c=0;c<=h;c++)u=n+d*c,o=t+s*Math.cos(u),l=i+r*Math.sin(u),e.lineTo(o,l)}},$c=function(e,t,i,s,r,n,a,h,o,l,u,d,c){if(Ac(t,i,s,r,n,a,c),h!=null){if(u!=null){var f;d?f=t.createLinearGradient(0,0,r,0):f=t.createLinearGradient(0,0,0,n),f.addColorStop(0,h),f.addColorStop(1,u),h=f}t.fillStyle=h,t.fill()}o!=null&&l>0&&(t.strokeStyle=o,t.lineWidth=l,t.stroke())},sn=function(e,t,i,s,r,n,a,h){if(!(t==null&&i==null)){var o=e.canvas.width,l=e.canvas.height;i==null&&(s=0);var u=s/2;o-=s,l-=s,$c(e.canvas,e.context,u,u,o,l,r,t,i,s,n,a,h)}},Vc=function(){sn(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const sa=Phaser.Utils.Objects.GetValue;class ME extends yi{constructor(t,i,s,r,n,a,h,o,l,u,d){super(t,i,s,r,n),this.type="rexRoundRectangleCanvas";var c=sa(a,"radius",a),f=sa(a,"iteration",void 0);this.setRadius(c),this.setIteration(f),this.setFillStyle(h,u,d),this.setStrokeStyle(o,l)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=E(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=E(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._fillStyle}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,i,s){return s===void 0&&(s=!0),this.fillStyle=t,this.fillColor2=i,this.isHorizontalGradient=s,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=E(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,i){return this.strokeStyle=t,this.lineWidth=i,this}updateTexture(){return this.clear(),Vc.call(this),super.updateTexture(),this}}/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var zc=Phaser.Renderer.WebGL.Utils,Fc=function(e,t,i,s){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var r=t.frame,n=r.width,a=r.height,h=zc.getTintAppendFloatAlpha,o=e.pipelines.set(t.pipeline,t),l=o.setTexture2D(r.glTexture,t);e.pipelines.preBatch(t),o.batchTexture(t,r.glTexture,n,a,t.x,t.y,n/t.style.resolution,a/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,a,h(t.tintTopLeft,i.alpha*t._alphaTL),h(t.tintTopRight,i.alpha*t._alphaTR),h(t.tintBottomLeft,i.alpha*t._alphaBL),h(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,s,!1,l),e.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Wc=function(e,t,i,s){t.width===0||t.height===0||(i.addToRenderList(t),e.batchSprite(t,t.frame,i,s))};const Yc={renderWebGL:Fc,renderCanvas:Wc};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const $i=Phaser.Display.Canvas.CanvasPool;var ra=function(e){var t=$i.create(this),i=t.getContext("2d");e.syncFont(t,i);var s=i.measureText(e.testString);if("actualBoundingBoxAscent"in s){var r=s.actualBoundingBoxAscent,n=s.actualBoundingBoxDescent,l={ascent:r,descent:n,fontSize:r+n};return $i.remove(t),l}var a=Math.ceil(s.width*e.baselineX),h=a,o=2*h;h=h*e.baselineY|0,t.width=a,t.height=o,i.fillStyle="#f00",i.fillRect(0,0,a,o),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,h);var l={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,a,o))return l.ascent=h,l.descent=h+6,l.fontSize=l.ascent+l.descent,$i.remove(t),l;var u=i.getImageData(0,0,a,o).data,d=u.length,c=a*4,f,p,v=0,g=!1;for(f=0;f<h;f++){for(p=0;p<c;p+=4)if(u[v+p]!==255){g=!0;break}if(!g)v+=c;else break}for(l.ascent=h-f,v=d-c,g=!1,f=o;f>h;f--){for(p=0;p<c;p+=4)if(u[v+p]!==255){g=!0;break}if(!g)v-=c;else break}return l.descent=f-h,l.fontSize=l.ascent+l.descent,$i.remove(t),l},H={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const Nc=Phaser.Utils.Objects.GetAdvancedValue,ot=Phaser.Utils.Objects.GetValue;var Ns={backgroundColor:["backgroundColor",null,E],backgroundColor2:["backgroundColor2",null,E],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,E],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",E],stroke:["stroke","#fff",E],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",E],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",E],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};class rn{constructor(t,i){this.parent=t,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(i,!1,!0)}get canvas(){return this.parent.canvasText.canvas}get context(){return this.parent.canvasText.context}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==H.NO_WRAP&&this.wrapWidth===0}setStyle(t,i,s){if(i===void 0&&(i=!0),s===void 0&&(s=!1),t&&t.hasOwnProperty("wrap")){var r=t.wrap;if(r.hasOwnProperty("mode")){var n=r.mode;typeof n=="string"&&(r.mode=na[n])}else r.hasOwnProperty("width")&&(r.mode=1)}t&&t.rtl&&s&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");for(var a in Ns){var h=Ns[a],o=h[0],l=s?h[1]:this[a],u=h[2];if(a==="wrapCallback"||a==="wrapCallbackScope")this[a]=ot(t,o,l);else{var d=Nc(t,o,l);u&&(d=u(d)),this[a]=d}}var c=ot(t,"font",null);c===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=c;var f=ot(t,"fill",null);f!==null&&(this.color=E(f));var p=ot(t,"images",void 0);p&&this.parent.addImage(p);var v=ot(t,"metrics",!1);return v?this.metrics={ascent:ot(v,"ascent",0),descent:ot(v,"descent",0),fontSize:ot(v,"fontSize",0)}:(i||!this.metrics)&&(this.metrics=ra(this)),i?this.parent.updateText():this.parent}syncFont(t,i){i.font=this._font}syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"}syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=ra(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=ot(t,"fontFamily","Courier"),this.fontSize=ot(t,"fontSize","16px"),this.fontStyle=ot(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,i,s){return s===void 0&&(s=!0),this.backgroundColor=E(t,this.canvas,this.context),this.backgroundColor2=E(i,this.canvas,this.context),this.backgroundHorizontalGradient=s,this.update(!1)}setBackgroundStrokeColor(t,i){return this.backgroundStrokeColor=E(t,this.canvas,this.context),this.backgroundStrokeLineWidth=i,this.update(!1)}setBackgroundCornerRadius(t,i){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=i,this.update(!1)}setFill(t){return this.color=E(t,this.canvas,this.context),this.update(!1)}setColor(t){return this.color=E(t,this.canvas,this.context),this.update(!1)}setStroke(t,i){return t===void 0?this.strokeThickness=0:(i===void 0&&(i=this.strokeThickness),this.stroke=E(t,this.canvas,this.context),this.strokeThickness=i),this.update(!0)}setShadow(t,i,s,r,n,a){return t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s="#000"),r===void 0&&(r=0),n===void 0&&(n=!1),a===void 0&&(a=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=E(s,this.canvas,this.context),this.shadowBlur=r,this.shadowStroke=n,this.shadowFill=a,this.update(!1)}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=E(t,this.canvas,this.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,i,s){return t===void 0&&(t="#000"),i===void 0&&(i=0),s===void 0&&(s=0),this.underlineColor=E(t,this.canvas,this.context),this.underlineThickness=i,this.underlineOffset=s,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=E(t,this.canvas,this.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=na[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,i){return t===void 0&&(t="left"),i===void 0&&(i="top"),this.halign=t,this.valign=i,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,i){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,i&&(typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=ot(i,"fontFamily",this.fontFamily),this.fontSize=ot(i,"fontSize",this.fontSize),this.fontStyle=ot(i,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={};for(var i in Ns)t[i]=this[i];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}}const na={none:H.NO_WRAP,word:H.WORD_WRAP,char:H.CHAR_WRAP,character:H.CHAR_WRAP},Hs=Phaser.Display.Canvas.CanvasPool;var Hc=function(e,t,i){i===void 0&&(i={});var s=Hs.create(this),r=s.getContext("2d");e.syncFont(s,r);var n=r.measureText(t),a=Math.ceil(n.width*e.baselineX),h=a,o=2*h;if(h=h*e.baselineY|0,s.width=a,s.height=o,r.fillStyle="#f00",r.fillRect(0,0,a,o),r.font=e._font,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(e.testString,0,h),i.left=0,a===0||o===0||!r.getImageData(0,0,a,o))return Hs.remove(s),i;for(var l=r.getImageData(0,0,a,o).data,u=!1,d=0;d<a;d++){for(var c=0;c<o;c++){var f=(c*a+d)*4;if(l[f]!==255){i.left=d,u=!0;break}}if(u)break}return Hs.remove(s),i};const Uc={draw(e,t,i,s){var r=this.penManager;this.hitAreaManager.clear();var n=this.context;n.save();var a=this.defaultStyle;this.clear(),sn(this,a.backgroundColor,a.backgroundStrokeColor,a.backgroundStrokeLineWidth,a.backgroundCornerRadius,a.backgroundColor2,a.backgroundHorizontalGradient,a.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var h=a.halign,o=a.valign,l,u=a.lineHeight,d=r.lines,c=d.length,f=a.maxLines,p,v,g;f>0&&c>f?(p=f,o==="center"?v=Math.floor((c-p)/2):o==="bottom"?v=c-p:v=0):(p=c,v=0),g=v+p;var m,b,S=this.rtl,x=S?this.parent.width:void 0;o==="center"?b=Math.max((s-p*u)/2,0):o==="bottom"?b=Math.max(s-p*u-2,0):b=0,b+=t;for(var C=v;C<g;C++)if(l=r.getLineWidth(C),l!==0){for(var y=d[C],T=y.length,P=h,w=0;w<T;w++){var M=y[w].prop.align;if(M!==void 0){P=M;break}}P==="center"?m=(i-l)/2:P==="right"?m=S?0:i-l:m=S?i-l:0,m+=e;for(var w=0;w<T;w++)this.drawPen(y[w],m,b,x)}n.restore()},drawPen(e,t,i,s){t+=e.x,i+=e.y+(e.prop.y||0),s!==void 0&&(t=s-t);var r=this.canvas,n=this.context;n.save();var a=this.parser.propToContextStyle(this.defaultStyle,e.prop);a.buildFont(),a.syncFont(r,n),a.syncStyle(r,n),a.underlineThickness>0&&e.width>0&&this.drawUnderline(t,i,e.width,a),e.isTextPen&&this.drawText(t,i,e.text,a),e.isImagePen&&this.drawImage(t,i,e.prop.img,a),n.restore(),e.hasAreaMarker&&e.width>0&&this.hitAreaManager.add(e.prop.area,t,i-this.startYOffset,e.width,this.defaultStyle.lineHeight)},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawUnderline(e,t,i,s){t+=s.underlineOffset-s.underlineThickness/2,this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context,n=r.lineCap;r.lineCap="butt",r.strokeStyle=s.underlineColor,r.lineWidth=s.underlineThickness,r.beginPath(),r.moveTo(e,t),r.lineTo(e+i,t),r.stroke(),r.lineCap=n},drawText(e,t,i,s){this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context;s.stroke&&s.stroke!=="none"&&s.strokeThickness>0&&(s.syncShadow(r,s.shadowStroke),r.strokeText(i,e,t)),s.color&&s.color!=="none"&&(s.syncShadow(r,s.shadowFill),r.fillText(i,e,t))},drawImage(e,t,i,s){t-=this.startYOffset,this.parent.imageManager.draw(i,this.context,e,t,this.autoRound)}},ve=Phaser.Utils.Objects.GetValue,Xc=H.NO_NEWLINE,aa=H.RAW_NEWLINE;class jc{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=ve(t,"text",""),this.x=ve(t,"x",0),this.y=ve(t,"y",0),this.width=ve(t,"width",0);var i=ve(t,"prop",null);i===null&&(i={}),this.prop=i,this.newLineMode=ve(t,"newLineMode",0),this.startIndex=ve(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===aa&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==Xc&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===aa&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}const Vi=Phaser.Utils.Objects.GetFastValue,ha=H.NO_NEWLINE,Kc=H.WRAPPED_NEWLINE;var Jc=new te,Zc=new te;class nn{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=Vi(t,"pensPool",Jc),this.LinesPool=Vi(t,"linesPool",Zc),this.tagToText=Vi(t,"tagToText",kt),this.tagToTextScope=Vi(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,i=this.lines.length;t<i;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,i,s,r,n,a){var h=this.PensPool.pop();return h==null&&(h=new jc),ge.text=t,ge.x=i,ge.y=s,ge.width=r,ge.prop=n,ge.newLineMode=a,h.resetFromJSON(ge),this.addPen(h),this}addImagePen(t,i,s,r){return this.addTextPen("",t,i,s,r,ha),this}addNewLinePen(){var t=this.lastPen,i=t?t.lastX:0,s=t?t.y:0,r=t?vi(t.prop):null;return this.addTextPen("",i,s,0,r,Kc),this}addPen(t){var i=this.lastPen;i==null?t.startIndex=0:t.startIndex=i.endIndex,this.pens.push(t);var s=this.lastLine;s==null&&(s=this.LinesPool.pop()||[],this.lines.push(s)),s.push(t),t.newLineMode!==ha&&(s=this.LinesPool.pop()||[],this.lines.push(s)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new nn),t.clear();for(var i=0,s=this.lines.length;i<s;i++)for(var r=this.lines[i],n=0,a=r.length;n<a;n++){var h=r[n];t.addPen(h.text,h.x,h.y,h.width,vi(h.prop),h.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var i=this.lines[t];return i&&i[0]?i[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var i,s=!1,r;for(i=t;i>=0&&(r=this.lines[i],s=r!=null&&r.length>0,!s);i--);if(!s)return 0;var n=r[r.length-1];return n.endIndex}getLineWidth(t){var i=this.lines[t];if(!i)return 0;var s=i[i.length-1];if(s==null)return 0;var r=s.lastX;return r}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,i=0,s=0,r=this.lines.length;s<r;s++)t=this.getLineWidth(s),t>i&&(i=t);return this.maxLinesWidth=i,i}getLineWidths(){for(var t=[],i=0,s=this.lines.length;i<s;i++)t.push(this.getLineWidth(i));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",i=this.pens,s=0,r=i.length;s<r;s++)t+=i[s].plainText;return t}get rawTextLength(){for(var t=0,i=this.pens,s=0,r=this.pens.length;s<r;s++)t+=i[s].rawTextLength;return t}getSliceTagText(t,i,s){if(t===void 0&&(t=0),i===void 0){var r=this.lastPen;if(r==null)return"";i=r.endIndex}s===void 0&&(s=!1);for(var n="",a,h,o,l,u,d,c,f=0,p=this.pens.length;f<p&&(a=this.pens[f],l=a.endIndex,!(!(l<=t)&&(a=this.pens[f],h=s?a.wrapText:a.plainText,d=a.prop,o=a.startIndex,u=o>=t&&l<=i,u||(h=h.substring(t-o,i-o)),this.tagToTextScope?n+=this.tagToText.call(this.tagToTextScope,h,d,c):n+=this.tagToText(h,d,c),c=d,l>=i)));f++);return n}get length(){return this.lines.length}set length(t){this.clear()}}var ge={};const qc=Phaser.Geom.Rectangle;var oa=new te;class Qc{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return oa.pushMultiple(this.hitAreas),this}add(t,i,s,r,n){var a=oa.pop();return a===null?a=new qc(i,s,r,n):a.setTo(i,s,r,n),a.key=t,this.hitAreas.push(a),this}getFirst(t,i){for(var s=0,r=this.hitAreas.length;s<r;s++){var n=this.hitAreas[s];if(n.contains(t,i))return n}return null}drawBounds(t,i,s){i===void 0&&(i=16777215),s&&t.save().scaleCanvas(s.scaleX,s.scaleY).rotateCanvas(s.rotation).translateCanvas(s.x,s.y);for(var r=0,n=this.hitAreas.length;r<n;r++){var a=this.hitAreas[r];t.lineStyle(1,i).strokeRect(a.x,a.y,a.width,a.height)}return s&&t.restore(),this}}var tf=function(){this.parent.on("pointerdown",ef,this).on("pointerup",sf,this).on("pointermove",Us,this).on("pointerover",Us,this).on("pointerout",function(e,t){Us.call(this,e,null,null,t)},this)},ef=function(e,t,i,s){var r=this.hitAreaManager.getFirst(t,i);r!==null&&pi.call(this,"areadown",r.key,e,t,i,s)},sf=function(e,t,i,s){var r=this.hitAreaManager.getFirst(t,i);r!==null&&pi.call(this,"areaup",r.key,e,t,i,s)},Us=function(e,t,i,s){if(t===null){this.lastHitAreaKey!==null&&pi.call(this,"areaout",this.lastHitAreaKey,e,t,i,s),this.lastHitAreaKey=null;return}var r=this.hitAreaManager.getFirst(t,i),n=r?r.key:null;this.lastHitAreaKey!==n&&(this.lastHitAreaKey!==null&&pi.call(this,"areaout",this.lastHitAreaKey,e,t,i,s),n!==null&&pi.call(this,"areaover",n,e,t,i,s),this.lastHitAreaKey=n)},pi=function(e,t,i,s,r,n){this.parent.emit(`${e}-${t}`,i,s,r,n),this.parent.emit(e,t,i,s,r,n)},an=new te,rf=function(e){!e||an.push(e)},nf=function(e){!e||an.pushMultiple(e)},ke=function(e,t,i){var s=an.pop();return s===null&&(s={}),s.text=e,s.width=t,s.newLineMode=i,s};const af=H.NO_NEWLINE,hf=H.RAW_NEWLINE,Xs=H.WRAPPED_NEWLINE,la=H.NO_WRAP,of=H.WORD_WRAP,lf=H.CHAR_WRAP,uf=H.SPLITREGEXP;var Ro=function(e,t,i,s,r){s<=0&&(i=la);var n=[];if(!e||!e.length)return n;for(var a=i===la,h=i===of,o=e.split(uf),l,u,d,c=0,f=o.length;c<f;c++){if(l=o[c],d=c===f-1?af:hf,a){var p=t(l);n.push(ke(l,p,d));continue}if(u=c===0?s-r:s,l.length<=100){var p=t(l);if(p<=u){n.push(ke(l,p,d));continue}}var v,g;h?(v=l.split(" "),g=v[v.length-1]==="",g&&(v.length-=1)):v=l;for(var m,b,S,x="",C=0,y,T=h?t(" "):void 0,P=0,w=v.length;P<w;P++){if(m=v[P],b=t(m),S=P===w-1,h&&(!S||g)&&(m+=" ",b+=T),h&&b>s){x!==""?n.push(ke(x,C,Xs)):P===0&&r>0&&n.push(ke("",0,Xs)),n.push(...Ro(m,t,lf,s,0));var M=n.pop();x=M.text,C=M.width,rf(M),x===" "&&(x="",C=0);continue}y=C+b,y>u?(n.push(ke(x,C,Xs)),x=m,C=b,u=s):(x+=m,C=y),S&&n.push(ke(x,C,d))}}return n};const zi=Phaser.Utils.Objects.GetValue,df=H.NO_WRAP,cf=H.NO_NEWLINE;class Lo{constructor(t){this.parent=t.parent,this.context=zi(t,"context",null),this.canvas=this.context.canvas,this.parser=zi(t,"parser",null),this.defaultStyle=zi(t,"style",null),this.autoRound=!0,this.pensPool=zi(t,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new Qc,this.lastHitAreaKey=null;var i=this.context;this.getTextWidth=function(s){return i.measureText(s).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}updatePenManager(t,i,s,r,n){if(n===void 0&&(n=this.penManager),n.clear(),t==="")return n;var a=this.parent.style;if(a.isWrapFitMode){var h=this.parent.padding;s=a.fixedWidth-h.left-h.right}for(var o=this.canvas,l=this.context,u=function(Y){return l.measureText(Y).width},d=0,c=0,f=a.wrapCallback,p=a.wrapCallbackScope,v=!0,g,m,b,S=this.parser.splitText(t),x,C,y=0,T=S.length;y<T;y++)if(x=this.parser.tagTextToProp(S[y],m),g=x.plainText,m=x.prop,m.img){var P=this.imageManager.getOuterWidth(m.img);s>0&&i!==df&&s<d+P&&(n.addNewLinePen(),c+=r,d=0),n.addImagePen(d,c,P,vi(m)),d+=P}else if(g!==""){if(l.save(),b=this.parser.propToContextStyle(this.defaultStyle,m),b.buildFont(),b.syncFont(o,l),b.syncStyle(o,l),!f)C=Ro(g,u,i,s,d);else{C=f.call(p,g,u,s,d),typeof C=="string"&&(C=C.split(`
`));for(var R,w=0,M=C.length;w<M;w++)R=C[w],typeof R=="string"?C[w]=ke(R,u(R),w<M-1?2:0):v=!1}for(var R,w=0,M=C.length;w<M;w++)R=C[w],n.addTextPen(R.text,d,c,R.width,vi(m),R.newLineMode),R.newLineMode!==cf?(d=0,c+=r):d+=R.width;v&&nf(C),C=null,l.restore()}for(var y=0,T=this.lines.length;y<T;y++){var G=this.lines[y],D=G[G.length-1];D&&(D.width+=this.parser.getStrokeThinkness(this.defaultStyle,D.prop))}return n}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,i=this.defaultStyle.maxLines;return i>0&&t>i&&(t=i),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,i=this.defaultStyle.lineHeight*t;return t>0&&(i-=this.defaultStyle.lineSpacing),i}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new nn({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,i,s){var r;if(t==null)r=this.penManager.plainText;else{var n=this.parser.splitText(t,1);r="";for(var a=0,h=n.length;a<h;a++)r+=n[a]}return(i!=null||s!=null)&&(i==null&&(i=0),s==null&&(s=r.length),r=r.substring(i,s)),r}getPenManager(t,i){if(t===void 0)return this.copyPenManager(i,this.penManager);i===void 0&&(i=this.newPenManager());var s=this.defaultStyle;return this.updatePenManager(t,s.wrapMode,s.wrapWidth,s.lineHeight,i),i}getText(t,i,s,r){if(t==null)return this.penManager.getSliceTagText(i,s,r);var n=this.tmpPenManager,a=this.defaultStyle;return this.updatePenManager(t,a.wrapMode,a.wrapWidth,a.lineHeight,n),n.getSliceTagText(i,s,r)}copyPenManager(t,i){return i===void 0&&(i=this.penManager),i.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var ff={setInteractive:tf};Object.assign(Lo.prototype,Uc,ff);const js=Phaser.Utils.Objects.GetValue;var Ks=function(e,t){t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var i=t.key,s=t.frame,r=t.width,n=t.height;if(r===void 0||n===void 0){var a=this.textureManager.getFrame(i,s),h=a?a.cutWidth:0,o=a?a.cutHeight:0;r===void 0&&n===void 0?(r=h,n=o):r===void 0?r=h*(n/o):n===void 0&&(n=o*(r/h))}this.images[e]={key:i,frame:s,width:r,height:n,y:js(t,"y",0),left:js(t,"left",0),right:js(t,"right",0)}},pf=function(e,t,i,s,r){var n=this.get(e);i+=n.left,s+=n.y,r&&(i=Math.round(i),s=Math.round(s));var a=this.textureManager.getFrame(n.key,n.frame);t.drawImage(a.source.image,a.cutX,a.cutY,a.cutWidth,a.cutHeight,i,s,n.width,n.height)};class hn{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,i){if(typeof t=="string")Ks.call(this,t,i);else if(Array.isArray(t))for(var s=t,r=0,n=s.length;r<n;r++)Ks.call(this,s[r]);else{var s=t;for(var t in s)Ks.call(this,t,s[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var i=this.get(t);return i?i.width+i.left+i.right:0}getFrame(t){var i=this.get(t);return i?this.textureManager.getFrame(i.key,i.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var vf={draw:pf};Object.assign(hn.prototype,vf);const gf=Phaser.Utils.Objects.IsPlainObject,mf=Phaser.DOM.AddToDOM,ua=Phaser.Display.Canvas.CanvasPool,da=Phaser.GameObjects.GameObject,Vt=Phaser.Utils.Objects.GetValue,Cf=Phaser.DOM.RemoveFromDOM,bf=H.SPLITREGEXP;var Js={};class yf extends da{constructor(t,i,s,r,n,a,h){if(gf(i)){var o=i;i=Vt(o,"x",0),s=Vt(o,"y",0),r=Vt(o,"text",""),n=Vt(o,"style","")}if(i===void 0&&(i=0),s===void 0&&(s=0),super(t,a),this.renderer=t.sys.game.renderer,this.setPosition(i,s),this.setOrigin(0,0),this.initPipeline(),this.canvas=ua.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,n){if(n.hasOwnProperty("align")){var l=n.align;delete n.align,n.halign=l}n.hasOwnProperty("stroke")&&!n.hasOwnProperty("strokeThickness")&&(n.strokeThickness=1)}this.style=new rn(this,n),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),Js.hasOwnProperty(a)||(Js[a]=new te),this.canvasText=new Lo({parent:this,context:this.context,parser:h,style:this.style,pensPool:Js[a]}),this.parser=h,this.initRTL(),n&&n.padding&&this.setPadding(n.padding),this.setText(r),t.sys.game.events.on("contextrestored",this.onContextRestored,this)}onContextRestored(){this.dirty=!0}preDestroy(){this.style.rtl&&Cf(this.canvas),this.scene.sys.game.events.off("contextrestored",this.onContextRestored,this),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),ua.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",mf(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,i){return this.style.setFixedSize(t,i)}setBackgroundColor(t,i,s){return this.style.setBackgroundColor(t,i,s)}setBackgroundStrokeColor(t,i){return this.style.setBackgroundStrokeColor(t,i)}setBackgroundCornerRadius(t,i){return this.style.setBackgroundCornerRadius(t,i)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,i){return this.style.setStroke(t,i)}setShadow(t,i,s,r,n,a){return this.style.setShadow(t,i,s,r,n,a)}setShadowOffset(t,i){return this.style.setShadowOffset(t,i)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}setXOffset(t){return this.style.setXOffset(t)}setPadding(t,i,s,r){if(typeof t=="object"){var n=t,a=Vt(n,"x",null);a!==null?(t=a,s=a):(t=Vt(n,"left",0),s=Vt(n,"right",t));var h=Vt(n,"y",null);h!==null?(i=h,r=h):(i=Vt(n,"top",0),r=Vt(n,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),s===void 0&&(s=t),r===void 0&&(r=i);return this.padding.left=t,this.padding.top=i,this.padding.right=s,this.padding.bottom=r,this.updateText(!1)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}updateText(t){t===void 0&&(t=!0);var i=this.canvasText,s=this.style;t&&i.updatePenManager(this._text,s.wrapMode,s.wrapWidth,s.lineHeight);var r=this.padding,n,a,h=Math.ceil(i.linesWidth);s.fixedWidth===0?(this.width=h+r.left+r.right,n=h):(this.width=s.fixedWidth,n=this.width-r.left-r.right,n<h&&(n=h)),s.fixedHeight===0?(this.height=i.linesHeight+r.top+r.bottom,a=i.linesHeight):(this.height=s.fixedHeight,a=this.height-r.top-r.bottom,a<i.linesHeight&&(a=i.linesHeight));var o=this.width,l=this.height;this.updateDisplayOrigin();var u=s.resolution;o*=u,l*=u,o=Math.max(Math.ceil(o),1),l=Math.max(Math.ceil(l),1);var d=this.canvas,c=this.context;d.width!==o||d.height!==l?(d.width=o,d.height=l,this.frame.setSize(o,l)):c.clearRect(0,0,o,l),c.save(),c.scale(u,u);var f=this.style.rtl?r.right:r.left,p=r.top;i.draw(f,p,n,a),c.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(d,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var v=this.input;return v&&!v.customHitArea&&(v.hitArea.width=this.width,v.hitArea.height=this.height),this}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,i){return this.style.setTextMetrics(t,i)}toJSON(){var t=at.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t}setInteractive(t,i,s){var r=!!this.input;return da.prototype.setInteractive.call(this,t,i,s),r||this.canvasText.setInteractive(),this}getWrappedText(t,i,s){return t=this.canvasText.getText(t,i,s,!0),t.split(bf)}getPlainText(t,i,s){return this.canvasText.getPlainText(t,i,s)}getText(t,i,s,r){return r===void 0&&(r=!1),this.canvasText.getText(t,i,s,r)}getSubString(t,i,s){return this.getText(t,i,s)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,i){return this.canvasText.getPenManager(t,i)}setSize(t,i){return this.setFixedSize(t,i)}resize(t,i){return this.setFixedSize(t,i)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}get imageManager(){return this._imageManager||(this._imageManager=new hn(this.scene)),this._imageManager}addImage(t,i){return this.imageManager.add(t,i),this}drawAreaBounds(t,i){return this.canvasText.hitAreaManager.drawBounds(t,i,this),this}measureTextMargins(t,i){return Hc(this.style,t,i)}generateTexture(t,i,s,r,n){var a=this.canvas;return r===void 0?r=a.width:r*=this.resolution,n===void 0?n=a.height:n*=this.resolution,mo(this.scene,a,t,i,s,r,n),this}}const at=Phaser.GameObjects.Components;Phaser.Class.mixin(yf,[at.Alpha,at.BlendMode,at.ComputedSize,at.Crop,at.Depth,at.Flip,at.GetBounds,at.Mask,at.Origin,at.Pipeline,at.ScrollFactor,at.Tint,at.Transform,at.Visible,Yc]);var st=function(e,t){return t===void 0?`\\[${e}\\]`:`\\[${e}=(${t})\\]`},pt=function(e){return`\\[/${e}\\]`};const on="[-.0-9]+",ln="[a-z]+|#[0-9abcdef]+",un="[^\\]]+",Bo="esc",Io=st(Bo),Go=pt(Bo),Do="raw",Ao=st(Do),$o=pt(Do),Vo="b",zo=st(Vo),Fo=pt(Vo),Wo="i",Yo=st(Wo),No=pt(Wo),Ho="weight",Uo=st(Ho,on),Xo=pt(Ho),jo="size",Ko=st(jo,on),Jo=pt(jo),Zo="color",qo=st(Zo,ln),Qo=pt(Zo),dn="u",tl=st(dn),el=st(dn,ln),il=pt(dn),sl="shadow",rl=st(sl),nl=pt(sl),cn="stroke",al=st(cn),hl=st(cn,ln),ol=pt(cn),ll="y",ul=st(ll,on),dl=pt(ll),cl="img",fl=st(cl,un),pl=pt(cl),vl="area",gl=st(vl,un),ml=pt(vl),Cl="align",bl=st(Cl,un),yl=pt(Cl),Sl=new RegExp(Io,"i"),$r=new RegExp(Go,"i"),xl=new RegExp(Ao,"i"),Vr=new RegExp($o,"i"),Sf=new RegExp(zo,"i"),xf=new RegExp(Fo,"i"),Tf=new RegExp(Yo,"i"),kf=new RegExp(No,"i"),ca=new RegExp(Uo,"i"),Pf=new RegExp(Xo,"i"),fa=new RegExp(Ko,"i"),wf=new RegExp(Jo,"i"),pa=new RegExp(qo,"i"),Mf=new RegExp(Qo,"i"),Ef=new RegExp(tl,"i"),va=new RegExp(el,"i"),Of=new RegExp(il,"i"),_f=new RegExp(rl,"i"),Rf=new RegExp(nl,"i"),Lf=new RegExp(al,"i"),ga=new RegExp(hl,"i"),Bf=new RegExp(ol,"i"),ma=new RegExp(ul,"i"),If=new RegExp(dl,"i"),Ca=new RegExp(fl,"i"),Gf=new RegExp(pl,"i"),ba=new RegExp(gl,"i"),Df=new RegExp(ml,"i"),ya=new RegExp(bl,"i"),Af=new RegExp(yl,"i"),Sa=new RegExp([Ao,$o,Io,Go,zo,Fo,Yo,No,Uo,Xo,Ko,Jo,qo,Qo,tl,el,il,rl,nl,al,hl,ol,ul,dl,fl,pl,gl,ml,bl,yl].join("|"),"ig");var $f=function(e,t){for(var i=[],s=0,r=!1,n=!1;;){var a=Sa.exec(e);if(!a)break;var h=a[0];if(n)if($r.test(h))n=!1;else continue;else if(r)if(Vr.test(h))r=!1;else continue;else Sl.test(h)?n=!0:xl.test(h)&&(r=!0);var o=Sa.lastIndex,l=o-h.length;if(s<l){var u=e.substring(s,l);i.push(u)}t===void 0&&i.push(h),s=o}var d=e.length;return s<d&&i.push(e.substring(s,d)),i};const K=!1,J=!0;var Vf={plainText:null,prevProp:null},zf=function(e,t){t==null&&(t={});var i="";if(t.img&&_(t,K,"img"),t.esc)$r.test(e)?_(t,K,"esc"):i=e;else if(t.raw)Vr.test(e)?_(t,K,"raw"):i=e;else if(Sl.test(e))_(t,J,"esc",!0);else if($r.test(e))_(t,K,"esc");else if(xl.test(e))_(t,J,"raw",!0);else if(Vr.test(e))_(t,K,"raw");else if(Sf.test(e))_(t,J,"b",!0);else if(xf.test(e))_(t,K,"b");else if(Tf.test(e))_(t,J,"i",!0);else if(kf.test(e))_(t,K,"i");else if(ca.test(e)){var s=e.match(ca);_(t,J,"weight",s[1])}else if(Pf.test(e))_(t,K,"weight");else if(fa.test(e)){var s=e.match(fa);_(t,J,"size",`${s[1]}px`)}else if(wf.test(e))_(t,K,"size");else if(pa.test(e)){var s=e.match(pa);_(t,J,"color",s[1])}else if(Mf.test(e))_(t,K,"color");else if(Ef.test(e))_(t,J,"u",!0);else if(va.test(e)){var s=e.match(va);_(t,J,"u",s[1])}else if(Of.test(e))_(t,K,"u");else if(_f.test(e))_(t,J,"shadow",!0);else if(Rf.test(e))_(t,K,"shadow");else if(Lf.test(e))_(t,J,"stroke",!0);else if(ga.test(e)){var s=e.match(ga);_(t,J,"stroke",s[1])}else if(Bf.test(e))_(t,K,"stroke");else if(ma.test(e)){var s=e.match(ma);_(t,J,"y",parseFloat(s[1]))}else if(If.test(e))_(t,K,"y");else if(Ca.test(e)){var s=e.match(Ca);_(t,J,"img",s[1])}else if(Gf.test(e))_(t,K,"img");else if(ba.test(e)){var s=e.match(ba);_(t,J,"area",s[1])}else if(Df.test(e))_(t,K,"area");else if(ya.test(e)){var s=e.match(ya);_(t,J,"align",s[1])}else Af.test(e)?_(t,K,"align"):i=e;var r=Vf;return r.plainText=i,r.prop=t,r},_=function(e,t,i,s){return t===J?e[i]=s:e.hasOwnProperty(i)&&delete e[i],e},Ff=function(e,t){var i=Yf;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")?i.fontFamily=t.family:i.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var s=t.size;typeof s=="number"&&(s=`${s}px`),i.fontSize=s}else i.fontSize=e.fontSize;i.fontStyle=Wf(t),t.hasOwnProperty("color")?i.color=t.color:i.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(i.stroke=e.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=e.stroke,i.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(i.shadowColor=e.shadowColor,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=t.shadow,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(i.underlineColor=e.underlineColor,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor=t.u,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),i},Wf=function(e){var t=e.b,i=e.weight,s=e.i;return t||i||s?s?t?"bold italic":i?`${i} italic`:"italic":t?"bold":i.toString():""},Yf=new rn,Nf=function(e,t,i){i==null&&(i=Hf);var s=[];for(var r in i)t.hasOwnProperty(r)||s.push(`[/${r}]`);for(var r in t){var n=t[r];if(i[r]!==n)switch(r){case"size":s.push(`[size=${n.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"align":s.push(`[${r}=${n}]`);break;case"u":n===!0?s.push("[u]"):s.push(`[u=${n}]`);break;default:s.push(`[${r}]`);break}}return s.push(e),s.join("")},Hf={};class Uf{getStrokeThinkness(t,i){var s;return i.hasOwnProperty("stroke")?s=t.strokeThickness:s=0,s}}var Xf={splitText:$f,tagTextToProp:zf,propToContextStyle:Ff,propToTagText:Nf};Object.assign(Uf.prototype,Xf);new rn;Phaser.Utils.Objects.GetValue;var jf=function(e,t){if(this.scene.sys.scale.autoRound&&(e=Math.floor(e),t=Math.floor(t)),this.width===e&&this.height===t)return this;var i=this.node.style;return i.width=`${e}px`,i.height=`${t}px`,this.updateSize(),this};const Kf=Phaser.Utils.Objects.GetValue;var xa=function(e,t,i){i===void 0&&(i={});var s,r;for(var n in e)s=e[n],r=Kf(t,n,s[1]),r!==void 0&&(i[s[0]]=r);return i},Jf=function(e,t,i){for(let s in i)t.addEventListener(s,function(r){e.emit(i[s],e,r)})},Zf=function(e){e.addEventListener("touchstart",Be,!1),e.addEventListener("touchmove",Be,!1),e.addEventListener("touchend",Be,!1),e.addEventListener("mousedown",Be,!1),e.addEventListener("mouseup",Be,!1),e.addEventListener("mousemove",Be,!1)},Be=function(e){e.stopPropagation()};const qf=Phaser.GameObjects.DOMElement,Ta=Phaser.Utils.Objects.IsPlainObject,Jt=Phaser.Utils.Objects.GetValue;class Tl extends qf{constructor(t,i,s,r,n,a){Ta(i)?(a=i,i=Jt(a,"x",0),s=Jt(a,"y",0),r=Jt(a,"width",0),n=Jt(a,"height",0)):Ta(r)&&(a=r,r=Jt(a,"width",0),n=Jt(a,"height",0)),a===void 0&&(a={});var h,o=Jt(a,"type","text");o==="textarea"?(h=document.createElement("textarea"),h.style.resize="none"):(h=document.createElement("input"),h.type=o),xa(ka,a,h);var l=Jt(a,"style",void 0);l=xa(Pa,a,l);var u=h.style;for(var d in a)d in ka||d in Pa||d in u&&(l[d]=a[d]);l["box-sizing"]="border-box",super(t,i,s,h,l),this.type="rexInputText",this.resize(r,n),Jf(this,h,tp),Zf(h),Jt(a,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,i){return t===void 0?this.node.select():this.node.setSelectionRange(t,i),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0&&(t=0),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,i){return this.node.style[t]=i,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var Qf={resize:jf};Object.assign(Tl.prototype,Qf);const ka={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},Pa={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},tp={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",focus:"focus",blur:"blur",select:"select"};var kl=function(e,t,i,s){if(t)return!(i&&!i(e,t)||!wa(e,t)||s&&!s(e,t));for(var r=e.scene.input.manager,n=r.pointersTotal,a=r.pointers,t,h=0;h<n;h++)if(t=a[h],!(i&&!i(e,t))&&!!wa(e,t)&&!(s&&!s(e,t)))return!0;return!1},wa=function(e,t){for(var i=e.scene,s=i.input.cameras.getCamerasBelowPointer(t),r=i.input.manager,n=[e],a,h=0,o=s.length;h<o;h++)if(a=r.hitTest(t,n,s[h]),a.length>0)return!0;return!1},ep=function(e,t,i){e=e.replace(" ","");var s=i.previousText;if(e===s)return e;if(isNaN(e)){e=s;var r=i.cursorPosition-1;i.setText(e),i.setCursorPosition(r)}else i.previousText=e;return e};const Ie=Phaser.Utils.Objects.GetValue,ip=Phaser.Math.Wrap;class EE extends Tl{constructor(t,i){super(t.scene,i);var s=this.node.style;s.position="absolute",s.opacity=0,s.pointerEvents="none",s.zIndex=0,s.transform="scale(0)",this.setCursor(Ie(i,"cursor","|")),this.setCursorFlashDuration(Ie(i,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0,this.setEnterClose(Ie(i,"enterClose",!0)),this.onOpenCallback=Ie(i,"onOpen",void 0),this.onCloseCallback=Ie(i,"onClose",void 0);var r=Ie(i,"onUpdate",void 0);r==="number"&&(r=ep),this.onUpdateCallback=r,this.textObject=t,t.setInteractive().on("pointerdown",this.setFocus,this).on("destroy",this.destroy,this),this.on("focus",function(){this.cursorFlashTimer=0,this.enterClose&&this.scene.input.keyboard.once("keydown-ENTER",this.setBlur,this),this.setText(this.textObject.text),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.textObject,this)},this).on("blur",function(){this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.textObject,this)},this)}preDestroy(){this.textObject.off("pointerdown",this.setFocus,this),this.textObject.off("destroy",this.destroy,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),super.preDestroy()}onClickOutside(t){kl(this.textObject,t)||this.setBlur()}updateText(){var t=this.text;if(this.onUpdateCallback){var i=this.onUpdateCallback(t,this.textObject,this);i!=null&&(t=i)}if(this.isFocused&&this.hasCursor){var s=this.cursorPosition;t=t.substring(0,s)+this.cursor+t.substring(s)}return this.textObject.setText(t),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var i=this.cursorFlashTimer+this.scene.game.loop.delta;return this.cursorFlashTimer=ip(i,0,this.cursorFlashDuration),t}setEnterClose(t){return t===void 0&&(t=!0),this.enterClose=t,this}open(){return this.setFocus(),this}close(){return this.setBlur(),this}get isOpened(){return this._isFocused}}const sp=Phaser.GameObjects.Zone,rp=Phaser.Utils.Array.Add,np=Phaser.Utils.Array.Remove;class Pi extends sp{constructor(t,i,s,r,n){i===void 0&&(i=0),s===void 0&&(s=0),r===void 0&&(r=1),n===void 0&&(n=1),super(t,i,s,r,n),this.children=[]}destroy(t){if(!!this.scene){if(t)for(var i,s=this.children.length-1;s>=0;s--)i=this.children[s],!i.parentContainer&&!i.displayList&&i.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var i=this;return rp(this.children,t,0,function(s){s.once("destroy",i.onChildDestroy,i)},this),this}remove(t,i){var s=this;return np(this.children,t,function(r){r.off("destroy",s.onChildDestroy,s),i&&r.destroy()}),this}onChildDestroy(t,i){this.remove(t,!1)}clear(t){for(var i=this,s,r=0,n=this.children.length;r<n;r++)s=this.children[r],s.off("destroy",i.onChildDestroy,i),t&&s.destroy();return this.children.length=0,this}}const Ma=Phaser.GameObjects.Components;Phaser.Class.mixin(Pi,[Ma.Alpha,Ma.Flip]);var Qt=function(e,t){var i;if(t===void 0)e.hasOwnProperty("rexContainer")&&(i=e.rexContainer.parent);else for(i=Qt(e);i&&i.name!==t;)i=Qt(i);return i},ap=function(e){for(var t=Qt(e);t;)e=t,t=Qt(t);return e};const hp=Phaser.Math.DegToRad,op=Phaser.Math.RadToDeg;var L=function(e){if(!e.hasOwnProperty("rexContainer")){var t={parent:null,self:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return op(this.rotation)},set:function(i){this.rotation=hp(i)}}),Object.defineProperty(t,"displayWidth",{get:function(){return e.width*this.scaleX},set:function(i){this.scaleX=i/e.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return e.height*this.scaleY},set:function(i){this.scaleY=i/e.height}}),e.rexContainer=t}return e.rexContainer};const lp={setParent(e,t){t===void 0&&(t=this);var i=L(e);return t?(i.parent=t,i.self=e):(i.parent=null,i.self=null),this},getParent(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),Qt(e,t)},getTopmostParent(e){return e===void 0&&(e=this),ap(e)}},Fi=Phaser.Utils.Objects.GetValue,Pl=Pi.prototype.add;var Zs=function(e,t){this.setParent(e);var i=L(e);return wl(i,t),this.resetChildState(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),Pl.call(this,e),this},qs=function(e,t){this.setParent(e);var i=L(e);return wl(i,t),i.x=e.x,i.y=e.y,i.rotation=e.rotation,i.scaleX=e.scaleX,i.scaleY=e.scaleY,i.alpha=e.alpha,i.visible=e.visible,i.active=e.active,this.updateChildPosition(e).updateChildAlpha(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),Pl.call(this,e),this},wl=function(e,t){e.syncPosition=Fi(t,"syncPosition",!0),e.syncRotation=Fi(t,"syncRotation",!0),e.syncScale=Fi(t,"syncScale",!0),e.syncAlpha=Fi(t,"syncAlpha",!0)};const up={add(e){return Array.isArray(e)?this.addMultiple(e):Zs.call(this,e),this},pin(e,t){return Array.isArray(e)?this.addMultiple(e,t):Zs.call(this,e,t),this},addMultiple(e){for(var t=0,i=e.length;t<i;t++)Zs.call(this,e[t]);return this},addLocal(e){return Array.isArray(e)?this.addMultiple(e):qs.call(this,e),this},pinLocal(e,t){return Array.isArray(e)?this.addMultiple(e,t):qs.call(this,e,t),this},addLocalMultiple(e){for(var t=0,i=e.length;t<i;t++)qs.call(this,e[t]);return this}},dp=Pi.prototype.remove,cp=Pi.prototype.clear,fp={remove(e,t){return Qt(e)!==this?this:(this.setParent(e,null),dp.call(this,e,t),this)},clear(e){for(var t=0,i=this.children.length;t<i;t++)this.setParent(this.children[t],null);return cp.call(this,e),this}},pp={getLocalState(e){return L(e)},resetChildState(e){return this.resetChildPositionState(e).resetChildVisibleState(e).resetChildAlphaState(e).resetChildActiveState(e),this},resetChildrenState(e){for(var t=0,i=e.length;t<i;t++)this.resetChildState(e[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},Ea=Phaser.Math.RotateAround,vp={worldToLocal(e){return e.x-=this.x,e.y-=this.y,Ea(e,0,0,-this.rotation),e.x/=this.scaleX,e.y/=this.scaleY,e},localToWorld(e){return e.x*=this.scaleX,e.y*=this.scaleY,Ea(e,0,0,this.rotation),e.x+=this.x,e.y+=this.y,e}};var gi=function(e,t){return e===t?1:e/t};const gp={updateChildPosition(e){e.isRexContainerLite&&(e.syncChildrenEnable=!1);var t=L(e),i=t.parent;return t.syncPosition&&(e.x=t.x,e.y=t.y,i.localToWorld(e)),t.syncRotation&&(e.rotation=t.rotation+i.rotation),t.syncScale&&(e.scaleX=t.scaleX*i.scaleX,e.scaleY=t.scaleY*i.scaleY),e.isRexContainerLite&&(e.syncChildrenEnable=!0,e.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(e){var t=L(e),i=t.parent;return t.x=e.x,t.y=e.y,i.worldToLocal(t),t.scaleX=gi(e.scaleX,i.scaleX),t.scaleY=gi(e.scaleY,i.scaleY),t.rotation=e.rotation-i.rotation,this},setChildPosition(e,t,i){return e.x=t,e.y=i,this.resetChildPositionState(e),this},setChildLocalPosition(e,t,i){var s=L(e);return s.x=t,s.y=i,this.updateChildPosition(e),this},resetLocalPositionState(){var e=L(this).parent;return e&&e.resetChildPositionState(this),this}},mp=Phaser.Math.DegToRad,Cp={updateChildRotation(e){var t=L(e),i=t.parent;return t.syncRotation&&(e.rotation=i.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(e){var t=L(e),i=t.parent;return t.rotation=e.rotation-i.rotation,this},setChildRotation(e,t){return e.rotation=t,this.resetChildRotationState(e),this},setChildAngle(e,t){return e.angle=t,this.resetChildRotationState(e),this},setChildLocalRotation(e,t){var i=L(e);return i.rotation=t,this.updateChildRotation(e),this},setChildLocalAngle(e,t){var i=L(e);return i.rotation=mp(t),this.updateChildRotation(e),this},resetLocalRotationState(){var e=L(this).parent;return e&&e.resetChildRotationState(this),this}},bp={updateChildScale(e){var t=L(e),i=t.parent;return t.syncScale&&(e.scaleX=i.scaleX*t.scaleX,e.scaleY=i.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(e){var t=L(e),i=t.parent;return t.scaleX=gi(e.scaleX,i.scaleX),t.scaleY=gi(e.scaleY,i.scaleY),this},setChildScale(e,t,i){return i===void 0&&(i=t),e.scaleX=t,e.scaleY=i,this.resetChildScaleState(e),this},setChildLocalScale(e,t,i){i===void 0&&(i=t);var s=L(e);return s.scaleX=t,s.scaleY=i,this.updateChildScale(e),this},setChildDisplaySize(e,t,i){return e.setDisplaySize(t,i),this.resetChildScaleState(e),this},resetLocalScaleState(){var e=L(this).parent;return e&&e.resetChildScaleState(this),this}},yp={updateChildVisible(e){var t=L(e),i=t.parent,s=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return e.visible=i.visible&&t.visible&&s,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(e){var t=L(e);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=e.visible,this},setChildVisible(e,t){return this.setChildLocalVisible(e,t),this},setChildLocalVisible(e,t){t===void 0&&(t=!0);var i=L(e);return i.visible=t,this.updateChildVisible(e),this},setChildMaskVisible(e,t){t===void 0&&(t=!0);var i=L(e);return i.maskVisible=t,this.updateChildVisible(e),this},resetLocalVisibleState(){var e=L(this).parent;return e&&e.resetChildVisibleState(this),this}},Sp={updateChildAlpha(e){var t=L(e),i=t.parent;return t.syncAlpha&&(e.alpha=i.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(e){var t=L(e),i=t.parent;return t.alpha=gi(e.alpha,i.alpha),this},setChildAlpha(e,t){return e.alpha=t,this.resetChildAlphaState(e),this},setChildLocalAlpha(e,t){var i=L(e);return i.alpha=t,this.updateChildAlpha(e),this},resetLocalAlphaState(){var e=L(this).parent;return e&&e.resetChildAlphaState(this),this}},xp={updateChildActive(e){var t=L(e),i=t.parent;return e.active=i.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(e){var t=L(e);return t.active=e.active,this},setChildActive(e,t){return e.active=t,this.resetChildActiveState(e),this},setChildLocalActive(e,t){t===void 0&&(t=!0);var i=L(e);return i.active=t,this.updateChildActive(e),this},resetLocalActiveState(){var e=L(this).parent;return e&&e.resetChildActiveState(this),this}},Tp={updateChildScrollFactor(e){var t=L(e),i=t.parent;return e.setScrollFactor(i.scrollFactorX,i.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},kp={updateChildMask(e){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==e&&(e.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(e){return this.mask=e,this},clearMask(e){return e===void 0&&(e=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),e&&this.mask&&this.mask.destroy(),this}};var zr=function(e,t){if(e.length===0)return e;t===void 0&&(t=!1);var i=e[0].scene,s=i.sys.displayList;return s.depthSort(),t?e.sort(function(r,n){return s.getIndex(n)-s.getIndex(r)}):e.sort(function(r,n){return s.getIndex(r)-s.getIndex(n)}),e};const Pp={setDepth(e,t){if(this.depth=e,!t&&this.children)for(var i=this.getAllChildren(),s=0,r=i.length;s<r;s++)i[s].depth=e;return this},swapDepth(e){var t=this.depth,i=e.depth;return this.setDepth(i),e.setDepth(t),this},incDepth(e){if(this.depth+=e,this.children)for(var t=this.getAllChildren(),i=0,s=t.length;i<s;i++)t[i].depth+=e;return this},moveDepthBelow(e){var t=e.scene.children,i=this.getAllChildren([this]);zr(i);for(var s=0,r=i.length;s<r;s++){var n=i[s];if(t.exists(n)){t.moveBelow(e,n);break}}return this},moveDepthAbove(e){var t=e.scene.children,i=this.getAllChildren([this]);zr(i,!0);for(var s=0,r=i.length;s<r;s++){var n=i[s];if(t.exists(n)){t.moveAbove(e,n);break}}return this}};var Ml=function(e,t){var i=t(e);if(!i&&e.isRexContainerLite)for(var s=e.children,r=0,n=s.length;r<n;r++)Ml(s[r],t)},Qs=function(e,t){for(var i=[e];i.length>0;){var s=i.shift(),r=t(s);!r&&s.isRexContainerLite&&i.push(...s.children)}};const me=Phaser.Utils.Array,wp={getChildren(e){if(!e)e=this.children;else for(var t=0,i=this.children.length;t<i;t++)e.push(this.children[t]);return e},getAllChildren(e){e===void 0&&(e=[]);var t=this;return Qs(t,function(i){i!==t&&e.push(i)}),e},getAllVisibleChildren(e){e===void 0&&(e=[]);var t=this;return Qs(t,function(i){if(i!==t){if(!i.visible)return!0;e.push(i)}}),e},bfs(e,t){return t===void 0&&(t=this),Qs(t,e),this},dfs(e,t){return t===void 0&&(t=this),Ml(t,e),this},contains(e){var t=Qt(e);return t?t===this?!0:this.contains(t):!1},getByName(e,t){if(t){for(var i=[this],s,r;i.length;){s=i.shift();for(var n=0,a=s.children.length;n<a;n++){if(r=s.children[n],r.name===e)return r;r.isRexContainerLite&&i.push(r)}}return null}else return me.GetFirst(this.children,"name",e)},getRandom(e,t){return me.GetRandom(this.children,e,t)},getFirst(e,t,i,s){return me.GetFirstElement(this.children,e,t,i,s)},getAll(e,t,i,s){return me.GetAll(this.children,e,t,i,s)},count(e,t,i,s){return me.CountAllMatching(this.children,e,t,i,s)},swap(e,t){return me.Swap(this.children,e,t),this},setAll(e,t,i,s){return me.SetAll(this.children,e,t,i,s),this}};var tr=function(e){for(var t=[],i=0,s=e.length;i<s;i++){var r=e[i];!r.hasOwnProperty("rexContainer")||t.push(r.rexContainer)}return t},Mp=function(e){for(var t=0,i=e.length;t<i;t++){var s=e[t].scene;if(s)return s}return null},Oa=function(e,t,i){if(!i.parent){e.remove();return}var s=i.parent,r=i.self;switch(t){case"x":case"y":s.updateChildPosition(r);break;case"angle":case"rotation":s.updateChildRotation(r);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":s.updateChildScale(r);break;case"alpha":s.updateChildAlpha(r);break;default:s.updateChildPosition(r),s.updateChildRotation(r),s.updateChildScale(r),s.updateChildAlpha(r);break}};const Ep={tweenChild(e){var t=e.targets;Array.isArray(t)||(t=[t]);var i=this.scene||Mp(t);if(!!i){e.targets=tr(t);var s=i.tweens.add(e);return s.on("update",Oa),s}},createTweenChildConfig(e){var t=e.targets;t&&(Array.isArray(t)||(t=[t]),e.targets=tr(t));var i=e.onUpdate;return e.onUpdate=function(s,r){i&&i(s,r),Oa(s,void 0,r)},e},tween(e){var t=this.scene;return e.targets||(e.targets=this),t.tweens.add(e)},timelineChild(e){var t=e.targets;t&&(Array.isArray(t)||(t=[t]),e.targets=tr(t));for(var i=e.tweens,s=0,r=i.length;s<r;s++)i[s]=this.createTweenChildConfig(i[s]);var n=this.scene.tweens.timeline(e);return n}};var _a=function(e){var t=this.getAllChildren([this]);return zr(t),e.add(t),this};const Op={addToLayer:_a,addToContainer:_a},_p=Phaser.Math.RotateAround;var Rp=function(e,t,i){i===void 0&&(i=t);var s={x:(t-e.originX)*e.displayWidth,y:(i-e.originY)*e.displayHeight};return _p(s,0,0,e.rotation),e.originX=t,e.originY=i,e.x=e.x+s.x,e.y=e.y+s.y,e},Lp=function(e,t){this.syncChildrenEnable=!1,Rp(this,e,t),this.syncChildrenEnable=!0;for(var i=this.getAllChildren(),s=0,r=i.length;s<r;s++)this.resetChildPositionState(i[s]);return this},El={changeOrigin:Lp};Object.assign(El,lp,up,fp,pp,vp,gp,Cp,bp,yp,Sp,xp,Tp,kp,Pp,wp,Ep,Op);class ee extends Pi{constructor(t,i,s,r,n,a){super(t,i,s,r,n),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,a&&this.add(a)}destroy(t){!this.scene||(this.syncChildrenEnable=!1,super.destroy(t))}resize(t,i){return this.setSize(t,i),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return Qt(t)}}Object.assign(ee.prototype,El);Phaser.Utils.Objects.GetValue;class fn{constructor(t,i){this.setParent(t),this.type=i,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}}Object.assign(fn.prototype,ms);const Bp=Phaser.Math.DegToRad,Ip=Phaser.Math.RadToDeg,Wi=Phaser.Utils.Objects.GetValue;class ys extends fn{constructor(t,i){super(t,i),this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return Ip(this._rotation)}set angle(t){this.rotation=Bp(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=Wi(t,"width",void 0),s=Wi(t,"height",void 0),r=Wi(t,"scaleX",void 0),n=Wi(t,"scaleY",void 0);return i!==void 0?s===void 0&&n===void 0?this.setWidth(i,!0):this.setWidth(i):r!==void 0&&this.setScaleX(r),s!==void 0?i===void 0&&r===void 0?this.setHeight(s,!0):this.setHeight(s):n!==void 0&&this.setScaleY(n),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}drawContent(){}draw(){var t=this.context;t.save();var i=this.x+this.leftSpace+this.offsetX-this.originX*this.width,s=this.y+this.offsetY;this.autoRound&&(i=Math.round(i),s=Math.round(s)),t.translate(i,s),t.globalAlpha=this.alpha,t.scale(this.scaleX,this.scaleY),t.rotate(this.rotation),this.drawBelowCallback&&this.drawBelowCallback(this),this.drawContent(),this.drawAboveCallback&&this.drawAboveCallback(this),t.restore()}}const Ce=Phaser.Utils.Objects.GetValue;class Gp extends ys{constructor(t,i){super(t,"background"),this.setColor(Ce(i,"color",null),Ce(i,"color2",null),Ce(i,"horizontalGradient",!0)),this.setStroke(Ce(i,"stroke",null),Ce(i,"strokeThickness",2)),this.setCornerRadius(Ce(i,"cornerRadius",0),Ce(i,"cornerIteration",null))}set color(t){t=E(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=E(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,s){return s===void 0&&(s=!0),this.color=t,this.color2=i,this.horizontalGradient=s,this}set stroke(t){t=E(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return this.stroke=t,this.strokeThickness=i,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}setCornerRadius(t,i){return this.cornerRadius=t,this.cornerIteration=i,this}drawContent(){sn(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const si=Phaser.Utils.Objects.GetValue;class Dp extends ys{constructor(t,i){super(t,"background"),this.setColor(si(i,"color",null),si(i,"color2",null),si(i,"horizontalGradient",!0)),this.setStroke(si(i,"stroke",null),si(i,"strokeThickness",2))}set color(t){t=E(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=E(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,s){return s===void 0&&(s=!0),this.color=t,this.color2=i,this.horizontalGradient=s,this}set stroke(t){t=E(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return this.stroke=t,this.strokeThickness=i,this}drawContent(){var t=this.parent.padding,i=t.left,s=t.top,r=this.parent.width-t.left-t.right,n=this.parent.height-t.top-t.bottom,a=this.context;if(this.color!=null){var h;if(this.color2!=null){var o;this.horizontalGradient?o=a.createLinearGradient(0,0,r,0):o=a.createLinearGradient(0,0,0,n),o.addColorStop(0,this.color),o.addColorStop(1,this.color2),h=o}else h=this.color;a.fillStyle=h,a.fillRect(i,s,r,n)}this.stroke!=null&&this.strokeThickness>0&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeThickness,a.strokeRect(i,s,r,n))}}var Yi=function(e,t,i){return t.hasOwnProperty(e)?t[e]:i[e]};const lt=Phaser.Utils.Objects.GetValue;class Ss{constructor(t){this.set(t)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,align:this.align}}set(t){return this.setBold(lt(t,"bold",!1)),this.setItalic(lt(t,"italic",!1)),this.setFontSize(lt(t,"fontSize","16px")),this.setFontFamily(lt(t,"fontFamily","Courier")),this.setColor(lt(t,"color","#fff")),this.setStrokeStyle(lt(t,"stroke",null),lt(t,"strokeThickness",0)),this.setShadow(lt(t,"shadowColor",null),lt(t,"shadowOffsetX",0),lt(t,"shadowOffsetY",0),lt(t,"shadowBlur",0)),this.setOffset(lt(t,"offsetX",0),lt(t,"offsetY",0)),this.setAlign(lt(t,"align",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Yi("stroke",t,this),Yi("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Yi("shadowOffsetX",t,this),Yi("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("align")&&this.setAlign(t.align),this}clone(){return new Ss(this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this}setFontFamily(t){return this.fontFamily=t,this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=E(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,i){return this.stroke=E(t),i!==void 0&&(this.strokeThickness=i),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=E(t),this}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=0),this.shadowOffsetX=t,this.shadowOffsetY=i,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,i,s,r){return this.setShadowColor(t).setShadowOffset(i,s).setShadowBlur(r),this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,i){return this.setOffsetX(t).setOffsetY(i),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var i=this.hasFill,s=this.hasStroke;return t.fillStyle=i?this.color:"#000",t.strokeStyle=s?this.stroke:"#000",t.lineWidth=s?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,i){return this.syncFont(t).syncStyle(t),t.measureText(i)}}var Ap=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),e>0&&t>0?(this.fixedWidth!==e||this.fixedHeight!==t)&&(this.dirty=!0):this.dirty=!0,this.fixedWidth=e,this.fixedHeight=t,this};const Ni=Phaser.Utils.Objects.GetValue;var hs=function(e,t){return t===void 0?e:e[t]},os=function(e,t,i){var s=typeof t;s==="string"?e[t]=i:s==="number"?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=Ni(t,"left",0),e.right=Ni(t,"right",0),e.top=Ni(t,"top",0),e.bottom=Ni(t,"bottom",0))},$p=function(e,t){var i=this.padding,s=i.left,r=i.right,n=i.top,a=i.bottom;return os(i,e,t),this.dirty=this.dirty||s!=i.left||r!=i.right||n!=i.top||a!=i.bottom,this},Vp=function(e){return hs(this.padding,e)},zp=function(e){return this.textStyle.modify(e),this},Fp=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},Wp=function(e){return this.poolManager.free(e),RemoveItem(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},Yp=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},Np=function(){return this.setText(),this},Hp=function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.push(...e),this.lastAppendedChildren.push(...e)):(this.children.push(e),this.lastAppendedChildren.push(e)),this};const wi="text",pn="image",vn="command";var xs=function(e){var t=e.type;return t===wi||t===pn},Ol=function(e){return e.type===wi&&e.text===`
`},Up=function(e){return e.type===vn};class Xp extends ys{constructor(t,i,s){super(t,wi),this.style=new Ss(s),this.setText(i)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){if(this.text===`
`||this.text==="")this.textWidth=0,this.textHeight=0;else{var t=this.style.getTextMetrics(this.context,this.text);this.textWidth=t.width;var i,s;t.hasOwnProperty("actualBoundingBoxAscent")?(i=t.actualBoundingBoxAscent,s=t.actualBoundingBoxDescent):(i=0,s=0),this.textHeight=i+s}return this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}drawContent(){var t=this.style,i=t.hasFill,s=t.hasStroke;if(!(!i&&!s)){var r=this.context;t.syncFont(r).syncStyle(r),s&&(t.syncShadow(r),r.strokeText(this.text,0,0)),i&&(t.syncShadow(r),r.fillText(this.text,0,0))}}draw(){if(!this.visible||this.text===""||this.text===`
`)return this;super.draw()}}var Ts=function(e,t){t&&this.textStyle.modify(t);for(var i=[],s=0,r=e.length;s<r;s++){var n=e.charAt(s),a=this.poolManager.allocate(wi);a===null?a=new Xp(this,n,this.textStyle):a.setParent(this).setActive().modifyStyle(this.textStyle).setText(n),i.push(a)}return this.addChild(i),this},jp=function(e,t){return e===void 0&&(e=""),this.removeChildren(),Ts.call(this,e,t),this.dirty=!0,this};class Kp extends ys{constructor(t,i,s){super(t,pn),this.setTexture(i,s)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,i){return this.key=t,this.frame=i,this.frameObj=this.scene.sys.textures.getFrame(t,i),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}drawContent(){var t=this.context,i=this.frameObj,s=this.frameWidth,r=this.frameHeight;t.drawImage(i.source.image,i.cutX,i.cutY,s,r,0,0,s,r)}draw(){if(!this.visible)return this;super.draw()}}var _l=function(e,t,i){var s=this.poolManager.allocate(pn);return s===null?s=new Kp(this,e,t):s.setParent(this).setActive().setTexture(e,t),s.modifyPorperties(i),this.addChild(s),this};class Jp extends fn{constructor(t,i,s,r,n){super(t,vn),this.setName(i).setParameter(r).setCallback(s,n)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,i){return this.callback=t,this.scope=i,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}draw(){}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var O=function(e,t,i,s){var r=this.poolManager.allocate(vn);return r===null?r=new Jp(this,e,t,i,s):r.setParent(this).setActive().setName(e).setCallback(t,s).setParameter(i),this.addChild(r),this},Zp=function(e){return e===void 0&&(e={}),this.wrapConfig=e,this},qp=function(e,t,i,s){s===void 0&&(s={word:[],width:0}),s.word.length=0;for(var r=e.length,n=t,a=s.word,h=0;n<r;){var o=e[n];if(o.type===wi&&o.text!==" "&&o.text!==`
`)a.push(o),h+=o.outerWidth,n++;else{n===t&&(a.push(o),h+=o.outerWidth);break}if(i)break}return s.width=h,s},Rl=function(e,t,i){if(!(t===0&&i===0))for(var s=0,r=e.length;s<r;s++){var n=e[s];!xs(n)||(n.x+=t,n.y+=i)}},Qp=function(e){for(var t=0,i=e.length;t<i;t++){var s=e[t];if(s.align!==void 0)return s.align}},tv=function(e,t,i){var s=e.hAlign,r=e.vAlign,n,a,h=e.linesHeight;switch(r){case 1:case"center":a=(i-h)/2;break;case 2:case"bottom":a=i-h;break;default:a=0;break}for(var o=e.lines,l=0,u=o.length;l<u;l++){var d=o[l],c=d.width,f=d.children,p=Qp(f);switch(p===void 0&&(p=s),p){case 1:case"center":n=(t-c)/2;break;case 2:case"right":n=t-c;break;default:n=0;break}Rl(f,n,a)}};const yt=Phaser.Utils.Objects.GetValue;var ev=function(e){var t=yt(e,"start",0),i=yt(e,"padding.top",0),s=yt(e,"padding.bottom",0),r=yt(e,"lineHeight",void 0),n;if(r===void 0)if(n=yt(e,"maxLines",0),this.fixedHeight>0){var Kt=this.fixedHeight-this.padding.top-this.padding.bottom-i-s;r=Kt/n}else r=0;else if(this.fixedHeight>0){if(n=yt(e,"maxLines",void 0),n===void 0){var Kt=this.fixedHeight-this.padding.top-this.padding.bottom-i-s;n=Math.floor(Kt/r)}}else n=yt(e,"maxLines",0);var a=n===0,h=yt(e,"wrapWidth",void 0);h===void 0&&(this.fixedWidth>0?h=this.fixedWidth-this.padding.left-this.padding.right:h=1/0);for(var o=yt(e,"letterSpacing",0),l=yt(e,"hAlign",0),u=yt(e,"vAlign",0),d=yt(e,"charWrap",!1),c={start:t,isLastPage:!1,padding:{top:i,bottom:s},lineHeight:r,maxLines:n,wrapWidth:h,letterSpacing:o,hAlign:l,vAlign:u,charWrap:d,children:[],lines:[],maxLineWidth:0,linesHeight:0},f=this.children,p=0,v=f.length;p<v;p++)f[p].setActive(!1);h+=o;for(var g=this.padding.left,m=this.padding.top+r+i,b=g,S=m,x=h,C=t,y=f.length,T=c.children,P=c.lines,w=[],M=0,R=0,G;C<y;){var D=f[C];if(!xs(D)){C++,D.setActive(),T.push(D),w.push(D);continue}G=qp(f,C,d,G);var Y=G.word,N=Y.length,A=G.width+N*o;C+=N;var Et=Ol(Y[0]);if(x<A||Et){if(Et){var ht=Y[0];ht.setActive().setPosition(b,S),T.push(ht),w.push(ht)}if(b=g,S+=r,x=h,P.push({children:w,width:M}),R=Math.max(R,M),M=0,w=[],!a&&P.length===n)break;if(Et)continue}x-=A,M+=A;for(var p=0,v=Y.length;p<v;p++){var ht=Y[p];ht.setActive().setPosition(b,S),T.push(ht),w.push(ht),b+=ht.outerWidth+o}}w.length>0&&(P.push({children:w,width:M}),R=Math.max(R,M)),c.start+=T.length,c.isLastPage=c.start===y,c.maxLineWidth=R,c.linesHeight=P.length*r+i+s;var Je=this.fixedWidth>0?this.fixedWidth:c.maxLineWidth+this.padding.left+this.padding.right,Ze=this.fixedHeight>0?this.fixedHeight:c.linesHeight+this.padding.top+this.padding.bottom,pe=Je-this.padding.left-this.padding.right,Kt=Ze-this.padding.top-this.padding.bottom-i-s;return tv(c,pe,Kt),this.setSize(Je,Ze),c};const iv=Phaser.Utils.Objects.Merge;var sv=function(e){return e===void 0&&(e={}),ev.call(this,iv(e,this.wrapConfig))},rv=function(e,t,i){var s=e.hAlign,r=e.vAlign,n,a,h=e.rtl,o=e.lines,l=e.lineWidth,u=e.linesWidth;switch(s){case 1:case"center":n=(t-u)/2;break;case 2:case"right":n=t-u;break;default:n=0;break}h&&(n+=l);for(var d=0,c=o.length;d<c;d++){var f=o[h?c-d-1:d],p=f.children,v=f.height,g=GetChildrenAlign(p);switch(g===void 0&&(g=r),g){case 1:case"center":a=(i-v)/2;break;case 2:case"bottom":a=i-v;break;default:a=0;break}Rl(p,n,a),n+=l}};const q=Phaser.Utils.Objects.GetValue;var nv=function(e){var t=q(e,"start",0),i=q(e,"padding.top",0),s=q(e,"padding.bottom",0),r=q(e,"padding.left",0),n=q(e,"padding.right",0),a=q(e,"lineWidth",void 0),h;if(a===void 0)if(h=q(e,"maxLines",0),this.fixedWidth>0){var pe=this.fixedWidth-this.padding.left-this.padding.right-r-n;a=pe/h}else a=0;else if(this.fixedWidth>0){if(h=q(e,"maxLines",void 0),h===void 0){var pe=this.fixedWidth-this.padding.left-this.padding.right;h=Math.floor(pe/a)}}else h=q(e,"maxLines",0);var o=h===0,l=q(e,"fixedChildHeight",void 0);if(l===void 0){var u=q(e,"charPerLine",void 0);if(u!==void 0){var Kt=this.fixedHeight-this.padding.top-this.padding.bottom-i-s;l=Math.floor(Kt/u)}}var d=q(e,"wrapHeight",void 0);d===void 0&&(this.fixedHeight>0?d=this.fixedHeight-this.padding.top-this.padding.bottom:d=1/0);for(var c=q(e,"letterSpacing",0),f=q(e,"rtl",!0),p=q(e,"hAlign",f?2:0),v=q(e,"vAlign",0),g={start:t,isLastPage:!1,padding:{top:i,bottom:s,left:r,right:n},lineWidth:a,maxLines:h,fixedChildHeight:l,wrapHeight:d,letterSpacing:c,hAlign:p,vAlign:v,rtl:f,children:[],lines:[],maxLineHeight:0,linesWidth:0},m=this.children,b=0,S=m.length;b<S;b++)m[b].setActive(!1);d+=c;for(var x=this.padding.left+r,C=this.padding.top+i,y=x,T=C,P=d,w=t,M=m.length,R=g.children,G=g.lines,D=[],Y=0,N=0;w<M;){var A=m[w];if(w++,!xs(A)){A.setActive(),R.push(A),D.push(A);continue}var Et=(l!==void 0?l:A.height)+c,ht=Ol(A);if(P<Et||ht){if(ht&&(A.setActive().setPosition(y,T).setOrigin(.5),R.push(A),D.push(A)),y=x,T=C,P=d,G.push({children:D,height:Y}),N=Math.max(N,Y),Y=0,D=[],!o&&G.length===h)break;if(ht)continue}P-=Et,Y+=Et,A.setActive().setPosition(y,T).setOrigin(.5),R.push(A),D.push(A),T+=Et}D.length>0&&(G.push({children:D,height:Y}),N=Math.max(N,Y)),g.start+=R.length,g.isLastPage=g.start===M,g.maxLineHeight=N,g.linesWidth=G.length*a+r+n;var Je=this.fixedWidth>0?this.fixedWidth:g.linesWidth+this.padding.left+this.padding.right,Ze=this.fixedHeight>0?this.fixedHeight:g.maxLineHeight+this.padding.top+this.padding.bottom,pe=Je-this.padding.left-this.padding.right-r-n,Kt=Ze-this.padding.top-this.padding.bottom-i-s;return rv(g,pe,Kt),this.setSize(Je,Ze),g};const av=Phaser.Utils.Objects.Merge;var hv=function(e){return e===void 0&&(e={}),nv.call(this,av(e,this.wrapConfig))},ov=function(){this.clear();var e=this.fixedWidth>0?this.fixedWidth:this.width,t=this.fixedHeight>0?this.fixedHeight:this.height;this.setSize(e,t),this.background.active&&this.background.draw();for(var i,s=0,r=this.children.length;s<r;s++)i=this.children[s],i.active&&i.visible&&i.draw();this.innerBounds.active&&this.innerBounds.draw()},lv=function(){return this.children},uv=function(){return this.lastAppendedChildren};const dv=Phaser.Utils.Array.GetAll;var cv=function(){return dv(this.children,"active",!0)};const fv={setFixedSize:Ap,setPadding:$p,getPadding:Vp,modifyTextStyle:zp,resetTextStyle:Fp,removeChild:Wp,removeChildren:Yp,clearContent:Np,addChild:Hp,setText:jp,appendText:Ts,appendImage:_l,appendCommand:O,setWrapConfig:Zp,runWordWrap:sv,runVerticalWrap:hv,drawContent:ov,getChildren:lv,getLastAppendedChildren:uv,getActiveChildren:cv},pv=Phaser.Utils.Objects.GetFastValue;var vv={};class gv{constructor(t){this.pools=pv(t,"pools",vv)}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new te),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,s=t.length;i<s;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const Ra=Phaser.Utils.Objects.IsPlainObject,St=Phaser.Utils.Objects.GetValue;class Ll extends yi{constructor(t,i,s,r,n,a){Ra(i)?(a=i,i=St(a,"x",0),s=St(a,"y",0),r=St(a,"width",0),n=St(a,"height",0)):Ra(r)&&(a=r,r=St(a,"width",0),n=St(a,"height",0));var h=r===0?1:r,o=n===0?1:n;super(t,i,s,h,o),this.type="rexDynamicText",this.autoRound=!0,this.padding={};var l=St(a,"style",void 0);this.defaultTextStyle=new Ss(l),this.textStyle=this.defaultTextStyle.clone(),this.background=new Gp(this,St(a,"background",void 0)),this.innerBounds=new Dp(this,St(a,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.poolManager=new gv(a),this.setFixedSize(r,n),this.setPadding(St(a,"padding",0)),this.setWrapConfig(St(a,"wrap",void 0));var u=St(a,"text",void 0);u&&this.setText(u)}updateTexture(){return this.drawContent(),super.updateTexture(),this}}Object.assign(Ll.prototype,fv);var La=function(e){return e.replace(mv,"\\$&").replace(Cv,"\\x2d")},mv=/[|\\{}()[\]^$+*?.]/g,Cv=/-/g,bv=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,Bl=function(e){return typeof e!="string"||(e===""?e=null:bv.test(e)?e=parseFloat(e):e==="false"?e=!1:e==="true"&&(e=!0)),e},yv=function(e,t){if(e==null)return[];for(var i=e.split(","),s=0,r=i.length;s<r;s++)i[s]=t(i[s]);return i};const Sv="[a-z0-9-_.]+",xv="[ #a-z-_.0-9,|&]+",Tv=function(e){return e};class Il{constructor(t){this.setEventEmitter(bt(t,"eventEmitter",void 0)),this.setTagExpression(bt(t,"regex.tag",Sv)),this.setValueExpression(bt(t,"regex.value",xv)),this.setValueConverter(bt(t,"valueConvert",!0));var i=bt(t,"delimiters","<>");this.setDelimiters(i[0],i[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setTagExpression(t){return this.tagExpression=t,this}setValueExpression(t){return this.valueExpression=t,this}setValueConverter(t){return t===!0?t=Bl:t||(t=Tv),this.valueConverter=t,this}setDelimiters(t,i){i===void 0&&(i=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=i,t=La(t),i=La(i);var s=`${t}(${this.tagExpression})(=(${this.valueExpression}))?${i}`,r=`${t}/(${this.tagExpression})${i}`;return this.reTagOn=RegExp(s,"i"),this.reTagOff=RegExp(r,"i"),this.reSplit=RegExp(`${s}|${r}`,"gi"),this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){this.isPaused&&this.onResume();var t=this.source,i=t.length;for(this.reSplit.lastIndex===0&&this.onStart();!this.isPaused;){var s=this.reSplit.exec(t);if(!s){this.progressIndex<i&&this.onContent(t.substring(this.progressIndex,i)),this.onComplete();return}var r=s[0],n=this.reSplit.lastIndex-r.length;this.progressIndex<n&&this.onContent(t.substring(this.progressIndex,n)),this.reTagOff.test(r)?this.onTagEnd(r):this.onTagStart(r),this.progressIndex=this.reSplit.lastIndex}}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}onContent(t){this.emit("content",t),this.lastContent=t}onTagStart(t){var i=t.match(this.reTagOn),s=i[1],r=yv(i[3],this.valueConverter);this.skipEventFlag=!1,this.emit(`+${s}`,...r),this.skipEventFlag||this.emit("+",s,...r),this.lastTagStart=s}onTagEnd(t){var i=t.match(this.reTagOff)[1];this.skipEventFlag=!1,this.emit(`-${i}`),this.skipEventFlag||this.emit("-",i),this.lastTagEnd=i}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.emit("complete",this),this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}Object.assign(Il.prototype,Xe);const kv=Phaser.Utils.Objects.GetValue;var Pv=function(e,t,i){var s=kv(i,"tags.color","color"),r;t.on("start",function(){r=e.textStyle.color}).on(`+${s}`,function(n){e.textStyle.setColor(n),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setColor(r),t.skipEvent()}).on("complete",function(){e.textStyle.setColor(r)})};const wv=Phaser.Utils.Objects.GetValue;var Mv=function(e,t,i){var s=wv(i,"tags.stroke","stroke"),r;t.on("start",function(){r=e.textStyle.stroke,e.textStyle.setStrokeStyle(null)}).on(`+${s}`,function(n){n===void 0&&(n=r),e.textStyle.setStrokeStyle(n),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){e.textStyle.setStrokeStyle(r)})};const Ev=Phaser.Utils.Objects.GetValue;var Ov=function(e,t,i){var s=Ev(i,"tags.b","b");t.on("start",function(){e.textStyle.setBold(!1)}).on(`+${s}`,function(){e.textStyle.setBold(!0),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setBold(!1),t.skipEvent()})};const _v=Phaser.Utils.Objects.GetValue;var Rv=function(e,t,i){var s=_v(i,"tags.i","i");t.on("start",function(){e.textStyle.setItalic(!1)}).on(`+${s}`,function(){e.textStyle.setItalic(!0),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setItalic(!1),t.skipEvent()})};const Lv=Phaser.Utils.Objects.GetValue;var Bv=function(e,t,i){var s=Lv(i,"tags.size","size"),r;t.on("start",function(){r=e.textStyle.fontSize}).on(`+${s}`,function(n){e.textStyle.setFontSize(n),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setFontSize(r),t.skipEvent()}).on("complete",function(){e.textStyle.setFontSize(r)})};const Iv=Phaser.Utils.Objects.GetValue;var Gv=function(e,t,i){var s=Iv(i,"tags.y","y"),r;t.on("start",function(){r=e.textStyle.offsetY,e.textStyle.setOffsetY(0)}).on(`+${s}`,function(n){n===void 0&&(n=r),e.textStyle.setOffsetY(n),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetY(0)})};const Dv=Phaser.Utils.Objects.GetValue;var Av=function(e,t,i){var s=Dv(i,"tags.shadow","shadow"),r;t.on("start",function(){r=e.textStyle.shadowColor,e.textStyle.setShadowColor(null)}).on(`+${s}`,function(n){n===void 0&&(n=r),e.textStyle.setShadowColor(n),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){e.textStyle.setShadowColor(r)})};const $v=Phaser.Utils.Objects.GetValue;var Vv=function(e,t,i){var s=$v(i,"tags.align","align");t.on(`+${s}`,function(r){e.textStyle.setAlign(r),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){e.textStyle.setAlign()})};const zv=Phaser.Utils.Objects.GetValue;var Fv=function(e,t,i){var s=zv(i,"tags.img","img");t.on(`+${s}`,function(r){var n=e.imageManager.get(r);_l.call(e,n.key,n.frame,{width:n.width,hieght:n.height,leftSpace:n.left,rightSpace:n.right}),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})};const Wv=Phaser.Utils.Objects.GetValue;var Yv=function(e,t,i){var s=Wv(i,"tags.speed","speed");t.on(`+${s}`,function(r){Ba(e,r),t.skipEvent()}).on(`-${s}`,function(){Ba(e,void 0),t.skipEvent()})},Nv=function(e){this.typeWriter.setTypingSpeed(e)},Ba=function(e,t){O.call(e,"speed",Nv,t,e)};const Hv=Phaser.Utils.Objects.GetValue;var Uv=function(e,t,i){var s=Hv(i,"tags.se","se");t.on(`+${s}`,function(r,n){O.call(e,"se",Xv,[r,n],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},Xv=function(e){if(!this.skipSoundEffect){var t=e[0],i=e[1];this.soundManager.playSoundEffect(t),i&&this.soundManager.fadeInSoundEffect(i)}};const jv=Phaser.Utils.Objects.GetValue;var Kv=function(e,t,i){var s=jv(i,"tags.se.fadein","se.fadein");t.on(`+${s}`,function(r){O.call(e,"se.fadein",Jv,r,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},Jv=function(e){this.soundManager.fadeInSoundEffect(e)};const Zv=Phaser.Utils.Objects.GetValue;var qv=function(e,t,i){var s=Zv(i,"tags.se.fadeout","se.fadeout");t.on(`+${s}`,function(r,n){n=n==="stop",O.call(e,"se.fadeout",Qv,[r,n],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},Qv=function(e){this.soundManager.fadeOutSoundEffect(...e)};const tg=Phaser.Utils.Objects.GetValue;var eg=function(e,t,i){var s=tg(i,"tags.se.volume","se.volume");t.on(`+${s}`,function(r){O.call(e,"se.volume",ig,r,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},ig=function(e){this.soundManager.setSoundEffectVolume(e)};const sg=Phaser.Utils.Objects.GetValue;var rg=function(e,t,i){var s=sg(i,"tags.bgm","bgm");t.on(`+${s}`,function(r,n){O.call(e,"bgm",ng,[r,n],e),t.skipEvent()}).on(`-${s}`,function(){O.call(e,"bgm.stop",ag,void 0,e),t.skipEvent()})},ng=function(e){var t=e[0],i=e[1];this.soundManager.playBackgroundMusic(t),i&&this.soundManager.fadeInBackgroundMusic(i)},ag=function(){this.soundManager.stopBackgroundMusic()};const hg=Phaser.Utils.Objects.GetValue;var og=function(e,t,i){var s=hg(i,"tags.bgm.fadein","bgm.fadein");t.on(`+${s}`,function(r){O.call(e,"bgm.fadein",lg,r,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},lg=function(e){this.soundManager.fadeInBackgroundMusic(e)};const ug=Phaser.Utils.Objects.GetValue;var dg=function(e,t,i){var s=ug(i,"tags.bgm.fadeout","bgm.fadeout");t.on(`+${s}`,function(r,n){O.call(e,"bgm.fadeout",cg,[r,n],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},cg=function(e){this.soundManager.fadeOutBackgroundMusic(...e)};const fg=Phaser.Utils.Objects.GetValue;var pg=function(e,t,i){var s=fg(i,"tags.bgm.cross","bgm.cross");t.on(`+${s}`,function(r,n){O.call(e,"bgm.cross",vg,[r,n],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},vg=function(e){this.soundManager.crossFadeBackgroundMusic(...e)};const gg=Phaser.Utils.Objects.GetValue;var mg=function(e,t,i){var s=gg(i,"tags.bgm.pause","bgm.pause");t.on(`+${s}`,function(){O.call(e,"bgm.pause",Cg,void 0,e),t.skipEvent()}).on(`-${s}`,function(){O.call(e,"bgm.resume",bg,void 0,e),t.skipEvent()})},Cg=function(){this.soundManager.pauseBackgroundMusic()},bg=function(){this.soundManager.resumeBackgroundMusic()};const yg=Phaser.Utils.Objects.GetValue;var Sg=function(e,t,i){var s=yg(i,"tags.camera.fadein","camera.fadein");t.on(`+${s}`,function(r,n,a,h){O.call(e,"camera.fadein",xg,[r,n,a,h],e),t.skipEvent()})},xg=function(e){this.camera.fadeIn(...e)};const Tg=Phaser.Utils.Objects.GetValue;var kg=function(e,t,i){var s=Tg(i,"tags.camera.fadeout","camera.fadeout");t.on(`+${s}`,function(r,n,a,h){O.call(e,"camera.fadeout",Pg,[r,n,a,h],e),t.skipEvent()})},Pg=function(e){this.camera.fadeOut(...e)};const wg=Phaser.Utils.Objects.GetValue;var Mg=function(e,t,i){var s=wg(i,"tags.camera.shake","camera.shake");t.on(`+${s}`,function(r,n){O.call(e,"camera.shake",Eg,[r,n],e),t.skipEvent()})},Eg=function(e){this.camera.shake(...e)};const Og=Phaser.Utils.Objects.GetValue;var _g=function(e,t,i){var s=Og(i,"tags.camera.flash","camera.flash");t.on(`+${s}`,function(r,n,a,h){O.call(e,"camera.flash",Rg,[r,n,a,h],e),t.skipEvent()})},Rg=function(e){this.camera.flash(...e)};const Lg=Phaser.Utils.Objects.GetValue;var Bg=function(e,t,i){var s=Lg(i,"tags.camera.zoom","camera.zoom");t.on(`+${s}`,function(r){O.call(e,"camera.zoom",Ig,r,e),t.skipEvent()}).on(`+${s}.to`,function(r,n,a){O.call(e,"camera.zoom.to",Gg,[r,n,a],e),t.skipEvent()})},Ig=function(e){this.camera.setZoom(e)},Gg=function(e){this.camera.zoomTo(...e)};const Dg=Phaser.Utils.Objects.GetValue,Ia=Phaser.Math.DegToRad;var Ag=function(e,t,i){var s=Dg(i,"tags.camera.rotate","camera.rotate");t.on(`+${s}`,function(r){r=Ia(r),O.call(e,"camera.rotate",$g,r,e),t.skipEvent()}).on(`+${s}.to`,function(r,n,a){r=Ia(r),O.call(e,"camera.rotate.to",Vg,[r,n,a],e),t.skipEvent()})},$g=function(e){this.camera.setRotation(e)},Vg=function(e){var t=e[0],i=e[1],s=e[2];this.camera.rotateTo(t,!1,i,s)};const zg=Phaser.Utils.Objects.GetValue;var Fg=function(e,t,i){var s=zg(i,"tags.camera.scroll","camera.scroll");t.on(`+${s}`,function(r,n){O.call(e,"camera.scroll",Wg,[r,n],e),t.skipEvent()}).on(`+${s}.to`,function(r,n,a,h){O.call(e,"camera.scroll.to",Yg,[r,n,a,h],e),t.skipEvent()})},Wg=function(e){this.camera.setScroll(...e)},Yg=function(e){var t=e[0],i=e[1],s=e[2],r=e[3],n=this.camera,a=n.scrollX,h=n.scrollY;n.setScroll(t,i),t+=n.centerX,i+=n.centerY,n.setScroll(a,h),n.pan(t,i,s,r)};const Ga=Phaser.Utils.Objects.GetValue;var Ng=function(e,t,i){var s=Ga(i,"tags.wait","wait"),r=Ga(i,"tags.click","click");t.on(`+${s}`,function(n){Da(e,n),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}).on(`+${r}`,function(){Da(e,"click"),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},Hg=function(e){this.typeWriter.wait(e)},Da=function(e,t){O.call(e,"wait",Hg,t,e)};const Ug=Phaser.Utils.Objects.GetValue;var Aa=function(e,t){return e.length===2&&e[0]===t},Xg=function(e,t,i){var s=Ug(i,"sprite","sprite");!s||t.on("+",function(r,...n){if(!t.skipEventFlag){var a=r.split(".");if(Aa(a,s)){var h=a[1];O.call(e,"sprite.add",jg,[h,...n],e)}else return;t.skipEvent()}}).on("-",function(r){if(!t.skipEventFlag){var n=r.split(".");if(Aa(n,s)){var a=n[1];O.call(e,"sprite.remove",Kg,a,e)}else return;t.skipEvent()}})},jg=function(e){this.spriteManager.add(...e)},Kg=function(e){this.spriteManager.remove(e)};const Jg=Phaser.Utils.Objects.GetValue;var Zg=function(e,t,i){var s=Jg(i,"sprite","sprite");!s||t.on("-",function(r){if(!t.skipEventFlag){if(r===s)O.call(e,"sprite.removeall",qg,void 0,e);else return;t.skipEvent()}})},qg=function(){this.spriteManager.removeAll()};const Qg=Phaser.Utils.Objects.GetValue;var tm=function(e,t){return e.length===3&&e[0]===t&&e[2]==="texture"},em=function(e,t,i){var s=Qg(i,"sprite","sprite");!s||t.on("+",function(r,n,a){if(!t.skipEventFlag){var h=r.split(".");if(tm(h,s)){var o=h[1];O.call(e,"sprite.texture",im,[o,n,a],e)}else return;t.skipEvent()}})},im=function(e){this.spriteManager.setTexture(...e)};const sm=Phaser.Utils.Objects.GetValue;var $a=function(e,t){return e.length===3&&e[0]===t&&e[2]==="play"},rm=function(e,t){return e.length===3&&e[0]===t&&e[2]==="stop"},nm=function(e,t,i){var s=sm(i,"sprite","sprite");!s||t.on("+",function(r){if(!t.skipEventFlag){var n=r.split("."),a;if($a(n,s))a=n[1];else return;var h=Array.prototype.slice.call(arguments,1);O.call(e,"sprite.play",am,[a,h],e),t.skipEvent()}}).on("+",function(r){if(!t.skipEventFlag){var n=r.split("."),a;if(rm(n,s))a=n[1];else return;O.call(e,"sprite.stop",Va,a,e),t.skipEvent()}}).on("-",function(r){if(!t.skipEventFlag){var n=r.split("."),a;if($a(n,s))a=n[1];else return;O.call(e,"sprite.stop",Va,a,e),t.skipEvent()}})},am=function(e){var t=e[0],i=e[1],s=i.shift();this.spriteManager.playAnimation(t,s),i.length>0&&this.spriteManager.chainAnimation(t,i)},Va=function(e){this.spriteManager.stopAnimation(e)};const hm=Phaser.Utils.Objects.GetValue;var om=function(e,t){return e.length===3&&e[0]===t&&e[2]==="chain"},lm=function(e,t,i){var s=hm(i,"sprite","sprite");!s||t.on("+",function(r){if(!t.skipEventFlag){var n=r.split("."),a;if(om(n,s))a=n[1];else return;var h=Array.prototype.slice.call(arguments,1);O.call(e,"sprite.chain",um,[a,h],e),t.skipEvent()}})},um=function(e){this.spriteManager.chainAnimation(...e)};const dm=Phaser.Utils.Objects.GetValue;var cm=function(e,t){return e.length===3&&e[0]===t&&e[2]==="pause"},fm=function(e,t,i){var s=dm(i,"sprite","sprite");!s||t.on("+",function(r){if(!t.skipEventFlag){var n=r.split("."),a;if(cm(n,s))a=n[1];else return;O.call(e,"sprite.pause",pm,a,e),t.skipEvent()}})},pm=function(e){this.spriteManager.pauseAnimation(e)};const vm=Phaser.Utils.Objects.GetValue;var gm=function(e,t){return e.length===3&&e[0]===t},mm=function(e,t,i){var s=vm(i,"sprite","sprite");!s||t.on("+",function(r,n){if(!t.skipEventFlag){var a=r.split("."),h,o;if(gm(a,s))h=a[1],o=a[2];else return;O.call(e,"sprite.set",Cm,[h,o,n],e),t.skipEvent()}})},Cm=function(e){this.spriteManager.setProperty(...e)};const bm=Phaser.Utils.Objects.GetValue;var ym={to:!0,yoyo:!0},Sm=function(e,t){return e.length===4&&e[0]===t&&ym[e[3]]},xm=function(e,t,i){var s=bm(i,"sprite","sprite");!s||t.on("+",function(r,n,a,h,o){if(!t.skipEventFlag){typeof h=="number"&&(o=h,h=void 0);var l=r.split("."),u,d,c;if(Sm(l,s))u=l[1],d=l[2],c=l[3]==="yoyo";else return;O.call(e,"sprite.ease",Tm,[u,d,n,a,h,o,c],e),t.skipEvent()}})},Tm=function(e){this.spriteManager.easeProperty(...e)},km=function(e,t,i){t.on("start",function(){e.emit("parser.start",t)}).on("+",function(s,...r){if(!t.skipEventFlag){var n=`+${s}`,a=r;e.emit(`parser.${n}`,t,...r,a),za(e,n,a)}}).on("-",function(s){if(!t.skipEventFlag){var r=`-${s}`,n=[];e.emit(`parser.${r}`,t,n),za(e,r,n)}}).on("complete",function(){e.emit("parser.complete",t)})},Pm=function(e,t){var i=`tag.${t}`;e==null?this.emit(i):this.emit(i,...e)},za=function(e,t,i){O.call(e,t,Pm,i,e)};const wm=Phaser.Utils.Objects.GetValue;var Mm=function(e,t,i){var s=wm(i,"tags.r","r");t.on(`+${s}`,function(){Ts.call(e,`
`),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})};const Em=Phaser.Utils.Objects.GetValue;var Om=function(e,t,i){var s=Em(i,"tags.content.off","content.off");t.on(`+${s}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})};const _m=Phaser.Utils.Objects.GetValue;var Rm=function(e,t,i){var s=_m(i,"tags.content.on","content.on");t.on(`+${s}`,function(){t.setContentOutputEnable(),t.skipEvent()})},Lm=function(e,t,i){t.on("content",function(s){if(t.contentOutputEnable)Ts.call(e,s);else{var r=`+${t.lastTagStart}`;e.emit(`parser.${r}#content`,t,s)}})};const Fa=[Pv,Mv,Ov,Rv,Bv,Gv,Av,Vv,Fv,Yv,Uv,Kv,qv,eg,rg,og,dg,pg,mg,Sg,kg,Mg,_g,Bg,Ag,Fg,Ng,Xg,Zg,em,nm,lm,fm,mm,xm,km,Mm,Om,Rm,Lm];var Bm=function(e,t,i){for(var s=0,r=Fa.length;s<r;s++)Fa[s](e,t,i)},Im=function(e,t){for(var i=e.commentLineStart,s=t.split(`
`),r=0,n=s.length;r<n;r++){var a=s[r];a===""||(a.trim().length===0||i&&a.startsWith(i))&&(s[r]="")}return s.join("")};const Gm=Phaser.Utils.Objects.GetValue;class Dm extends Il{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("delimiters")||(i.delimiters="[]"),super(i),Bm(t,this,i),this.setCommentLineStartSymbol(Gm(i,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(Im(this,t)),this}}const Am={setDefaultTypingSpeed(e){return this.defaultSpeed=e,this},setTypingSpeed(e){return e===void 0&&(e=this.defaultSpeed),this.speed=e,this}};var Gl=function(e,t){return new Promise(function(i,s){e.once(t,function(){i()})})},et=function(e){return Gl(e,"complete")},$m=function(e){return this.children=e,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(e),this.typing(),et(this)};const Vm="delay",Dl="anim";var Al=function(e){e===void 0&&(e=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var i=this.getNextChild();if(!i){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(xs(i)){var s=this.animationConfig;if(s.duration>0){var r=this.timeline.addTimer({name:Dl,target:i,duration:s.duration,yoyo:s.yoyo,onStart:s.onStart,onProgress:s.onProgress,onComplete:s.onComplete});this.skipTypingAnimation&&r.seek(1)}else s.onStart&&s.onStart(i,0);this.textPlayer.emit("typing",i),t+=this.speed+e,e=0;var n=this.index===this.children.length;if(t>0&&!n){this.typingTimer=this.timeline.addTimer({name:Vm,target:this,duration:t,onComplete:function(a,h,o){a.typingTimer=void 0,Al.call(a,o.remainder)}});break}}else Up(i)&&i.exec()}this.inTypingProcessLoop=!1},zm=function(){return this.timeline.pause(),this},Fm=function(){return this.timeline.resume(),this},Wm=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},Ym=function(e){return this.isTypingPaused?(e===void 0&&(e=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=e):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(e)),this):this};const Ut="_remove.wait",Fr="_remove.play",Wa=[Ut,Fr];var fe=function(e,t,i,s,r){return function(){e.emit(Ut,r),t.apply(s,i)}},Ya=function(e,t,i,s,r){var n=fe(e,i,s,r,"custom"),a=t?`wait.${t}`:"wait";e.emit(a,n)},Nm=function(e,t,i,s,r){return e.typeWriter.timeline.delayCall(t,i,s,r)},Hm=function(e,t,i,s,r){var n=fe(e,i,s,r,"time"),a;e.once(Ut,function(){a&&(a.remove(),a=void 0)}),a=Nm(e,t,n),e.emit("wait.time",t)},Um=function(e,t,i,s){var r=e.clickEE;if(!!r){var n=fe(e,t,i,s,"click");e.once(Ut,function(){r.off("pointerdown",n,e)}),r.once("pointerdown",n,e),e.emit("wait.click")}},Na=function(e,t,i,s,r){var n=fe(e,i,s,r,"music");t&&(e.once(Ut,function(){t.off("complete",n,e)}),t.once("complete",n,e)),e.emit("wait.music",t),t||n()},Xm=function(e){switch(e){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},jm=function(e,t,i,s,r){var n=fe(e,i,s,r,`camera.${t}`),a=e.camera,h,o;switch(t){case"camera.fadein":h=a.fadeEffect,o="camerafadeincomplete";break;case"camera.fadeout":h=a.fadeEffect,o="camerafadeoutcomplete";break;case"camera.flash":h=a.flashEffect,o="cameraflashcomplete";break;case"camera.shake":h=a.shakeEffect,o="camerashakecomplete";break;case"camera.zoom":h=a.zoomEffect,o="camerazoomcomplete";break;case"camera.rotate":h=a.rotateToEffect,o="camerarotatecomplete";break;case"camera.scroll":h=a.panEffect,o="camerapancomplete";break}h.isRunning?(e.once(Ut,function(l){a.off(o,n,e)}),a.once(o,n,e),e.emit("wait.camera",t)):(e.emit("wait.camera",t),n())},Km=function(e,t,i,s,r){var n=fe(e,i,s,r,"keydown"),a=`keydown-${t.toUpperCase()}`,h=e.scene.input.keyboard;e.once(Ut,function(){h.off(a,n,e)}),h.once(a,n,e),e.emit("wait.keydown",t)},Jm=function(e){var t=e.split(".");return t[0]==="sprite"&&t.length<=3},Zm=function(e,t,i,s,r){var n=fe(e,i,s,r),a=t.split("."),h=e.spriteManager;switch(a.length){case 1:h.isEmpty?(e.emit("wait.sprite"),n()):(e.once(Ut,function(f){h.off("empty",n,e)}),h.once("empty",n,e),e.emit("wait.sprite"));break;case 2:var u=a[1];if(h.has(u)){var o=e.spriteManager.get(u),l=o.sprite;e.once(Ut,function(){l.off("destroy",n,e)}),l.once("destroy",n,e),e.emit("wait.sprite",u)}else e.emit("wait.sprite",u),n();break;case 3:var u=a[1],d=a[2],c=e.spriteManager.getTweenTask(u,d);c?(e.once(Ut,function(){c.off("complete",n,e)}),c.once("complete",n,e),e.emit("wait.sprite",u,d)):(e.emit("wait.sprite",u,d),n());break}};const qm=Phaser.Input.Keyboard.KeyCodes;var $l=function(e,t,i,s,r){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var n=0,a=t.length;n<a;n++){var h=t[n];if(h==null||h==="wait")Ya(e,void 0,i,s,r);else if(typeof h=="number"||!isNaN(h))Hm(e,parseFloat(h),i,s,r);else if(h==="click")Um(e,i,s,r);else if(h==="se"){var o=e.soundManager.getLastSoundEffect();Na(e,o,i,s,r)}else if(h==="bgm"){var o=e.soundManager.getBackgroundMusic();Na(e,o,i,s,r)}else qm.hasOwnProperty(h.toUpperCase())?Km(e,h,i,s,r):Xm(h)?jm(e,h,i,s,r):Jm(h)?Zm(e,h,i,s,r):Ya(e,h,i,s,r)}},Qm=function(e){return this.ignoreWait?this:(this.pauseTyping(),$l(this.textPlayer,e,this.resumeTyping,[],this),this)},tC=function(e){return this.timeScale=e,this},eC=function(e){return e===void 0&&(e=!0),this.ignoreWait=e,this},iC=function(e){if(e===void 0&&(e=!0),this.skipTypingAnimation=e,e)for(var t=this.timeline.getTimers(Dl),i=0,s=t.length;i<s;i++)t[i].seek(1);return this},sC=function(e){if(e===void 0&&(e=!0),this.skipSoundEffect=e,e){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},rC=function(){return this.typingTimer&&this.typingTimer.seek(1),this},Vl={start:$m,typing:Al,pause:zm,resume:Fm,pauseTyping:Wm,resumeTyping:Ym,wait:Qm,setTimeScale:tC,setIgnoreWait:eC,setSkipTypingAnimation:iC,setSkipSoundEffect:sC,skipCurrentTypingDelay:rC};Object.assign(Vl,Am);const er=Phaser.Utils.Objects.GetValue;class nC extends gs{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=er(t,"isRunning",!1),this.timeScale=er(t,"timeScale",1),this.now=er(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class zl extends nC{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,i){return!this.isRunning||this.timeScale===0?this:(this.tick(i),this)}}var aC=function(e,t){return t===void 0&&(t=.5),e<=t?e=e/t:e=1-(e-t)/(1-t),e};const Ha=Phaser.Math.Clamp;class hC{constructor(t,i){this.setTimeline(t).reset(i)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,i,s,r){return this.target=t,this.onStart=i,this.onProgress=s,this.onComplete=r,this}setDuration(t,i){return i===void 0&&(i=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=i,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=Ha(t,0,1),this.yoyo&&(t=aC(t)),t}setProgress(t){t=Ha(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){!t||t(this.target,this.t,this)}update(t,i){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=i,this.t=this.getProgress(),this.runCallback(this.onProgress);var s=this.remainder<=0;return s&&this.runCallback(this.onComplete),s}}class oC extends te{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var i=0,s=t.length;i<s;i++)this.free(t[i]);return this}}const lC=Phaser.Utils.Objects.GetValue,uC=new oC;class dC extends zl{constructor(t,i){super(t,i),this.addedTimers=[],this.timers=[],this.timerPool=lC(i,"pool",uC)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var i=this.timerPool.allocate();return i?i.setTimeline(this).reset(t):i=new hC(this,t),this.addedTimers.push(i),i.runCallback(i.onStart),this.isRunning||this.start(),i}delayCall(t,i,s,r){var n=this.addTimer({duration:t,onComplete:function(a,h,o){s===void 0&&(s=[]),s.push(o),i.apply(r,s)}});return n}getTimers(t){for(var i=[],s=[this.addedTimers,this.timers],r=0,n=s.length;r<n;r++)for(var a=s[r],h=0,o=a.length;h<o;h++){var l=a[h];l.name===t&&i.push(l)}return i}update(t,i){super.update(t,i),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var s=[],r=0,n=this.timers.length;r<n;r++){var a=this.timers[r],h=a.update(this.now,this.delta);h?this.timerPool.free(a):s.push(a)}this.timers=s,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}const ir=Phaser.Utils.Objects.GetValue;class Fl{constructor(t,i){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.timeline=new dC(t),this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(ir(i,"onTypingStart",fC)),this.setDefaultTypingSpeed(ir(i,"speed",250)),this.setTypingSpeed(),this.setAnimationConfig(ir(i,"animation",void 0))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.timeline.destroy(),this.timeline=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}set timeScale(t){this.timeline.timeScale=t}get timeScale(){return this.timeline.timeScale}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=cC),this.animationConfig=t,this}getNextChild(){var t=this.children[this.index];return this.index=Math.min(this.index+1,this.children.length),t}}var cC=function(e){e.setVisible&&e.setVisible()},fC=function(e){for(var t=0,i=e.length;t<i;t++){var s=e[t];s.setVisible&&s.setVisible(!1)}};Object.assign(Fl.prototype,Xe,Vl);const Ua=Phaser.Utils.Objects.GetValue,Xa=Phaser.Utils.Objects.GetAdvancedValue,pC=Phaser.Math.Linear;class Wl extends Si{constructor(t,i,s){i.scene=t,i.active=!0,super(i,s),this.volume={},this.resetFromJSON(s)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Ua(t,"mode",0)),this.setEnable(Ua(t,"enable",!0)),this.setVolumeRange(Xa(t,"volume.start",this.parent.volume),Xa(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=vC[t]),this.mode=t,this}setVolumeRange(t,i){return this.volume.start=t,this.volume.end=i,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,i){t.volume=pC(this.volume.start,this.volume.end,i.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const vC={stop:1,destroy:2};var ja=function(e,t,i,s,r){s===void 0&&(s=1),r===void 0&&(r=0);var n={mode:0,volume:{start:r,end:s},duration:i};typeof t=="string"&&(t=e.sys.sound.add(t));var a;return t.hasOwnProperty("_fade")?(a=t._fade,a.stop().resetFromJSON(n)):(a=new Wl(e,t,n),t._fade=a),a.start(),t.isPlaying||t.setVolume(r).play(),t},sr=function(e,t,i,s){s===void 0&&(s=!0);var r={mode:s?2:1,volume:{start:t.volume,end:0},duration:i},n;return t.hasOwnProperty("_fade")?(n=t._fade,n.stop().resetFromJSON(r)):(n=new Wl(e,t,r),t._fade=n),n.start(),t.isPlaying||t.play(),t};const rr=Phaser.Utils.Objects.GetValue,Ka=Phaser.Utils.Array.Remove;class Ja{constructor(t,i){this.scene=t,this.soundEffects=[],this.backgroundMusic=void 0,this.setBackgroundMusicLoopValue(rr(i,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(rr(i,"bgm.fade",500));var s=rr(i,"bgm.initial",void 0);s&&this.setCurrentBackgroundMusic(s)}destroy(t){if(this.soundEffects.length&&!t)for(var i=this.soundEffects.length-1;i>=0;i--)this.soundEffects[i].destroy();this.soundEffects.length=0,this.backgroundMusic&&!t&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.scene=void 0}setBackgroundMusicLoopValue(t){return this.backgroundMusicLoopValue=t,this}setBackgroundMusicFadeTime(t){return this.backgroundMusicFadeTime=t,this}getSoundEffects(){return this.soundEffects}getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]}getBackgroundMusic(){return this.backgroundMusic}playSoundEffect(t){var i=this.scene.sys.sound.add(t);return this.soundEffects.push(i),i.once("complete",function(){i.destroy(),this.scene&&Ka(this.soundEffects,i)},this).once("destroy",function(){!this.scene||Ka(this.soundEffects,i)},this).play(),this}setSoundEffectVolume(t){var i=this.getLastSoundEffect();return i&&i.setVolume(t),this}fadeInSoundEffect(t){var i=this.getLastSoundEffect();return i&&ja(this.scene,i,t),this}fadeOutSoundEffect(t,i){var s=this.getLastSoundEffect();return s&&sr(this.scene,s,t,i),this}fadeOutAllSoundEffects(t,i){for(var s=this.soundEffects.length-1;s>=0;s--)sr(this.scene,this.soundEffects[s],t,i);return this}setCurrentBackgroundMusic(t){this.backgroundMusic=t,t&&(t.setLoop(this.backgroundMusicLoopValue),t.once("complete",function(){this.backgroundMusic.destroy(),this.backgroundMusic=void 0},this).once("destroy",function(){this.backgroundMusic=void 0},this),t.isPlaying||t.play())}playBackgroundMusic(t){return this.backgroundMusic&&this.backgroundMusic.key===t?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.scene.sys.sound.add(t)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)}pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this}resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this}stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this}fadeInBackgroundMusic(t){return this.backgroundMusic&&ja(this.scene,this.backgroundMusic,t),this}fadeOutBackgroundMusic(t,i){return this.backgroundMusic&&sr(this.scene,this.backgroundMusic,t,i),this}crossFadeBackgroundMusic(t,i){var s=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(i,!0).playBackgroundMusic(t).fadeInBackgroundMusic(i),this.backgroundMusicFadeTime=s,this}}var gC=function(e){for(var t in e)return!1;return!0};class mC{constructor(t,i,s){this.spriteManager=t,this.sprite=i.setName(s),this.tweens={},this.name=s}get scene(){return this.spriteManager.scene}get timeScale(){return this.spriteManager.timeScale}destroy(){this.freeSprite().freeTweens(),this.spriteManager=void 0}freeSprite(){return this.sprite.destroy(),this.sprite=void 0,this}freeTweens(){var t=this.tweens;for(var i in t)t[i].remove(),delete t[i];return this}setProperty(t,i){return this.sprite[t]=i,this}easeProperty(t,i,s,r,n,a,h){var o=this.tweens;o.hasOwnProperty(t)&&o[t].remove();var l=this.sprite,u={targets:l,duration:s,ease:r,repeat:n,yoyo:a,onComplete:function(){o[t].remove(),delete o[t],h&&h(l,t)},onCompleteScope:this};u[t]=i;var d=this.scene.tweens.add(u);return d.timeScale=this.timeScale,o[t]=d,this}setTexture(t,i){return this.sprite.setTexture(t,i),this}playAnimation(t){return this.sprite.anims.timeScale=this.timeScale,this.sprite.play(t),this}stopAnimation(){return this.sprite.stop(),this}chainAnimation(t){return this.sprite.chain(t),this}pauseAnimation(){return this.sprite.anims.pause(),this}setTimeScale(t){this.sprite.anims&&(this.sprite.anims.timeScale=t);var i=this.tweens;for(var s in i)i[s].timeScale=t;return this}}var Za=function(e){return e>>16&255},qa=function(e){return e>>8&255},Qa=function(e){return e&255};const CC=~(255<<16)&16777215,bC=~(255<<8)&16777215,yC=16776960;var SC=function(e,t){return(t&255)<<16|e&CC},xC=function(e,t){return(t&255)<<8|e&bC},TC=function(e,t){return t&255|e&yC},kC=function(e,t,i,s){return(t&255)<<16|(i&255)<<8|s&255},PC=function(e,t){if(e.hasOwnProperty("tintR"))return e;t===void 0&&(t=16777215);var i=Za(t),s=qa(t),r=Qa(t);return Object.defineProperty(e,"tint",{get:function(){return t},set:function(n){n=Math.floor(n)&16777215,e.setTint(n),t!==n&&(t=n,i=Za(t),s=qa(t),r=Qa(t))}}),Object.defineProperty(e,"tintR",{get:function(){return i},set:function(n){n=Math.floor(n)&255,i!==n&&(i=n,e.tint=SC(t,n))}}),Object.defineProperty(e,"tintG",{get:function(){return s},set:function(n){n=Math.floor(n)&255,s!==n&&(s=n,e.tint=xC(t,n))}}),Object.defineProperty(e,"tintB",{get:function(){return r},set:function(n){n=Math.floor(n)&255,r!==n&&(r=n,e.tint=TC(t,n))}}),Object.defineProperty(e,"tintGray",{get:function(){return Math.floor((i+s+r)/3)},set:function(n){n=Math.floor(n)&255,(i!==n||s!==n||r!==n)&&(i=n,s=n,r=n,e.tint=kC(t,n,n,n))}}),e.tint=t,e};const wC=Phaser.Events.EventEmitter;var MC=function(e){if(e.events)return e;var t=new wC,i=e.x;Object.defineProperty(e,"x",{get:function(){return i},set:function(a){i!==a&&(i=a,t.emit("update",e))}});var s=e.y;Object.defineProperty(e,"y",{get:function(){return s},set:function(a){s!==a&&(s=a,t.emit("update",e))}});var r=e.width;Object.defineProperty(e,"width",{get:function(){return r},set:function(a){r!==a&&(r=a,t.emit("update",e))}});var n=e.height;return Object.defineProperty(e,"height",{get:function(){return n},set:function(a){n!==a&&(n=a,t.emit("update",e))}}),e.events=t,e},EC=function(e,t,i,s,r){if(e.hasOwnProperty("vp"))return e;i===void 0&&(i=.5),s===void 0&&(s=.5),r===void 0&&(r=OC),MC(t);var n=t.events;e.vp=t;var a=function(){r(e,t,i,s)};n.on("update",a),e.once("destroy",function(){n.off("update",a),e.vp=void 0}),Object.defineProperty(e,"vpx",{get:function(){return i},set:function(h){i!==h&&(i=h,a())}}),Object.defineProperty(e,"vpy",{get:function(){return s},set:function(h){s!==h&&(s=h,a())}}),a()},OC=function(e,t,i,s){e.x=t.x+t.width*i,e.y=t.y+t.height*s};const _C=Phaser.Utils.Array.Remove,RC={has(e){return this.sprites.hasOwnProperty(e)},get(e){return this.sprites[e]},getSprite(e){return this.get(e).sprite},add(e,t,i){this.remove(e);var s;if(arguments.length===3)s=this.createCallback(this.scene,t,i);else{var r=Array.prototype.slice.call(arguments,1);s=this.createCallback(this.scene,...r)}this.fadeTime>0&&PC(s),this.viewportCoordinateEnable&&EC(s),s.once("destroy",function(){_C(this.removedSprites,s),this.isEmpty&&this.emit("empty")},this);var n=new mC(this,s,e);return this.sprites[e]=n,this.fadeTime>0&&n.setProperty("tintGray",0).easeProperty("tintGray",255,this.fadeTime),this}},LC={remove(e){if(!this.has(e))return this;var t=this.get(e);return delete this.sprites[e],this.removedSprites.push(t.sprite),this.fadeTime>0?t.easeProperty("tintGray",0,this.fadeTime,"Linear",0,!1,function(){t.destroy()}):t.destroy(),this},removeAll(){var e=this.sprites;for(var t in e)this.remove(t);return this},clear(e){e===void 0&&(e=!0);var t=this.sprites;for(var i in t)e&&t[i].destroy(),delete t[i];return this.removedSprites.length=0,this}},BC={setProperty(e,t,i){return this.has(e)?(this.get(e).setProperty(t,i),this):this},easeProperty(e,t,i,s,r,n,a,h){return this.has(e)?(s===void 0&&(s=1e3),r===void 0&&(r="Linear"),n===void 0&&(n=0),a===void 0&&(a=!1),this.get(e).easeProperty(t,i,s,r,n,a,h),this):this},getTweenTask(e,t){if(this.has(e)){var i=this.get(e).tweens;if(i.hasOwnProperty(t))return i[t]}return null}},IC={playAnimation(e,t){return this.has(e)||this.add(e),this.get(e).playAnimation(t),this},stopAnimation(e){return this.has(e)?(this.get(e).stopAnimation(),this):this},chainAnimation(e,t){return this.has(e)?(this.get(e).chainAnimation(t),this):this},pauseAnimation(e){return this.has(e)?(this.get(e).pauseAnimation(),this):this},setTexture(e,t,i){return this.has(e)?(this.get(e).setTexture(t,i),this):this}};var Yl={};Object.assign(Yl,RC,LC,BC,IC);const Hi=Phaser.Utils.Objects.GetValue;class Wr{constructor(t,i){this.scene=t,this.setEventEmitter(Hi(i,"eventEmitter",void 0)),this.setCreateCallback(Hi(i,"createCallback","sprite")),this.setSpriteFadeTime(Hi(i,"fade",500)),this.setViewportCoordinateEnable(Hi(i,"viewportCoordinate",!1)),this.sprites={},this.removedSprites=[],this._timeScale=1}destroy(t){this.clear(!t),this.createCallback=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var i=this.sprites;for(var s in i)i[s].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateCallback(t){return t==="sprite"?this.createCallback=function(i,s,r){return i.add.sprite(0,0,s,r)}:t==="image"?this.createCallback=function(i,s,r){return i.add.image(0,0,s,r)}:this.createCallback=t,this}setSpriteFadeTime(t){return this.fadeTime=t,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}get isEmpty(){return gC(this.sprites)&&this.removedSprites.length===0}}Object.assign(Wr.prototype,Xe,Yl);var GC=function(e){return this.clickTarget=e,e?as(e)?this.clickEE=e.input:this.clickEE=e.setInteractive():this.clickEE=null,this},DC=function(e){return this.camera=e,this},AC=function(e){var t=this;e?typeof e=="function"?this.nextPageInput=function(i,s,r){var n=fe(t,i,s,r);e.call(t,n)}:this.nextPageInput=function(i,s,r){$l(t,e,i,s,r)}:this.nextPageInput=null},$C=function(e,t){return this.imageManager.add(e,t),this},VC=function(e){return this.isPlaying?this:(this.removeChildren(),this.parser.start(e),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},zC=function(e){var t=et(this);return this.play(e),t};const FC=Phaser.Utils.Objects.GetValue;var Yr=function(){if(!this.isPlaying||this.isPageTyping)return this;var e=FC(this.wrapConfig,"callback",this.runWordWrap);typeof e=="string"&&(e=this[e]);var t=e.call(this,this.lastWrapResult);this.lastWrapResult=t,this.emit("page.start");var i=function(){this.emit(Fr),t.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?Yr.call(this):this.nextPageInput&&this.nextPageInput(Yr,[],this))};this.once(Fr,function(){this.typeWriter.off("complete",i,this)}),this.typeWriter.once("complete",i,this).start(t.children)},WC=function(){return this.typeWriter.pauseTyping().pause(),this},YC=function(){return this.typeWriter.pauseTyping(),this},NC=function(){return this.typeWriter.resume().resumeTyping(),this};const HC={setDefaultTypingSpeed(e){return this.defaultTypingSpeed=e,this},setTypingSpeed(e){return this.typingSpeed=e,this}};var UC=function(e){return this.timeScale=e,this},XC=function(e){return this.typeWriter.setIgnoreWait(e),this},jC=function(e){return e===void 0&&(e=!0),this.ignoreNextPageInput=e,this},KC=function(){if(!this.isPlaying||!this.isPageTyping)return this;var e=this.typeWriter.speed,t=this.typeWriter.ignoreWait,i=this.typeWriter.skipTypingAnimation,s=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(e).setIgnoreWait(t).setSkipTypingAnimation(i).setSkipSoundEffect(s)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},Nl={setClickTarget:GC,setTargetCamera:DC,setNextPageInput:AC,addImage:$C,play:VC,playPromise:zC,typingNextPage:Yr,pause:WC,pauseTyping:YC,resume:NC,setTimeScale:UC,setIgnoreWait:XC,setIgnoreNextPageInput:jC,showPage:KC};Object.assign(Nl,HC);var JC=function(e){for(var t=0,i=Wa.length;t<i;t++)e.emit(Wa[t])};const th=Phaser.Utils.Objects.IsPlainObject,Zt=Phaser.Utils.Objects.GetValue;class ZC extends Ll{constructor(t,i,s,r,n,a){th(i)?a=i:th(r)&&(a=r),a===void 0&&(a={});var h=a.text;delete a.text,super(t,i,s,r,n,a),this.type="rexTextPlayer",this.parser=new Dm(this,Zt(a,"parser",void 0)),this.typeWriter=new Fl(this,Zt(a,"typing",void 0)),this._imageManager=void 0;var o=Zt(a,"images",void 0);o&&this.addImage(o),this._soundManager=void 0;var l=Zt(a,"sounds",void 0);l&&(this._soundManager=new Ja(this.scene,l)),this.setTargetCamera(Zt(a,"camera",this.scene.sys.cameras.main)),this._spriteManager=void 0;var u=Zt(a,"sprites",void 0);u&&(this._spriteManager=new Wr(this.scene,u)),this.setIgnoreNextPageInput(Zt(a,"ignoreNextPageInput",!1)),this.setClickTarget(Zt(a,"clickTarget",this)),this.setNextPageInput(Zt(a,"nextPageInput",null)),this.isPlaying=!1,h&&this.play(h)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new hn(this.scene)),this._imageManager}get soundManager(){return this._soundManager===void 0&&(this._soundManager=new Ja(this.scene)),this._soundManager}get spriteManager(){return this._spriteManager===void 0&&(this._spriteManager=new Wr(this.scene)),this._spriteManager}destroy(t){!this.scene||(JC(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this._soundManager&&this._soundManager.destroy(t),this._soundManager=void 0,this.camera=void 0,this._spriteManager&&this._spriteManager.destroy(t),this._spriteManager=void 0,this.clickEE=void 0,super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.typeWriter.timeScale=t,this._spriteManager!==void 0&&this._spriteManager.setTimeScale(t)}get timeScale(){return this.typeWriter.timeScale}}Object.assign(ZC.prototype,Nl);const qC=Phaser.GameObjects.GetCalcMatrix;var QC=function(e,t,i,s){t.updateData(),i.addToRenderList(t);var r=e.pipelines.set(t.pipeline),n=qC(t,i,s),a=r.calcMatrix.copyFrom(n.calc),h=t._displayOriginX,o=t._displayOriginY,l=i.alpha*t.alpha;e.pipelines.preBatch(t);for(var u=t.geom,d=0,c=u.length;d<c;d++)u[d].webglRender(r,a,l,h,o);e.pipelines.postBatch(t)};const tb=Phaser.Renderer.Canvas.SetTransform;var eb=function(e,t,i,s){t.updateData(),i.addToRenderList(t);var r=e.currentContext;if(tb(e,r,t,i,s)){for(var n=t._displayOriginX,a=t._displayOriginY,h=t.geom,o=0,l=h.length;o<l;o++)h[o].canvasRender(r,n,a);r.restore()}};const ib={renderWebGL:QC,renderCanvas:eb},sb=Phaser.GameObjects.Shape,rb=Phaser.Utils.Array.Remove;class gn extends sb{constructor(t,i,s,r,n){i===void 0&&(i=0),s===void 0&&(s=0),r===void 0&&(r=0),n===void 0&&(n=r),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(i,s),this.setSize(r,n),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,i){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==i,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=i,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=t,s.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==i,this._fillColor=t,this._fillAlpha=i,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,i,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==i||this.strokeAlpha!==s,this._lineWidth=t,this._strokeColor=i,this._strokeAlpha=s,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,i=0,s=t.length;i<s;i++){var r=t[i];r.dirty&&r.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,le(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var i=t.name;return i&&(this.shapes[i]=t),this.dirty=!0,this}deleteShape(t){var i=this.getShape(t);return i&&(delete this.shapes[t],rb(this.geom,i)),this}}Object.assign(gn.prototype,ib);var nb=function(e,t){return e===void 0?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=e,this.fillAlpha=t),this},ab=function(e,t,i){return e===void 0||t===void 0?this.isStroked=!1:(i===void 0&&(i=1),this.isStroked=!0,this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=i),this};const hb={fillStyle:nb,lineStyle:ab};class ks{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,i,s,r,n){}canvasRender(t,i,s){}updateData(){this.dirty=!1}}Object.assign(ks.prototype,hb,ms);const ob=Phaser.Geom.Polygon.Earcut;class Ps extends ks{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=ob(this.pathData),super.updateData(),this}webglRender(t,i,s,r,n){this.isFilled&&_o(t,i,this,s,r,n),this.isStroked&&Cs(t,this,s,r,n)}canvasRender(t,i,s){var r=this.pathData,n=r.length-1,a=r[0]-i,h=r[1]-s;t.beginPath(),t.moveTo(a,h),this.closePath||(n-=2);for(var o=2;o<n;o+=2){var l=r[o]-i,u=r[o+1]-s;t.lineTo(l,u)}this.closePath&&t.closePath(),this.isFilled&&(Ti(t,this),t.fill()),this.isStroked&&(ki(t,this),t.stroke())}}const eh=Phaser.Math.DegToRad;class ws extends Ps{constructor(t,i,s,r,n,a,h,o){t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),r===void 0&&(r=0),n===void 0&&(n=0),a===void 0&&(a=360),h===void 0&&(h=!1),o===void 0&&(o=!1),super(),this.setCenterPosition(t,i),this.setRadius(s,r),this.setAngle(n,a,h),this.setPie(o),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,i){return i===void 0&&(i=t),this.x=t,this.y=i,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,i){return i===void 0&&(i=t),this.radiusX=t,this.radiusY=i,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,i,s){return s===void 0&&(s=!1),this.startAngle=t,this.endAngle=i,this.anticlockwise=s,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Ue(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,i,s){t.beginPath();var r=this.x-i,n=this.y-s,a=eh(this.startAngle),h=eh(this.endAngle);this.pie&&(t.moveTo(r,n),t.lineTo(r+Math.cos(a)*this.radiusX,n+Math.sin(a)*this.radiusY)),t.ellipse(r,n,this.radiusX,this.radiusY,0,a,h,this.anticlockwise),this.pie&&t.lineTo(r,n),this.isFilled&&(Ti(t,this),t.fill()),this.isStroked&&(ki(t,this),t.stroke())}}class Nr extends ws{constructor(t,i,s){super(t,i,s,s,0,360)}}class lb extends Ps{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),i=0,s=t.length;i<s;i++)this.pathData.push(t[i].x,t[i].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class ub extends ws{constructor(t,i,s,r){super(t,i,s,r,0,360)}}class db extends Ps{constructor(t,i,s,r){t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),r===void 0&&(r=0),super(),this.setP0(t,i),this.setP1(s,r)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var cb=function(e,t,i){return i.length=0,i.push(e,t),i};const ih=Phaser.Math.Interpolation.QuadraticBezier;var sh=function(e,t,i,s,r,n){for(var a=n.length,h=n[a-2],o=n[a-1],l=1,u=r-1;l<=u;l++){var d=l/u;n.push(ih(d,h,e,i),ih(d,o,t,s))}return n};const fb=Phaser.Math.RotateAround;var pb=function(e,t,i,s){for(var r={x:0,y:0},n=0,a=s.length-1;n<a;n+=2)r.x=s[n],r.y=s[n+1],fb(r,e,t,i),s[n]=r.x,s[n+1]=r.y;return s},vb=function(e,t,i){for(var s=0,r=i.length-1;s<r;s+=2)i[s]+=e,i[s+1]+=t;return i},gb=function(e,t){t===void 0&&(t=[]);for(var i=0,s=e.length-1;i<s;i+=2)t.push({x:e[i],y:e[i+1]});return t};const mb=Phaser.Geom.Polygon;var Cb=function(e,t){return t===void 0&&(t=new mb),t.setTo(e),t};const bb=Phaser.Math.DegToRad;class yb{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.lastPointX=void 0,this.lastPointY=void 0}setIterations(t){return this.iterations=t,this}startAt(t,i){return cb(t,i,this.pathData),this.lastPointX=t,this.lastPointY=i,this}lineTo(t,i,s){return s===void 0&&(s=!1),s&&(t+=this.lastPointX,i+=this.lastPointY),He(t,i,this.pathData),this.lastPointX=t,this.lastPointY=i,this}verticalLineTo(t,i){return this.lineTo(t,this.lastPointY,i),this}horizontalLineTo(t,i){return this.lineTo(this.lastPointX,t,i),this}ellipticalArc(t,i,s,r,n,a,h){h===void 0&&(h=!1),Ue(t,i,s,r,n,a,h,this.iterations,this.pathData);var o=this.pathData.length;return this.lastPointX=this.pathData[o-2],this.lastPointY=this.pathData[o-1],this}arc(t,i,s,r,n,a){return this.ellipticalArc(t,i,s,s,r,n,a),this}quadraticBezierTo(t,i,s,r){return sh(t,i,s,r,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=r,this.lastCX=t,this.lastCY=i,this}smoothQuadraticBezierTo(t,i){var s=this.lastPointX*2-this.lastCX,r=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(s,r,t,i),this}cubicBezierCurveTo(t,i,s,r,n,a){return sh(t,i,s,r,n,a,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=a,this.lastCX=s,this.lastCY=r,this}smoothCubicBezierCurveTo(t,i,s,r){var n=this.lastPointX*2-this.lastCX,a=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(n,a,t,i,s,r),this}close(){return this.closePath=!0,this}end(){return this.pathData.push(this.lastPointX,this.lastPointY),this}rotateAround(t,i,s){if(this.pathData.length===0)return this;s=bb(s),pb(t,i,s,this.pathData);var r=this.pathData.length;if(this.lastPointX=this.pathData[r-2],this.lastPointY=this.pathData[r-1],this.lastCX!==void 0){var n={x:this.lastCX,y:this.lastCY};PointRotateAround(n,t,i,s),this.lastCX=n.x,this.lastCY=n.y}return this}offset(t,i){return vb(t,i,this.pathData),this}toPoints(){return gb(this.pathData)}toPolygon(t){return Cb(this.pathData,t)}draw(t,i,s){var r=this.toPoints();return i&&t.fillPoints(r,this.closePath,this.closePath),s&&t.strokePoints(r,this.closePath,this.closePath),this}}class Sb extends Ps{constructor(){super(),this.builder=new yb(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}startAt(t,i){return this.builder.startAt(t,i),this.dirty=!0,this}lineTo(t,i,s){return this.builder.lineTo(t,i,s),this.dirty=!0,this}verticalLineTo(t,i){return this.builder.verticalLineTo(t,i),this.dirty=!0,this}horizontalLineTo(t,i){return this.builder.horizontalLineTo(t,i),this.dirty=!0,this}ellipticalArc(t,i,s,r,n,a,h){return this.builder.ellipticalArc(t,i,s,r,n,a,h),this.dirty=!0,this}arc(t,i,s,r,n,a){return this.builder.arc(t,i,s,r,n,a),this.dirty=!0,this}quadraticBezierTo(t,i,s,r){return this.builder.quadraticBezierTo(t,i,s,r),this.dirty=!0,this}smoothQuadraticBezierTo(t,i){return this.builder.smoothQuadraticBezierTo(t,i),this.dirty=!0,this}cubicBezierCurveTo(t,i,s,r,n,a){return this.builder.cubicBezierCurveTo(t,i,s,r,n,a),this.dirty=!0,this}smoothCubicBezierCurveTo(t,i,s,r){return this.builder.smoothCubicBezierCurveTo(t,i,s,r),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,i,s){return this.builder.rotateAround(t,i,s),this.dirty=!0,this}offset(t,i){return this.builder.offset(t,i),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}}const xb=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class Tb extends ks{constructor(t,i,s,r){t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),r===void 0&&(r=s),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,i),this.setSize(s,r)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,i){return this.width=t,this.height=i,this}updateData(){this.pathData.length=0;var t=this.x,i=t+this.width,s=this.y,r=s+this.height;return this.pathData.push(t,s),this.pathData.push(i,s),this.pathData.push(i,r),this.pathData.push(t,r),this.pathData.push(t,s),super.updateData(),this}webglRender(t,i,s,r,n){if(this.isFilled){var a=t.fillTint,h=xb(this.fillColor,this.fillAlpha*s);a.TL=h,a.TR=h,a.BL=h,a.BR=h,t.batchFillRect(-r+this.x,-n+this.y,this.width,this.height)}this.isStroked&&Cs(t,this,s,r,n)}canvasRender(t,i,s){this.isFilled&&(Ti(t,this),t.fillRect(-i,-s,this.width,this.height)),this.isStroked&&(ki(t,this),t.beginPath(),t.rect(-i,-s,this.width,this.height),t.stroke())}}const kb=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class Pb extends ks{constructor(t,i,s,r,n,a){t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),r===void 0&&(r=0),n===void 0&&(n=0),a===void 0&&(a=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,i),this.setP1(s,r),this.setP2(n,a)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,i){return this.dirty=this.dirty||this.x2!==t||this.y2!==i,this.x2=t,this.y2=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,i,s,r,n){if(this.isFilled){var a=kb(this.fillColor,this.fillAlpha*s),h=this.x0-r,o=this.y0-n,l=this.x1-r,u=this.y1-n,d=this.x2-r,c=this.y2-n,f=i.getX(h,o),p=i.getY(h,o),v=i.getX(l,u),g=i.getY(l,u),m=i.getX(d,c),b=i.getY(d,c);t.batchTri(f,p,v,g,m,b,a,a,a)}this.isStroked&&Cs(t,this,s,r,n)}canvasRender(t,i,s){var r=this.x1-i,n=this.y1-s,a=this.x2-i,h=this.y2-s,o=this.x3-i,l=this.y3-s;t.beginPath(),t.moveTo(r,n),t.lineTo(a,h),t.lineTo(o,l),t.closePath(),this.isFilled&&(Ti(t,this),t.fill()),this.isStroked&&(ki(t,this),t.stroke())}}const rt=Phaser.Utils.Objects.GetValue,wb=Phaser.Utils.Objects.IsPlainObject,rh=Phaser.Math.Clamp,Mb=Phaser.Math.Linear,nh=Phaser.Math.Percent,Eb=Phaser.Math.DegToRad(270),Ob=Phaser.Math.RadToDeg;class Hl extends gn{constructor(t,i,s,r,n,a,h){wb(i)&&(h=i,i=rt(h,"x",0),s=rt(h,"y",0),r=rt(h,"radius",1),n=rt(h,"barColor",void 0),a=rt(h,"value",0));var o=r*2;super(t,i,s,o,o),this.type="rexCircularProgress",this.eventEmitter=rt(h,"eventEmitter",this),this.addShape(new Nr().setName("track")).addShape(new ws().setName("bar")).addShape(new Nr().setName("center")),this.setRadius(r),this.setTrackColor(rt(h,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(rt(h,"centerColor",void 0)),this.setThickness(rt(h,"thickness",.2)),this.setStartAngle(rt(h,"startAngle",Eb)),this.setAnticlockwise(rt(h,"anticlockwise",!1));var l=rt(h,"valuechangeCallback",null);if(l!==null){var u=rt(h,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",l,u)}this.setEaseValuePropName("value").setEaseValueDuration(rt(h,"easeValue.duration",0)).setEaseValueFunction(rt(h,"easeValue.ease","Linear")),this.setValue(a)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get value(){return this._value}set value(t){t=rh(t,0,1);var i=this._value,s=i!=t;this.dirty=this.dirty||s,this._value=t,s&&this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter)}setValue(t,i,s){return t==null?this:(i!==void 0&&(t=nh(t,i,s)),this.value=t,this)}addValue(t,i,s){return i!==void 0&&(t=nh(t,i,s)),this.value+=t,this}getValue(t,i){var s=this.value;return t!==void 0&&(s=Mb(t,i,s)),s}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=rh(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}updateShapes(){var t=this.radius,i=this.thickness*this.radius,s=this.radius-i/2,r=this.radius-i,n=this.getShape("track");this.trackColor!=null&&i>0?n.setCenterPosition(t,t).setRadius(s).lineStyle(i,this.trackColor):n.reset();var a=this.getShape("bar");if(this.barColor!=null&&s>0){var h,o,l;if(this.value===1)h=!1,o=0,l=361;else{h=this.anticlockwise,o=Ob(this.startAngle);var u=360*(h?1-this.value:this.value);l=u+o}a.setCenterPosition(t,t).setRadius(s).setAngle(o,l,h).lineStyle(i,this.barColor)}else a.reset();var d=this.getShape("center");this.centerColor&&r>0?d.setCenterPosition(t,t).setRadius(r).fillStyle(this.centerColor):d.reset()}}Object.assign(Hl.prototype,xi);var Ms=function(e){return e.hasOwnProperty("rexSizer")||(e.rexSizer={}),e.rexSizer},_b=function(e){var t=Ms(e);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState};const Ul=Phaser.Geom.Rectangle;Phaser.Scale.Center;var Es=function(e,t){t===void 0?t=new Ul:t===!0&&(t=Rb);var i=e.sys.scale,s=i.baseSize,r=i.parentSize,n=i.canvasBounds,a=i.displayScale,h=n.x>=0?0:-(n.x*a.x),o=n.y>=0?0:-(n.y*a.y),l;r.width>=n.width?l=s.width:l=s.width-(n.width-r.width)*a.x;var u;return r.height>=n.height?u=s.height:u=s.height-(n.height-r.height)*a.y,t.setTo(h,o,l,u),t},Rb=new Ul,Lb=function(e){return e===void 0&&(e=Es(this.scene)),this.left=Math.max(this.left,e.left),this.right=Math.min(this.right,e.right),this.top=Math.max(this.top,e.top),this.bottom=Math.min(this.bottom,e.bottom),this};const ut=Phaser.Display.Align,Os={center:ut.CENTER,left:ut.LEFT_CENTER,right:ut.RIGHT_CENTER,top:ut.TOP_CENTER,bottom:ut.BOTTOM_CENTER,"left-top":ut.TOP_LEFT,"left-center":ut.LEFT_CENTER,"left-bottom":ut.BOTTOM_LEFT,"center-top":ut.TOP_CENTER,"center-center":ut.CENTER,"center-bottom":ut.BOTTOM_CENTER,"right-top":ut.TOP_RIGHT,"right-center":ut.RIGHT_CENTER,"right-bottom":ut.BOTTOM_RIGHT};var Hr=new Phaser.GameObjects.Zone({sys:{queueDepthSort:kt,events:{once:kt}}},0,0,1,1);Hr.setOrigin(0);var ie={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},$=function(e){return e.displayWidth!==void 0?e.displayWidth:e.width},B=function(e){return e.displayHeight!==void 0?e.displayHeight:e.height},mn=function(e){var t=B(e);return e.y+t-t*e.originY},Cn=function(e){var t=$(e);return e.x-t*e.originX+t*.5},bn=function(e,t){var i=B(e);return e.y=t-i+i*e.originY,e},yn=function(e,t){var i=$(e),s=i*e.originX;return e.x=t+s-i*.5,e},Bb=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),yn(e,Cn(t)+i),bn(e,mn(t)+s),e},Sn=function(e){var t=$(e);return e.x-t*e.originX},xn=function(e,t){var i=$(e);return e.x=t+i*e.originX,e},Ib=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),xn(e,Sn(t)-i),bn(e,mn(t)+s),e},Tn=function(e){var t=$(e);return e.x+t-t*e.originX},kn=function(e,t){var i=$(e);return e.x=t-i+i*e.originX,e},Gb=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),kn(e,Tn(t)+i),bn(e,mn(t)+s),e},Pn=function(e,t){var i=B(e),s=i*e.originY;return e.y=t+s-i*.5,e},Db=function(e,t,i){return yn(e,t),Pn(e,i)},wn=function(e){var t=B(e);return e.y-t*e.originY+t*.5},Ab=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),Db(e,Cn(t)+i,wn(t)+s),e},$b=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),xn(e,Sn(t)-i),Pn(e,wn(t)+s),e},Vb=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),kn(e,Tn(t)+i),Pn(e,wn(t)+s),e},Mn=function(e){var t=B(e);return e.y-t*e.originY},En=function(e,t){var i=B(e);return e.y=t+i*e.originY,e},zb=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),yn(e,Cn(t)+i),En(e,Mn(t)-s),e},Fb=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),xn(e,Sn(t)-i),En(e,Mn(t)-s),e},Wb=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),kn(e,Tn(t)+i),En(e,Mn(t)-s),e},jt=[];jt[ie.BOTTOM_CENTER]=Bb;jt[ie.BOTTOM_LEFT]=Ib;jt[ie.BOTTOM_RIGHT]=Gb;jt[ie.CENTER]=Ab;jt[ie.LEFT_CENTER]=$b;jt[ie.RIGHT_CENTER]=Vb;jt[ie.TOP_CENTER]=zb;jt[ie.TOP_LEFT]=Fb;jt[ie.TOP_RIGHT]=Wb;var Xl=function(e,t,i,s,r){return jt[i](e,t,s,r)},_s=function(e,t,i,s,r,n){Hr.setPosition(t,i).setSize(s,r),Xl(e,Hr,n)};const ah=Phaser.Geom.Rectangle,ue=Phaser.Math.Vector2,Yb=Phaser.Math.RotateAround;var jl=function(e,t){if(t===void 0?t=new ah:t===!0&&(nr===void 0&&(nr=new ah),t=nr),e.getBounds)return e.getBounds(t);var i,s,r,n,a,h,o,l;if(e.parentContainer){var u=e.parentContainer.getBoundsTransformMatrix();hh(e,t),u.transformPoint(t.x,t.y,t),i=t.x,s=t.y,oh(e,t),u.transformPoint(t.x,t.y,t),r=t.x,n=t.y,lh(e,t),u.transformPoint(t.x,t.y,t),a=t.x,h=t.y,uh(e,t),u.transformPoint(t.x,t.y,t),o=t.x,l=t.y}else hh(e,t),i=t.x,s=t.y,oh(e,t),r=t.x,n=t.y,lh(e,t),a=t.x,h=t.y,uh(e,t),o=t.x,l=t.y;return t.x=Math.min(i,r,a,o),t.y=Math.min(s,n,h,l),t.width=Math.max(i,r,a,o)-t.x,t.height=Math.max(s,n,h,l)-t.y,t},nr=void 0,hh=function(e,t,i){return t===void 0?t=new ue:t===!0&&(Pt===void 0&&(Pt=new ue),t=Pt),e.getTopLeft?e.getTopLeft(t):(t.x=e.x-$(e)*e.originX,t.y=e.y-B(e)*e.originY,Rs(e,t,i))},oh=function(e,t,i){return t===void 0?t=new ue:t===!0&&(Pt===void 0&&(Pt=new ue),t=Pt),e.getTopRight?e.getTopRight(t):(t.x=e.x-$(e)*e.originX+$(e),t.y=e.y-B(e)*e.originY,Rs(e,t,i))},lh=function(e,t,i){return t===void 0?t=new ue:t===!0&&(Pt===void 0&&(Pt=new ue),t=Pt),e.getBottomLeft?e.getBottomLeft(t):(t.x=e.x-$(e)*e.originX,t.y=e.y-B(e)*e.originY+B(e),Rs(e,t,i))},uh=function(e,t,i){return t===void 0?t=new ue:t===!0&&(Pt===void 0&&(Pt=new ue),t=Pt),e.getBottomRight?e.getBottomRight(t):(t.x=e.x-$(e)*e.originX+$(e),t.y=e.y-B(e)*e.originY+B(e),Rs(e,t,i))},Pt=void 0,Rs=function(e,t,i){if(i===void 0&&(i=!1),e.rotation!==0&&Yb(t,e.x,e.y,e.rotation),i&&e.parentContainer){var s=e.parentContainer.getBoundsTransformMatrix();s.transformPoint(t.x,t.y,t)}return t};const ri=Phaser.Utils.Objects.GetValue,Nb=Phaser.GameObjects.Group;var Hb=function(e,t){var i=e.scene,s,r,n,a;if(typeof t=="number")s=t;else{s=ri(t,"color",16777215);var h=ri(t,"name",!1);h&&(r=ri(h,"createTextCallback",Ub),n=ri(h,"createTextCallbackScope",void 0),a=ri(h,"align","left-top"),typeof a=="string"&&(a=Os[a]))}if(r&&!e.children){e.children=new Nb(i),e.once("destroy",function(p,v){p.children.destroy(!v),p.children=void 0});var o=e.clear.bind(e);e.clear=function(){o(),e.children.clear(!1,!0)}}for(var l=this.getAllShownChildren([this]),u,d,c=0,f=l.length;c<f;c++){if(u=l[c],u.getBounds||u.width!==void 0&&u.height!==void 0)be=jl(u,be);else continue;s!=null&&e.lineStyle(1,s).strokeRectShape(be),u.name&&r&&(n?d=r.call(n,i):d=r(i),d&&(d.setText(u.name),e.children.add(d),_s(d,be.x,be.y,be.width,be.height,a)))}return this},Ub=function(e,t,i){return e.add.text(0,0,"")},be=void 0;const Ui=Phaser.Utils.Objects.GetValue;var je=function(e,t){return t===void 0&&(t={}),typeof e=="number"?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=Ui(e,"left",0),t.right=Ui(e,"right",0),t.top=Ui(e,"top",0),t.bottom=Ui(e,"bottom",0)),t};const Xb=ee.prototype.add;var Mi=function(e){return Xb.call(this,e),this.sizerEventsEnable&&(e.emit("sizer.add",e,this),this.emit("add",e,this)),this};const jb={addBackground(e,t,i){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(i=t,t=void 0),t===void 0&&(t=0),Mi.call(this,e),this.backgroundChildren.push(e);var s=this.getSizerConfig(e);return s.padding=je(t),i!==void 0&&this.addChildrenMap(i,e),this},isBackground(e){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(e)!==-1}},Kb={removeFromParentSizer(){var e=this.getParentSizer();return e&&e.remove(this),this}};var dh=function(e,t){return this.childrenMap===void 0&&(this.childrenMap={}),this.childrenMap[e]=t,this},Jb=function(e){if(typeof e=="object"){var t=e;for(var e in this.childrenMap)if(this.childrenMap[e]===t)return delete this.childrenMap[e],this}return delete this.childrenMap[e],this},Zb=function(e,t){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){var i=e.shift(),s=null;if(i.charAt(0)==="#")i=i.substring(1),s=this.getByName(i,t);else if(i.indexOf("[")===-1)this.childrenMap&&(s=this.childrenMap[i]);else{var r=i.match(qb);if(r!=null&&this.childrenMap){var n=this.childrenMap[r[1]];n&&(s=n[r[2]])}}return e.length===0?s:s&&s.childrenMap?s.getElement(e):null}};const qb=/(\S+)\[(\d+)\]/i,Qb={getInnerPadding(e){return hs(this.space,e)},setInnerPadding(e,t){return os(this.space,e,t),this},getOuterPadding(e){return hs(this.getSizerConfig(this).padding,e)},setOuterPadding(e,t){return os(this.getSizerConfig(this).padding,e,t),this},getChildOuterPadding(e,t){return typeof e=="string"&&(e=this.getElement(e)),hs(this.getSizerConfig(e).padding,t)},setChildOuterPadding(e,t,i){return typeof e=="string"&&(e=this.getElement(e)),os(this.getSizerConfig(e).padding,t,i),this}};var On=function(e){return e===void 0&&(e=Math.max(this.childrenWidth,this.minWidth)),e},ty=function(e){var t,i;for(var s in this.sizerChildren)t=this.sizerChildren[s],t&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildWidth(t,e),i=t.resolveWidth(i),t.resolveChildrenWidth(i))},_n=function(e){var t=Math.max(this.childrenHeight,this.minHeight);return e===void 0&&(e=t),e},ey=function(e){var t;return e.isRexSizer?t=Math.max(e.minWidth,e.childrenWidth):e.minWidth!==void 0?t=e.minWidth:t=$(e),t},iy=function(e){var t;return e.isRexSizer?t=Math.max(e.minHeight,e.childrenHeight):e.minHeight!==void 0?t=e.minHeight:t=B(e),t},sy=function(e,t){return t},ry=function(e,t){return t},ny=function(){return 0},ay=function(){return 0},hy=function(e){e===void 0&&(e=[]);for(var t=e.length,i=this.getChildrenSizers(e),s=e.length,r=t;r<s;r++)i[r].getAllChildrenSizers(e);return e},oy=function(e){return e===void 0&&(e=[]),e};const ly={getShownChildren(e){e===void 0&&(e=[]);for(var t=this.children,i,s=0,r=t.length;s<r;s++)i=t[s],!(i.rexSizer&&i.rexSizer.hidden)&&e.push(i);return e},getAllShownChildren(e){e===void 0&&(e=[]);for(var t=this.children,i,s=0,r=t.length;s<r;s++)i=t[s],!(i.rexSizer&&i.rexSizer.hidden)&&(e.push(i),i.hasOwnProperty("isRexContainerLite")&&e.push(...i.getAllShownChildren()));return e}};var Ei=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var e=this.getChildrenSizers(),t,i=0,s=e.length;i<s;i++)t=e[i],!t.ignoreLayout&&t.preLayout()},uy=function(){return this.runLayout(),this},dy=function(e,t,i){if(this.ignoreLayout)return this;var s=!e;return s&&this.preLayout(),t=this.resolveWidth(t),s&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),i=this.resolveHeight(i),this.resize(t,i),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},cy=function(){},fy=function(e,t,i){return this._anchor&&this._anchor.updatePosition(),this},Kl=function(e){var t,i;for(var s in this.sizerChildren)t=this.sizerChildren[s],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(i=this.getExpandedChildWidth(t,e),t.isRexSizer&&(i=t.resolveWidth(i)),t.runWidthWrap(i));return this};class py extends Mt{constructor(t,i){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(i)}resetFromJSON(t){t===void 0&&(t={});var i,s;t.x!==void 0?(i=null,s=t.x):t.left!==void 0?(i=0,s=t.left):t.right!==void 0?(i=1,s=t.right):t.centerX!==void 0&&(i=.5,s=t.centerX);var r,n;t.y!==void 0?(r=null,n=t.y):t.top!==void 0?(r=0,n=t.top):t.bottom!==void 0?(r=1,n=t.bottom):t.centerY!==void 0&&(r=.5,n=t.centerY);var a,h;s!==void 0&&(s=s.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),a=parseFloat(s[0])/100,h=s[1]===""?0:parseFloat(s[1]));var o,l;n!==void 0&&(n=n.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),o=parseFloat(n[0])/100,l=n[1]===""?0:parseFloat(n[1]));var u=t.width,d,c;u!==void 0&&(u=u.split("%"),d=parseFloat(u[0])/100,c=u[1]===""?0:parseFloat(u[1]));var f=t.height,p,v;f!==void 0&&(f=f.split("%"),p=parseFloat(f[0])/100,v=f[1]===""?0:parseFloat(f[1])),this.setAlign(i,r),this.setPercentage(a,o),this.setOffset(h,l),this.setSizePercentage(d,p),this.setSizePadding(c,v);var g=t.onResizeCallback,m=t.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,m);var b=t.onUpdateViewportCallback,S=t.onUpdateViewportCallbackScope;return b!==void 0&&this.setUpdateViewportCallback(b,S),this.autoAnchor(t.enable),this}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,i){return this.alignX=t,this.alignY=i,this}setPercentage(t,i){return this.percentageX=t,this.percentageY=i,this}setOffset(t,i){return this.offsetX=t,this.offsetY=i,this}setSizePercentage(t,i){return this.percentageWidth=t,this.percentageHeight=i,this}setSizePadding(t,i){return this.paddingWidth=t,this.paddingHeight=i,this}setResizeCallback(t,i){return this.onResizeCallback=t,this.onResizeCallbackScope=i,this}setUpdateViewportCallback(t,i){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=i,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,i=this.onResizeCallbackScope,s=this.anchorWidth,r=this.anchorHeight;if(!(s===void 0&&r===void 0||!t)){var n=this.parent;s===void 0&&(s=n.width),r===void 0&&(r=n.height),i?t.call(i,s,r,n,this):t(s,r,n,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){this.viewport=Es(this.scene,this.viewport?this.viewport:!0);var t=this.onUpdateViewportCallback,i=this.onUpdateViewportCallbackScope;t&&(i?t.call(i,this.viewport,this.parent,this):t(this.viewport,this.parent,this))}}var vy=function(e){e===void 0&&(e={});var t=e.hasOwnProperty("width"),i=e.hasOwnProperty("height"),s=e.hasOwnProperty("onResizeCallback");return(t||i)&&!s&&(e.onResizeCallback=function(r,n,a){t&&a.setMinWidth(r),i&&a.setMinHeight(n),a.layout()}),this._anchor===void 0?this._anchor=new py(this,e):this._anchor.resetFromJSON(e),this};const gy=Phaser.Utils.Objects.GetValue,Ge=Phaser.Utils.Objects.GetAdvancedValue,ch=Phaser.Math.Linear;class cs extends Si{constructor(t,i){super(t,i),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(gy(t,"mode",0)),this.setScaleRange(Ge(t,"start",void 0),Ge(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=my[t]),this.mode=t,this}setScaleRange(t,i){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=Ge(t,"x",this.parent.scaleX),this.startY=Ge(t,"y",this.parent.scaleY)),typeof i=="number"?(this.endX=i,this.endY=i):(this.endX=Ge(i,"x",void 0),this.endY=Ge(i,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var i=this.repeat;return this.mode===2&&i!==-1&&(i=(i+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(i),super.start(),this}updateGameObject(t,i){var s=i.t;i.isOddIteration&&(s=1-s),s=this.easeFn(s),this.hasScaleX&&(t.scaleX=ch(this.startX,this.endX,s)),this.hasScaleY&&(t.scaleY=ch(this.startY,this.endY,s))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const my={stop:0,destroy:1,yoyo:2};var Cy=function(e,t,i,s,r){s===void 0&&(s="Cubic");var n,a;switch(i){case 0:case"x":n={x:0},a={x:e.scaleX};break;case 1:case"y":n={y:0},a={y:e.scaleY};break;default:n=0,a=e.scale;break}var h={mode:0,start:n,end:a,duration:t,ease:s};return r===void 0?r=new cs(e,h):r.resetFromJSON(h),r.restart(),r},by=function(e,t,i,s,r,n){s===void 0&&(s="Linear"),r instanceof cs&&(n=r,r=void 0),r===void 0&&(r=!0);var a={};switch(a.mode=r?1:0,i){case 0:case"x":a.end={x:0};break;case 1:case"y":a.end={y:0};break;default:a.end=0;break}return a.duration=t,a.ease=s,n===void 0?n=new cs(e,a):n.resetFromJSON(a),n.restart(),n},yy=function(e,t,i,s,r,n,a){i===void 0&&(i=1.2),s===void 0&&(s=0),n===void 0&&(n="Cubic");var h,o;switch(r){case 0:case"x":h={x:e.scaleX},o={x:i};break;case 1:case"y":h={y:e.scaleX},o={y:i};break;default:h=e.scaleX,o=i;break}var l={mode:2,start:h,end:o,duration:t/2,ease:n,repeat:s};return a===void 0?a=new cs(e,l):a.resetFromJSON(l),a.restart(),a};const ar=Phaser.Utils.Objects.IsPlainObject;var hr=function(e,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)}),t.on("update",function(){var i=e.getParentSizer();i&&i.resetChildPositionState(e)})};const Sy={popUp(e,t,i){if(ar(e)){var s=e;e=s.duration,t=s.orientation,i=s.ease}var r=this._scale===void 0;return this._scale=Cy(this,e,t,i,this._scale),r&&hr(this,this._scale),this._scale.completeEventName="popup.complete",this},popUpPromise(e,t,i){return this.popUp(e,t,i),et(this._scale)},scaleDownDestroy(e,t,i,s){if(ar(e)){var r=e;e=r.duration,t=r.orientation,i=r.ease,s=r.destroy}var n=this._scale===void 0;return this._scale=by(this,e,t,i,s,this._scale),n&&hr(this,this._scale),this._scale.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(e,t,i,s){return this.scaleDownDestroy(e,t,i,s),et(this._scale)},scaleDown(e,t,i){return this.scaleDownDestroy(e,t,i,!1),this},scaleDownPromise(e,t,i){return this.scaleDown(e,t,i),et(this._scale)},scaleYoyo(e,t,i,s,r){if(ar(e)){var n=e;e=n.duration,t=n.peakValue,i=n.repeat,s=n.orientation,r=n.ease}var a=this._scale===void 0;return this._scale=yy(this,e,t,i,s,r,this._scale),a&&hr(this,this._scale),this._scale.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(e,t,i,s,r){return this.scaleYoyo(e,t,i,s,r),et(this._scale)}},xy=Phaser.Utils.Objects.GetValue,fh=Phaser.Utils.Objects.GetAdvancedValue,Ty=Phaser.Math.Linear;class Ur extends Si{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(xy(t,"mode",0)),this.setAlphaRange(fh(t,"start",this.parent.alpha),fh(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=ky[t]),this.mode=t,this}setAlphaRange(t,i){return this.alphaStart=t,this.alphaEnd=i,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,i){var s=i.t;i.isOddIteration&&(s=1-s),t.alpha=Ty(this.alphaStart,this.alphaEnd,s)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const ky={stop:0,destroy:1,yoyo:2},Py=Phaser.Utils.Objects.IsPlainObject;var wy=function(e,t,i,s){var r,n;Py(i)?(r=i.start,n=i.end):n=i,r===void 0&&(r=0),n===void 0&&(n=1);var a={mode:0,start:r,end:n,duration:t};return s===void 0?s=new Ur(e,a):s.resetFromJSON(a),s.restart(),s},My=function(e,t,i,s){i instanceof Ur&&(s=i,i=void 0),i===void 0&&(i=!0);var r={mode:i?1:0,end:0,duration:t};return s===void 0?s=new Ur(e,r):s.resetFromJSON(r),s.restart(),s};const ph=Phaser.Utils.Objects.IsPlainObject;var vh=function(e,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)}),t.on("update",function(){var i=e.getParentSizer();i&&i.resetChildAlphaState(e)})};const Ey={fadeIn(e,t){if(ph(e)){var i=e;e=i.duration,t=i.alpha}var s=this._fade===void 0;return this._fade=wy(this,e,t,this._fade),s&&vh(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(e,t){return this.fadeIn(e,t),et(this._fade)},fadeOutDestroy(e,t){if(ph(e)){var i=e;e=i.duration,t=i.destroy}var s=this._fade===void 0;return this._fade=My(this,e,t,this._fade),s&&vh(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(e,t){return this.fadeOutDestroy(e,t),et(this._fade)},fadeOut(e){return this.fadeOutDestroy(e,!1),this},fadeOutPromise(e){return this.fadeOut(e),et(this._fade)}},Oy=Phaser.Utils.Objects.GetValue,De=Phaser.Utils.Objects.GetAdvancedValue,gh=Phaser.Math.Linear;class fs extends Si{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(Oy(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var i=De(t,"x",void 0),s=De(t,"y",void 0);this.setTargetPosition(i,s)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=_y[t]),this.mode=t,this}setTargetPosition(t,i){if(typeof t=="number"||typeof i=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=i;else{var s=t;this.startX=De(s,"startX",void 0),this.startY=De(s,"startY",void 0),this.endX=De(s,"endX",void 0),this.endY=De(s,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,i){var s=i.t;i.isOddIteration&&(s=1-s),s=this.easeFn(s),this.hasMoveX&&(t.x=gh(this.startX,this.endX,s)),this.hasMoveY&&(t.y=gh(this.startY,this.endY,s))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const _y={stop:0,destroy:1,yoyo:2};var ps=function(e,t){if(typeof e=="number")return e;var i=e[0],s=parseFloat(e.substr(2));switch(i){case"+":return t+s;case"-":return t-s;case"*":return t*s;case"/":return t/s}},Ry=function(e,t,i,s,r,n,a){n instanceof fs&&(a=n,n=void 0),n===void 0&&(n=!1);var h={};return h.mode=n?1:0,i!==void 0&&(h.startX=e.x,h.endX=ps(i,e.x)),s!==void 0&&(h.startY=e.y,h.endY=ps(s,e.y)),h.duration=t,h.ease=r===void 0?"Linear":r,a===void 0?a=new fs(e,h):a.resetFromJSON(h),a.restart(),a},Ly=function(e,t,i,s,r,n,a){n instanceof fs&&(a=n,n=void 0),n===void 0&&(n=!1);var h={};return h.mode=n?1:0,i!==void 0&&(h.startX=ps(i,e.x),h.endX=e.x),s!==void 0&&(h.startY=ps(s,e.y),h.endY=e.y),h.duration=t,h.ease=r===void 0?"Linear":r,a===void 0?a=new fs(e,h):a.resetFromJSON(h),a.restart(),a};const mh=Phaser.Utils.Objects.IsPlainObject,Ch=Phaser.Math.Distance.Between;var bh=function(e,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)}),t.on("update",function(){var i=e.getParentSizer();i&&i.resetChildPositionState(e)})};const By={moveFrom(e,t,i,s,r){if(mh(e)){var n=e;t=n.x,i=n.y,n.hasOwnProperty("speed")?e=Ch(t,i,this.x,this.y)*1e3/n.speed:e=n.duration,s=n.ease}var a=this._easeMove===void 0;return this._easeMove=Ly(this,e,t,i,s,r,this._easeMove),a&&bh(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(e,t,i,s,r){return this.moveFrom(e,t,i,s,r),et(this._easeMove)},moveFromDestroy(e,t,i,s){return this.moveFrom(e,t,i,s,!0),this},moveFromDestroyPromise(e,t,i,s){return this.moveFromDestroy(e,t,i,s),et(this._easeMove)},moveTo(e,t,i,s,r){if(mh(e)){var n=e;t=n.x,i=n.y,n.hasOwnProperty("speed")?e=Ch(t,i,this.x,this.y)*1e3/n.speed:e=n.duration,s=n.ease}var a=this._easeMove===void 0;return this._easeMove=Ry(this,e,t,i,s,r,this._easeMove),a&&bh(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(e,t,i,s,r){return this.moveTo(e,t,i,s,r),et(this._easeMove)},moveToDestroy(e,t,i,s){return this.moveTo(e,t,i,s,!0),this},moveToDestroyPromise(e,t,i,s){return this.moveToDestroy(e,t,i,s,!0),et(this._easeMove)}},Rt=Phaser.Utils.Objects.GetValue;class Iy extends gs{constructor(t,i){super(t,i),this.timer=new bo,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(Rt(t,"timer")),this.setEnable(Rt(t,"enable",!0)),this.setMode(Rt(t,"mode",1)),this.isRunning=Rt(t,"isRunning",!1),this.setMagnitudeMode(Rt(t,"magnitudeMode",1)),this.setDuration(Rt(t,"duration",500)),this.setMagnitude(Rt(t,"magnitude",10)),this.ox=Rt(t,"ox",void 0),this.oy=Rt(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=Gy[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=Dy[t]),this.magnitudeMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,i){if(typeof t!="number"){var s=t;i=Rt(s,"magnitude",void 0),t=Rt(s,"duration",void 0)}return i!==void 0&&this.setMagnitude(i),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,i){return this.start(t,i),this}update(t,i){if(!this.isRunning||!this.enable)return this;var s=this.parent;if(!s.active)return this;if(this.timer.update(t,i),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=s.x,this.oy=s.y);var r=this.magnitude;this.magnitudeMode===1&&(r*=1-this.timer.t);var n=Math.random()*Math.PI*2,a=Math.cos(n)*r,h=Math.sin(n)*r;s.setPosition(this.ox+a,this.oy+h)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;return this.ox===t.x&&this.oy===t.y?this:(t.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}}const Gy={effect:0,behavior:1},Dy={constant:0,decay:1},Ay=Phaser.Utils.Objects.IsPlainObject;var $y=function(e,t){t.on("complete",function(){e.emit("shake.complete",e)})};const Vy={shake(e,t,i){if(Ay(e)){var s=e;e=s.duration,t=s.magnitude,i=s.magnitudeMode}return this._shake===void 0&&(this._shake=new Iy(this,{mode:0,magnitudeMode:1}),$y(this,this._shake)),e!==void 0&&this._shake.setDuration(e),t!==void 0&&this._shake.setMagnitude(t),i!==void 0&&this._shake.setMagnitudeMode(i),this._shake.shake(),this},shakePromise(e,t){return this.shake(e,t),et(this._shake)}},yh=Phaser.Utils.Objects.IsPlainObject;class zy extends Mt{constructor(t,i){super(t,i),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var i=this.easeTasks[t];return i===void 0&&(i=new en(this.parent),this.easeTasks[t]=i,i.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),i}easeTo(t,i,s,r){if(yh(t)){var n=t;t=n.key,i=n.value,s=n.duration,r=n.ease;var a=n.speed;s===void 0&&a!==void 0&&(s=Math.abs(i-this.parent.data.values[t])/a*1e3)}s===void 0&&(s=1e3),r===void 0&&(r="Linear");var h=this.getEaseTask(t);return h.restart({key:t,to:i,duration:s,ease:r}),this}easeFrom(t,i,s,r){if(yh(t)){var n=t;t=n.key,i=n.value,s=n.duration,r=n.ease;var a=n.speed;s===void 0&&a!==void 0&&(s=Math.abs(i-this.parent.data.values[t])/a*1e3)}s===void 0&&(s=1e3),r===void 0&&(r="Linear");var h=this.getEaseTask(t);return h.restart({key:t,from:i,duration:s,ease:r}),this}stopEase(t,i){i===void 0&&(i=!0);var s=this.easeTasks[t];return s&&s.stop(i),this}stopAll(t){t===void 0&&(t=!0);for(var i in this.easeTasks)this.stopEase(i,t);return this}}var Fy=function(e,t){t.on("complete",function(i){e.emit(`easedata.${i}.complete`,e),e.emit("easedata.complete",i,e)})};const Wy={easeDataTo(e,t,i,s){return this._easeData||(this._easeData=new zy(this),Fy(this,this._easeData)),this._easeData.easeTo(e,t,i,s),this},easeDataToPromise(e,t,i,s){return this.easeDataTo(e,t,i,s),Gl(this._easeData,`complete-${e}`)},stopEaseData(e,t){return this._easeData?(this._easeData.stopEase(e,t),this):this},stopAllEaseData(e){return this._easeData?(this._easeData.stopAll(e),this):this}};var Pe=function(e){Zl(e,!1)},we=function(e){Zl(e,!0)},Jl=function(e){if(!e)return!1;var t=Ms(e);return!t.hidden},Zl=function(e,t){if(!!e){var i=Ms(e);i.hidden=t;var s=Qt(e);s?s.setChildVisible(e,!t):e.setVisible(!t)}};const Yy={show(e){return e===void 0&&(e=this),Pe(e),this},hide(e){return e===void 0&&(e=this),we(e),this},isShow(e){return e===void 0&&(e=this),Jl(e)}};var Xr=function(e,t,i,s,r){if(!e||!e.getBounds||s&&!s(e,t,i))return!1;var n=jl(e,!0);return!(!n.contains(t,i)||r&&!r(e,t,i))},ql=function(e,t,i,s){if(t)return Xr(e,t.x,t.y,i,s);for(var r=e.scene.input.manager,n=r.pointersTotal,a=r.pointers,h=0;h<n;h++)if(t=a[h],Xr(e,t.x,t.y,i,s))return!0;return!1},Ql=function(e,t){return t===void 0&&(t=this),ql(t,e)},Rn=function(e){return e&&typeof e=="function"},$t=function(e){return Object.prototype.toString.call(e)==="[object Array]"},jr=function(e,t,i,s,r){return Xr(e,t,i,Ny(s),Hy(r))},Sh=function(e){var t=e.rexSizer&&e.rexSizer.hidden;return!t},Ny=function(e){return e?function(t,i,s){return Sh(t)?(e(t,i,s),!0):!1}:Sh},Hy=function(e){return e},Uy=function(e,t,i,s,r){if(Rn(i)||(r=i,i=void 0,s=void 0),r===void 0&&(this.sizerChildren?r=this.sizerChildren:r=this.children),$t(r)){for(var n,a=0,h=r.length;a<h;a++)if(n=r[a],jr(n,e,t,i,s))return n}else{var n;for(var o in r)if(n=r[o],jr(n,e,t,i,s))return n}return null};const Xy={getParentSizer(e,t){return this.getParent(e,t)},getTopmostSizer(e){return this.getTopmostParent(e)}};var de=function(e,t,i){!e||t===void 0&&i===void 0||(e.resize?(t===void 0&&(t=e.width),i===void 0&&(i=e.height),e.resize(t,i)):(t!==void 0&&(e.displayWidth=t),i!==void 0&&(e.displayHeight=i)))},jy=function(e,t){return t===void 0?t={}:t===!0&&(t=Ky),t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.width=e.width,t.height=e.height,t.displayWidth=e.displayWidth,t.displayHeight=e.displayHeight,t},Ky={},Oi=function(e){this.sizerEventsEnable&&(jy(e,this.getChildPrevState(e)),this.layoutedChildren.push(e))},_i=function(e,t,i,s,r,n,a,h){_s(e,t,i,s,r,n),a!==void 0&&(e.x+=a),h!==void 0&&(e.y+=h),this.resetChildPositionState(e),this.sizerEventsEnable&&e.emit("sizer.postlayout",e,this)};const Jy=Phaser.Display.Align.CENTER;var Zy=function(){if(this.backgroundChildren!==void 0)for(var e=this.backgroundChildren,t=this.left,i=this.top,s=this.width,r=this.height,n,a,h,o,l,u,d,c=0,f=e.length;c<f;c++)n=e[c],a=n.rexSizer,!a.hidden&&(h=a.padding,Oi.call(this,n),o=t+h.left,l=i+h.top,u=s-h.left-h.right,d=r-h.top-h.bottom,de(n,u,d),_i.call(this,n,o,l,u,d,Jy))},qy=function(e,t){var i=typeof e;return i==="string"?e=this.getElement(e):(e===void 0||i!="object")&&(t=e,e=this),t===void 0&&(t=!0),e.input&&e.input.hasOwnProperty("draggable")?e.input.draggable=t:t&&(e.setInteractive(),e.scene.input.setDraggable(e),e.on("drag",function(s,r,n){var a=this.getTopmostSizer();a.x+=r-e.x,a.y+=n-e.y,a.emit("sizer.drag",s,r,n)},this).on("dragstart",function(s,r,n){var a=this.getTopmostSizer();a.emit("sizer.dragstart",s,r,n)},this).on("dragend",function(s,r,n,a){var h=this.getTopmostSizer();h.emit("sizer.dragend",s,r,n,a)},this)),this};const ni=Phaser.Utils.Objects.GetValue;class Ls extends Mt{constructor(t,i){super(t,i),this._enable=void 0,t.setInteractive(ni(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(ni(t,"enable",!0)),this.setMode(ni(t,"mode",1)),this.setClickInterval(ni(t,"clickInterval",100)),this.setDragThreshold(ni(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointeroutr",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=Qy[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,i,s,r){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,r))}onRelease(t,i,s,r){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,r),this.pointer=void 0)}onPointOut(t,i){this.pointer===t&&this.cancel()}onMove(t,i,s,r){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,i,s){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,i,s),this;this.pointer=void 0;var r=this.lastClickTime;return r!==void 0&&t-r<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,i,s),this)}cancel(){return this.pointer=void 0,this}onOver(t,i,s,r){return this.enable?(this.emit("over",this,this.parent,t,r),this):this}onOut(t,i){return this.enable?(this.emit("out",this,this.parent,t,i),this):this}}const Qy={press:0,pointerdown:0,release:1,pointerup:1},tS={onClick(e,t,i){return e?(this._click===void 0&&(this._click=new Ls(this,i)),this._click.on("click",e,t),this):this},offClick(e,t){return this._click===void 0?this:(this._click.off("click",e,t),this)},enableClick(e){return this._click===void 0?this:(this._click.setEnable(e),this)},disableClick(){return this._click===void 0?this:(this._click.setEnable(!1),this)}},Xi=Phaser.Utils.Objects.GetValue;class eS extends Mt{constructor(t,i){super(t,i),this._enable=void 0;var s=Xi(i,"inputConfig",void 0);s&&t.setInteractive(s),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(Xi(t,"enable",!0)),this.setMode(Xi(t,"mode",1)),this.setClickInterval(Xi(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var i=this.parent.scene;i.input.off("pointerdown",this.onPress,this),i.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=iS[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var i=this.parent,s=i.input?kl:ql;return s(i,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,i){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,i),this;var s=this.lastClickTime;return s!==void 0&&t-s<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,i),this)}}const iS={press:0,pointerdown:0,release:1,pointerup:1},sS={onClickOutside(e,t,i){return e?(this._clickOutside===void 0&&(this._clickOutside=new eS(this,i)),this._clickOutside.on("clickoutside",e,t),this):this},offClickOutside(e,t){return this._clickOutside===void 0?this:(this._clickOutside.off("clickoutside",e,t),this)},enableClickOutside(e){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(e),this)},disableClickOutside(){return this._clickOutside===void 0?this:(this._clickOutside.setEnable(!1),this)}};class Ee{constructor(t){var i=bt(t,"states",void 0);i&&this.addStates(i);var s=bt(t,"extend",void 0);if(s)for(var r in s)(!this.hasOwnProperty(r)||this[r]===void 0)&&(this[r]=s[r]);var n=bt(t,"eventEmitter",void 0),a=bt(t,"EventEmitterClass",void 0);this.setEventEmitter(n,a),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(bt(t,"enable",!0)),this.start(bt(t,"start",void 0));var i=bt(t,"init",void 0);return i&&i.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var i="exit_"+this._prevState,s=this[i];s&&s.call(this),this.emit(i,this)}if(this._stateLock=!1,this._state!=null){var r="enter_"+this._state,n=this[r];n&&n.call(this),this.emit(r,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,i=this["next_"+this.state];return i&&(typeof i=="string"?t=i:t=i.call(this)),this.goto(t),this}addState(t,i){typeof t!="string"&&(i=t,t=i.name);var s=i.next;s&&(this["next_"+t]=s);var r=i.exit;r&&(this["exit_"+t]=r);var n=i.enter;return n&&(this["enter_"+t]=n),this}addStates(t){if(Array.isArray(t))for(var i=0,s=t.length;i<s;i++)this.addState(t[i]);else for(var r in t)this.addState(r,t[r]);return this}runMethod(t,i,s,r,n,a){var h=this[t+"_"+this.state];if(!!h){var o=arguments.length;switch(o){case 1:return h.call(this);case 2:return h.call(this,i);case 3:return h.call(this,i,s);case 4:return h.call(this,i,s,r);case 5:return h.call(this,i,s,r,n);case 6:return h.call(this,i,s,r,n,a)}for(var l=new Array(o-1),u=1;u<o;u++)l[u-1]=arguments[u];return h.apply(this,l)}}update(t,i){this.runMethod("update",t,i)}preupdate(t,i){this.runMethod("preupdate",t,i)}postupdate(t,i){this.runMethod("postupdate",t,i)}}Object.assign(Ee.prototype,Xe);class rS extends Ee{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,i){this.remainderTime-=i,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>i?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const or=Phaser.Utils.Objects.GetValue;class Kr extends Mt{constructor(t,i){super(t,i),this._enable=void 0,this.cooldown=new rS,this.parent.setInteractive(or(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.setEnable(or(t,"enable",!0)),this.setCooldown(or(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,i,s){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouched=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouched=!1)}preupdate(t,i){this.cooldown.update(t,i),this.isInTouched&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}}const nS={onTouching(e,t,i){return e?(this._inTouching===void 0&&(this._inTouching=new Kr(this,i)),this._inTouching.on("intouch",e,t),this):this},offTouching(e,t){return this._click===void 0?this:(this._inTouching.off("intouch",e,t),this)}};var tu=function(e,t,i){for(var s,r=0,n=e.length;r<n;r++)if(s=e[r],!!jr(s,t,i))return s.pointToChild(t,i);return null},ce=function(e,t,i,s,r,n,a){var h;r===void 0?h=s:h=tu(i,s,r),h&&e.emit(t,h,n,a)};const aS=Phaser.Utils.Objects.GetValue;var hS=function(e){var t=aS(e,"click",void 0);if(t!==!1){t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var i=this._childrenInteractive;this._click=new Ls(this,t),this._click.on("click",function(s,r,n,a){ce(i.eventEmitter,`${i.eventNamePrefix}click`,i.targetSizers,n.worldX,n.worldY,n,a)},this)}};const oS=Phaser.Utils.Objects.GetValue;var lS=function(e){var t=oS(e,"over",void 0);t!==!1&&this.on("pointermove",xh,this).on("pointerover",xh,this).on("pointerout",uS,this)},xh=function(e,t,i,s){var r=this._childrenInteractive,n=tu(r.targetSizers,e.worldX,e.worldY),a=r.lastOverChild;n&&a&&n===a||(r.lastOverChild=n,ce(r.eventEmitter,`${r.eventNamePrefix}out`,r.targetSizers,a,void 0,e,s),ce(r.eventEmitter,`${r.eventNamePrefix}over`,r.targetSizers,n,void 0,e,s))},uS=function(e,t){var i=this._childrenInteractive,s=i.lastOverChild;i.lastOverChild=null,ce(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,s,void 0,e,t)};const lr=Phaser.Utils.Objects.GetValue;class Ln extends gs{constructor(t,i){var s=Co(t);s===t&&(t=void 0),super(s,i),this.gameObject=t,t&&t.setInteractive(lr(i,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(lr(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(lr(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=ur,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,i){if(!!this.enable&&this.pointer===void 0){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;!s||this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=Th,this.gameObject===void 0&&(this.isTouchingAnyObject=i.length>0),this.onDragStart())}}onPointerUp(t){if(!!this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;!i||this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=ur,this.onDragEnd())}}onPointerMove(t){if(!!this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,s=this.pointer===t;!s&&i||(s&&!i?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===Th&&this.onDragEnd(),this.pointer=void 0,this.tracerState=ur,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,i){}postUpdate(t,i){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=dS,this}}const ur=0,Th=1,dS="IDLE",ye=Phaser.Utils.Objects.GetValue,cS=Phaser.Math.Distance.Between;class eu extends Ln{constructor(t,i){super(t,i);var s=this,r={states:{IDLE:{enter:function(){s.stop(),s.tapsCount=0,s.x=0,s.y=0,s.worldX=0,s.worldY=0},exit:function(){var n=s.lastPointer;s.x=n.x,s.y=n.y,s.worldX=n.worldX,s.worldY=n.worldY}},BEGIN:{enter:function(){s.start(),s.tapsCount=0,s.emit("tappingstart",s,s.gameObject,s.lastPointer)}},RECOGNIZED:{enter:function(){s.start(),s.emit("tap",s,s.gameObject,s.lastPointer),s.emit(`${s.tapsCount}tap`,s,s.gameObject,s.lastPointer)}}},init:function(){this.state=Se},eventEmitter:!1};this.setRecongizedStateObject(new Ee(r))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(ye(t,"time",250)),this.setTapInterval(ye(t,"tapInterval",200)),this.setDragThreshold(ye(t,"threshold",9)),this.setTapOffset(ye(t,"tapOffset",10));var i=ye(t,"taps",void 0);return i!==void 0?this.setTaps(i):(this.setMaxTaps(ye(t,"maxTaps",void 0)),this.setMinTaps(ye(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Se:this.state=Ae;break;case Ae:var t=this.lastPointer,i=cS(t.upX,t.upY,t.x,t.y);i>this.tapOffset&&(this.state=$e,this.state=Ae);break;case $e:this.state=Ae;break}}onDragEnd(){this.state===Ae&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=$e))}onDrag(){this.state!==Se&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Se)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===Ae){var s=this.lastPointer;if(s.isDown){var r=t-s.downTime;r>this.holdTime&&(this.state=Se)}else{var n=t-s.upTime;n>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=$e:this.state=Se)}}}postUpdate(t,i){!this.isRunning||!this.enable||this.state===$e&&(this.state=Se)}get isTapped(){return this.state===$e}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,i){return i===void 0&&(i=t),this.setMinTaps(t).setMaxTaps(i),this}}const Se="IDLE",Ae="BEGIN",$e="RECOGNIZED",kh=Phaser.Utils.Objects.GetValue;class iu extends Ln{constructor(t,i){super(t,i);var s=this,r={states:{IDLE:{enter:function(){s.x=0,s.y=0,s.worldX=0,s.worldY=0},exit:function(){var n=s.lastPointer;s.x=n.x,s.y=n.y,s.worldX=n.worldX,s.worldY=n.worldY}},BEGIN:{enter:function(){s.start()},exit:function(){s.stop()}},RECOGNIZED:{enter:function(){s.emit("pressstart",s,s.gameObject,s.lastPointer)},exit:function(){s.emit("pressend",s,s.gameObject,s.lastPointer)}}},init:function(){this.state=ji},eventEmitter:!1};this.setRecongizedStateObject(new Ee(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(kh(t,"threshold",9)),this.setHoldTime(kh(t,"time",251)),this}onDragStart(){this.state=Ph,this.holdTime===0&&(this.state=dr)}onDragEnd(){this.state=ji}onDrag(){this.state!==ji&&this.pointer.getDistance()>this.dragThreshold&&(this.state=ji)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===Ph){var s=t-this.pointer.downTime;s>=this.holdTime&&(this.state=dr)}}get isPressed(){return this.state===dr}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const ji="IDLE",Ph="BEGIN",dr="RECOGNIZED";Phaser.Utils.Objects.GetValue;const fS=Phaser.Math.Distance.Between,pS=Phaser.Math.Angle.Between,vS={getDt:function(){var e=this.scene.sys.game,t=e.loop.delta;return t},getVelocity:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=fS(t.x,t.y,e.x,e.y),s=i/(this.getDt()*.001);return s},getVelocityX:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(e.x-t.x),s=i/(this.getDt()*.001);return s},getVelocityY:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(e.y-t.y),s=i/(this.getDt()*.001);return s},getVelocityAngle:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=pS(t.x,t.y,e.x,e.y);return i}},gS={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var mS=function(e,t,i){switch(i===void 0?i={}:i===!0&&(i=CS),i.left=!1,i.right=!1,i.up=!1,i.down=!1,e=(e+360)%360,t){case 0:e<180?i.down=!0:i.up=!0;break;case 1:e>90&&e<=270?i.left=!0:i.right=!0;break;case 2:e>45&&e<=135?i.down=!0:e>135&&e<=225?i.left=!0:e>225&&e<=315?i.up=!0:i.right=!0;break;case 3:e>22.5&&e<=67.5?(i.down=!0,i.right=!0):e>67.5&&e<=112.5?i.down=!0:e>112.5&&e<=157.5?(i.down=!0,i.left=!0):e>157.5&&e<=202.5?i.left=!0:e>202.5&&e<=247.5?(i.left=!0,i.up=!0):e>247.5&&e<=292.5?i.up=!0:(e>292.5&&e<=337.5&&(i.up=!0),i.right=!0);break}return i},CS={};const cr=Phaser.Utils.Objects.GetValue,bS=Phaser.Math.RadToDeg;class Bn extends Ln{constructor(t,i){super(t,i);var s=this,r={states:{IDLE:{enter:function(){s.x=0,s.y=0,s.worldX=0,s.worldY=0},exit:function(){var n=s.lastPointer;s.x=n.x,s.y=n.y,s.worldX=n.worldX,s.worldY=n.worldY}},BEGIN:{enter:function(){s.validDrag=!1}},RECOGNIZED:{enter:function(){s.start(),s.updateDirectionStates(),s.emit("swipe",s,s.gameObject,s.lastPointer)},exit:function(){s.stop(),s.clearDirectionStates()}}},init:function(){this.state=fr},eventEmitter:!1};this.setRecongizedStateObject(new Ee(r)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(cr(t,"threshold",10)),this.setVelocityThreshold(cr(t,"velocityThreshold",1e3)),this.setDirectionMode(cr(t,"dir","8dir")),this}onDragStart(){this.state=wh}onDragEnd(){this.state=fr}onDrag(){this.state===wh&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=pr))}postUpdate(t,i){!this.isRunning||!this.enable||this.state===pr&&(this.state=fr)}get isSwiped(){return this.state===pr}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=gS[t]),this.dirMode=t,this}updateDirectionStates(){var t=bS(this.getVelocityAngle());return mS(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Bn.prototype,vS);const fr="IDLE",wh="BEGIN",pr="RECOGNIZED",vr=Phaser.Utils.Objects.GetValue,yS=Phaser.Utils.Array.SpliceOne,SS=Phaser.Math.Distance.Between,xS=Phaser.Math.Angle.Between;class su{constructor(t,i){var s=t.input.manager.pointersTotal-1;s<2&&t.input.addPointer(2-s),this.scene=t,this.setEventEmitter(vr(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(vr(t,"enable",!0)),this.bounds=vr(t,"bounds",void 0),this.tracerState=Ki,this.pointers.length=0,le(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,le(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(!!this.enable&&this.pointers.length!==2){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!i){var s=this.pointers.indexOf(t);if(s===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Ki:this.tracerState=hi,this.onDrag1Start();break;case hi:this.tracerState=zt,this.onDrag2Start();break}}}}onPointerUp(t){if(!!this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!i){var s=this.pointers.indexOf(t);if(s!==-1)switch(delete this.movedState[t.id],yS(this.pointers,s),this.tracerState){case hi:this.tracerState=Ki,this.onDrag1End();break;case zt:this.tracerState=hi,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(!!this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,s=this.pointers.indexOf(t)!==-1;if(!(!s&&i)){if(s&&!i)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case hi:this.onDrag1();break;case zt:this.onDrag2();break}}}}dragCancel(){return this.tracerState===zt&&this.onDrag2End(),this.pointers.length=0,le(this.movedState),this.tracerState=Ki,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==zt)return 0;var t=this.pointers[0],i=this.pointers[1];return SS(t.x,t.y,i.x,i.y)}get angleBetween(){if(this.tracerState!==zt)return 0;var t=this.pointers[0],i=this.pointers[1];return xS(t.x,t.y,i.x,i.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var i=t.position,s=t.prevPosition;ai.x=i.x-s.x,ai.y=i.y-s.y}else ai.x=0,ai.y=0;return ai}get centerX(){if(this.tracerState!==zt)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.x+i.x)/2}get centerY(){if(this.tracerState!==zt)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.y+i.y)/2}get prevCenterX(){if(this.tracerState!==zt)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+i.x)/2}get prevCenterY(){if(this.tracerState!==zt)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+i.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=TS,this}}Object.assign(su.prototype,Xe);var ai={};const Ki=0,hi=1,zt=2,TS="IDLE";Phaser.Utils.Objects.GetValue;const kS=Phaser.Math.RotateAround;var Mh=function(e,t,i,s){return kS(e,t,i,s),e.rotation+=s,e},PS=function(e,t,i,s){return s===void 0?s={}:s===!0&&(s=wS),i.getWorldPoint(e,t,s),s},wS={},MS=function(e,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var i=this.movementCenterX,s=this.movementCenterY,r=PS(this.centerX,this.centerY,t,!0),n=r.x,a=r.y,h=this.rotation;if(Array.isArray(e))for(var o=e,l=0,u=o.length;l<u;l++)e=o[l],e.x+=i,e.y+=s,Mh(e,n,a,h);else e.x+=i,e.y+=s,Mh(e,n,a,h);return this};const ES=Phaser.Utils.Objects.GetValue,gr=Phaser.Math.Angle.WrapDegrees,Eh=Phaser.Math.Angle.ShortestBetween,mr=Phaser.Math.RadToDeg,OS=Phaser.Math.DegToRad;class _S extends su{constructor(t,i){super(t,i);var s=this,r={states:{IDLE:{enter:function(){s.prevAngle=void 0,s.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){s.emit("rotatestart",s)},exit:function(){s.emit("rotateend",s)}}},init:function(){this.state=Oh},eventEmitter:!1};this.setRecongizedStateObject(new Ee(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(ES(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=gr(mr(this.angleBetween)),this.state=_h,this.dragThreshold===0&&(this.state=Ji)}onDrag2End(){this.state=Oh}onDrag2(){switch(this.state){case _h:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=gr(mr(this.angleBetween));this.angle=Eh(this.prevAngle,t),this.prevAngle=t,this.state=Ji}break;case Ji:var t=gr(mr(this.angleBetween));this.angle=Eh(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===Ji}get rotation(){return OS(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var RS={spinObject:MS};Object.assign(_S.prototype,RS);const Oh="IDLE",_h="BEGIN",Ji="RECOGNIZED",LS=Phaser.Utils.Objects.GetValue;var BS=function(e){var t=LS(e,"tap",void 0);if(t!==!1){var i=this._childrenInteractive;this._tap=new eu(this,t),this._tap.on("tap",function(s,r,n){ce(i.eventEmitter,`${i.eventNamePrefix}${s.tapsCount}tap`,i.targetSizers,s.worldX,s.worldY,n)},this)}};const IS=Phaser.Utils.Objects.GetValue;var GS=function(e){var t=IS(e,"press",void 0);if(t!==!1){var i=this._childrenInteractive;this._press=new iu(this,t),this._press.on("pressstart",function(s,r,n){ce(i.eventEmitter,`${i.eventNamePrefix}pressstart`,i.targetSizers,s.worldX,s.worldY,n)},this).on("pressend",function(s,r,n){ce(i.eventEmitter,`${i.eventNamePrefix}pressend`,i.targetSizers,s.worldX,s.worldY,n)},this)}};const DS=Phaser.Utils.Objects.GetValue;var AS=function(e){var t=DS(e,"swipe",void 0);if(t!==!1){t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var i=this._childrenInteractive;this._swipe=new Bn(this,t),this._swipe.on("swipe",function(s,r,n){var a=s.left?"left":s.right?"right":s.up?"up":"down";ce(i.eventEmitter,`${i.eventNamePrefix}swipe${a}`,i.targetSizers,s.worldX,s.worldY,n)},this)}};const Cr=Phaser.Utils.Objects.GetValue;var ru=function(e,t){return e.setInteractive(),e._childrenInteractive={targetSizers:Cr(t,"targets",[e]),eventEmitter:Cr(t,"eventEmitter",e),eventNamePrefix:Cr(t,"inputEventPrefix","child.")},hS.call(e,t),lS.call(e,t),BS.call(e,t),GS.call(e,t),AS.call(e,t),e},$S=function(e){return ru(this,e),this},VS=function(){for(var e=this.getAllChildren([this]),t=0,i=e.length;t<i;t++){var s=e[t];s.emit.apply(s,arguments)}return this},nu={getSizerConfig:Ms,getChildPrevState:_b,pushIntoBounds:Lb,drawBounds:Hb,resolveWidth:On,resolveChildrenWidth:ty,resolveHeight:_n,getChildWidth:ey,getChildHeight:iy,getExpandedChildWidth:sy,getExpandedChildHeight:ry,getChildrenWidth:ny,getChildrenHeight:ay,addChildrenMap:dh,addElement:dh,removeChildrenMap:Jb,getElement:Zb,getAllChildrenSizers:hy,getChildrenSizers:oy,preLayout:Ei,layout:uy,runLayout:dy,layoutChildren:cy,runWidthWrap:Kl,layoutBackgrounds:Zy,postLayout:fy,setAnchor:vy,isInTouching:Ql,pointToChild:Uy,setDraggable:qy,setChildrenInteractive:$S,broadcastEvent:VS};Object.assign(nu,Qb,jb,Kb,Xy,Sy,Ey,By,Vy,Wy,tS,sS,nS,Yy,ly);const oi=Phaser.Utils.Objects.GetValue;class Oe extends ee{constructor(t,i,s,r,n,a){super(t,i,s,2,2),this.isRexSizer=!0,this.setMinSize(r,n),this.setName(oi(a,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.layoutedChildren=void 0;var h=oi(a,"anchor",void 0);h&&this.setAnchor(h),this.setInnerPadding(oi(a,"space",0)),this.setDraggable(oi(a,"draggable",!1)),this.setSizerEventsEnable(oi(a,"sizerEvents",!1)),this.setDirty(!0)}destroy(t){if(!!this.scene){if(t)for(var i=this.getAllChildrenSizers([this]),s=0,r=i.length;s<r;s++)i[s].sizerEventsEnable=!1;super.destroy(t),le(this.backgroundChildren),le(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,i){return this.setMinWidth(t).setMinHeight(i),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-$(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+$(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+$(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-B(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+B(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+B(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(Oe.prototype,nu);var zS=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,i,s,r;for(var n in t)i=t[n],s=i.rexSizer.padding,r=this.getChildWidth(i)+s.left+s.right,e=Math.max(r,e);return e+this.space.left+this.space.right},FS=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,i,s,r;for(var n in t)i=t[n],r=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.minHeight!==void 0?i.minHeight:B(i),s=i.rexSizer.padding,r+=s.top+s.bottom,e=Math.max(r,e);return e+this.space.top+this.space.bottom},WS=function(e,t){t===void 0&&(t=this.width);var i,s=e.rexSizer;if(s.expandWidth){var r=t-this.space.left-this.space.right,n=s.padding;i=r-n.left-n.right}return i},YS=function(e,t){t===void 0&&(t=this.height);var i,s=e.rexSizer;if(s.expandHeight){var r=t-this.space.top-this.space.bottom,n=s.padding;i=r-n.top-n.bottom}return i},NS=function(e){e===void 0&&(e=[]);var t=this.sizerChildren,i;for(var s in t)i=t[s],i.isRexSizer&&e.push(i);return e},In=function(e,t){e.width<e.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${e.constructor.name}`),e.height<e.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${e.constructor.name}`)},HS=function(){var e,t,i,s=this.innerLeft,r=this.innerTop,n=this.innerWidth,a=this.innerHeight,h,o,l,u,d,c,f=this.sizerChildren;for(var p in f)e=f[p],!e.rexSizer.hidden&&(t=e.rexSizer,i=t.padding,Oi.call(this,e),e.isRexSizer?(e.runLayout(this,this.getExpandedChildWidth(e),this.getExpandedChildHeight(e)),In(e,this)):(d=void 0,c=void 0,t.expandWidth&&(d=n-i.left-i.right),t.expandHeight&&(c=a-i.top-i.bottom),de(e,d,c)),h=s+i.left,l=n-i.left-i.right,o=r+i.top,u=a-i.top-i.bottom,_i.call(this,e,h,o,l,u,t.align,t.alignOffsetX,t.alignOffsetY))};const Rh=Phaser.Utils.Objects.IsPlainObject,Ft=Phaser.Utils.Objects.GetValue,Lh=Phaser.Display.Align.CENTER,US=Phaser.Utils.String.UUID;var XS=function(e,t,i,s,r,n,a,h,o){if(Mi.call(this,e),Rh(t)){var u=t;t=Ft(u,"key",void 0),i=Ft(u,"align",Lh),h=Ft(u,"offsetX",0),o=Ft(u,"offsetY",0),s=Ft(u,"padding",0),r=Ft(u,"expand",!0),e.isRexSizer||(n=Ft(u,"minWidth",e._minWidth),a=Ft(u,"minHeight",e._minHeighted))}var l=t!==void 0;l||(t=US()),typeof i=="string"&&(i=Os[i]),i===void 0&&(i=Lh),h===void 0&&(h=0),o===void 0&&(o=0),s===void 0&&(s=0),r===void 0&&(r=!0),e.isRexSizer||(n===void 0&&(n=e._minWidth),a===void 0&&(a=e._minHeight));var u=this.getSizerConfig(e);return u.align=i,u.alignOffsetX=h,u.alignOffsetY=o,u.padding=je(s),Rh(r)?(u.expandWidth=Ft(r,"width",!1),u.expandHeight=Ft(r,"height",!1)):(u.expandWidth=r,u.expandHeight=r),e.isRexSizer||(u.expandWidth&&(e.minWidth=n===void 0?$(e):n),u.expandHeight&&(e.minHeight=a===void 0?B(e):a)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=e,l&&this.addChildrenMap(t,e),this};const jS={add:XS},KS=Phaser.Utils.Array.Remove,JS=ee.prototype.remove;var Bs=function(e,t){return this.isBackground(e)&&KS(this.backgroundChildren,e),JS.call(this,e,t),!t&&this.sizerEventsEnable&&(e.emit("sizer.remove",e,this),this.emit("remove",e,this)),this};const ZS=ee.prototype.clear;var Is=function(e){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!e&&this.sizerEventsEnable,i;if(t&&(i=this.getChildren([])),ZS.call(this,e),t)for(var s,r=0,n=i.length;r<n;r++)s=i[r],s.emit("sizer.remove",s,this),this.emit("remove",s,this);return this};const qS={remove(e,t){var i;if(typeof e=="string"){if(i=e,e=this.sizerChildren[i],!e)return this}else{if(this.getParentSizer(e)!==this)return this;i=this.childToKey(e)}return i&&(delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i]),Bs.call(this,e,t),this},removeAll(e){for(var t in this.sizerChildren)this.remove(t,e);return this},clear(e){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Is.call(this,e),this}};var au={getChildrenWidth:zS,getChildrenHeight:FS,getExpandedChildWidth:WS,getExpandedChildHeight:YS,getChildrenSizers:NS,layoutChildren:HS};Object.assign(au,jS,qS);var Gs=function(e,t){if(Array.isArray(e))return e.indexOf(t);for(var i in e)if(e[i]===t)return i;return null};const Bh=Phaser.Utils.Objects.IsPlainObject,Ve=Phaser.Utils.Objects.GetValue;class Ri extends Oe{constructor(t,i,s,r,n,a){Bh(i)?(a=i,i=Ve(a,"x",0),s=Ve(a,"y",0),r=Ve(a,"width",void 0),n=Ve(a,"height",void 0)):Bh(r)&&(a=r,r=Ve(a,"width",void 0),n=Ve(a,"height",void 0)),super(t,i,s,r,n,a),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var i=t;if(this.sizerChildren.hasOwnPropery(i))return i}else return Gs(this.sizerChildren,t);return null}}Object.assign(Ri.prototype,au);var QS=Phaser.Math.Distance.Between,vs=function(e,t,i){var s=e.width/2;return QS(s,s,t,i)<=s};const t0=Phaser.Math.Angle.Between,e0=Phaser.Math.Angle.Normalize;var Ih=function(e,t,i){if(!!this.enable&&!!e.isDown){var s=this.sizerChildren.knob;if(!!vs(s,t,i)){var r=s.width/2,n=s.startAngle,a=t0(r,r,t,i),h=s.anticlockwise?n-a:a-n,o=e0(h)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-o)<.1?this.value=o:this.easeValueTo(o)}}},i0=function(){var e=this.sizerChildren.knob;e.setInteractive().on("pointerdown",Ih,this).on("pointermove",Ih,this)};const Gh=Phaser.Math.Angle.Between,s0=Phaser.Math.Angle.Wrap;var r0=function(e,t,i){if(!(!this.enable||this.panPointer)){var s=this.sizerChildren.knob;!vs(s,t,i)||hu.call(this,e)}},n0=function(e,t,i){if(!!this.enable&&!!e.isDown){var s=this.sizerChildren.knob;switch(this.panState){case Gn:vs(s,t,i)&&hu.call(this,e);break;case lu:vs(s,t,i)?h0.call(this):ou.call(this);break}}},a0=function(e,t,i){!this.enable||this.panPointer!==e||ou.call(this)},hu=function(e){this.panPointer=e,this.panState=lu},ou=function(){this.panPointer=void 0,this.panState=Gn},h0=function(){var e=this.panPointer.prevPosition,t=this.panPointer.position,i=this.sizerChildren.knob,s=Gh(i.x,i.y,e.x,e.y),r=Gh(i.x,i.y,t.x,t.y),n=i.anticlockwise?s-r:r-s,a=s0(n)/(Math.PI*2);this.stopEaseValue(),this.value+=a};const Gn=0,lu=1;var o0=function(){var e=this.sizerChildren.knob;e.setInteractive().on("pointerdown",r0,this).on("pointermove",n0,this).on("pointerup",a0,this),this.panPointer=void 0,this.panState=Gn},l0=function(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this},uu=function(e){e===void 0&&(e=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(e):t=this.textFormatCallback.call(this.textFormatCallbackScope,e),t},u0=function(){var e=this.sizerChildren.text;return e&&this.textFormatCallback&&(e.setText(uu.call(this)),e.layout&&e.layout()),this};const d0={setTextFormatCallback:l0,getFormatText:uu,updateText:u0},Q=Phaser.Utils.Objects.GetValue,c0=Phaser.Math.Linear,Dh=Phaser.Math.Percent,f0=Phaser.Math.Snap.To;class p0 extends Ri{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexKnob",this.eventEmitter=Q(i,"eventEmitter",this);var s=Q(i,"background",void 0),r=Q(i,"text",void 0);s&&this.addBackground(s),r&&(i.textColor=void 0,i.textStrokeColor=void 0,this.setTextFormatCallback(Q(i,"textFormatCallback",void 0),Q(i,"textFormatCallbackScope",void 0)));var n=new Hl(t,i);n.setDepth(Q(i,"knobDepth",0)),n._value=-1,t.add.existing(n),this.add(n,"knob"),r&&(this.add(r,"text","center",0,!1),t.children.moveBelow(n,r)),this.addChildrenMap("background",s),this.addChildrenMap("knob",n),this.addChildrenMap("text",r);var a=Q(i,"valuechangeCallback",null);if(a!==null){var h=Q(i,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",a,h)}this.setEnable(Q(i,"enable",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(Q(i,"easeValue.duration",0)).setEaseValueFunction(Q(i,"easeValue.ease","Linear")),this.setGap(Q(i,"gap",void 0)),this.setValue(Q(i,"value",0),Q(i,"min",void 0),Q(i,"max",void 0));var o=Q(i,"input",0);switch(typeof o=="string"&&(o=v0[o]),o){case 0:o0.call(this);break;case 1:i0.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=f0(t,this.gap));var i=this.value;this.sizerChildren.knob.value=t;var s=this.value;i!==s&&(this.updateText(),this.eventEmitter.emit("valuechange",s,i,this.eventEmitter))}setValue(t,i,s){return t==null?this:(i!==void 0&&(t=Dh(t,i,s)),this.value=t,this)}addValue(t,i,s){return i!==void 0&&(t=Dh(t,i,s)),this.value+=t,this}getValue(t,i){var s=this.value;return t!==void 0&&(s=c0(t,i,s)),s}}const v0={pan:0,drag:0,click:1,none:-1};Object.assign(p0.prototype,d0,xi);const g0={arc:ws,circle:Nr,curve:lb,ellipse:ub,line:db,lines:Sb,rectangle:Tb,triangle:Pb},Ah=Phaser.Utils.Objects.GetValue,m0=Phaser.Utils.Objects.IsPlainObject,C0=function(){for(var e=this.getShapes(),t=0,i=e.length;t<i;t++)e[t].lineStyle().fillStyle()},b0={createShape(e,t){var i=g0[e],s=new i;return t&&s.setName(t),s},buildShapes(e){var t=Ah(e,"create",void 0);if(m0(t)){var i=t;for(var s in i){var r=i[s];switch(typeof r){case"number":for(var n=0;n<r;n++)this.addShape(this.createShape(s));break;case"string":this.addShape(this.createShape(s,r));break;default:for(var a=r,n=0,h=a.length;n<h;n++)this.addShape(this.createShape(s,a[n]));break}}}else if(Array.isArray(t))for(var i=t,n=0,h=i.length;n<h;n++){var o=i[n];this.addShape(this.createShape(o.type,o.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(Ah(e,"update"))},setUpdateShapesCallback(e){return e===void 0&&(e=C0),this.dirty=this.dirty||this.updateCallback!==e,this.updateCallback=e,this},updateShapes(){this.updateCallback.call(this)}},li=Phaser.Utils.Objects.GetValue,y0=Phaser.Utils.Objects.IsPlainObject;class du extends gn{constructor(t,i,s,r,n,a){y0(i)&&(a=i,i=li(a,"x",0),s=li(a,"y",0),r=li(a,"width",2),n=li(a,"height",2)),super(t,i,s,r,n),this.type=li(a,"type","rexCustomShapes"),this.buildShapes(a)}}Object.assign(du.prototype,b0);const Wt=Phaser.Utils.Objects.GetValue,S0=Phaser.Utils.Objects.IsPlainObject,x0=Phaser.Math.Clamp,T0=Phaser.Math.Linear,$h=Phaser.Math.Percent;class k0 extends du{constructor(t,i,s,r,n,a){S0(i)&&(a=i,i=Wt(a,"x",0),s=Wt(a,"y",0),r=Wt(a,"width",2),n=Wt(a,"height",2)),a===void 0&&(a={}),a.type||(a.type="rexCustomProgress"),super(t,i,s,r,n,a),this.eventEmitter=Wt(a,"eventEmitter",this);var h=Wt(a,"valuechangeCallback",null);if(h!==null){var o=Wt(a,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",h,o)}this.setEaseValuePropName("value").setEaseValueDuration(Wt(a,"easeValue.duration",0)).setEaseValueFunction(Wt(a,"easeValue.ease","Linear")),this.setValue(Wt(a,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get value(){return this._value}set value(t){t=x0(t,0,1);var i=this._value,s=i!=t;this.dirty=this.dirty||s,this._value=t,s&&this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter)}setValue(t,i,s){return t==null?this:(i!==void 0&&(t=$h(t,i,s)),this.value=t,this)}addValue(t,i,s){return i!==void 0&&(t=$h(t,i,s)),this.value+=t,this}getValue(t,i){var s=this.value;return t!==void 0&&(s=T0(t,i,s)),s}}Object.assign(k0.prototype,xi);const P0={setTransitionStartCallback(e,t){return this.onStartCallback=e,this.onStartCallbackScope=t,this},setTransitionProgressCallback(e,t){return this.onProgressCallback=e,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(e,t){return this.onCompleteCallback=e,this.onCompleteCallbackScope=t,this}},w0=Phaser.Utils.Objects.IsPlainObject,xt=Phaser.Utils.Objects.GetValue;var M0={out:0,in:1};const E0={setTransitionDirection(e){return typeof e=="string"&&(e=M0[e]),this.dir=e,this},setDuration(e){return this.duration=e,this},setEaseFunction(e){return this.easeFunction=e,this},setNextTexture(e,t){return this.nextImage.setTexture(e,t),this},transit(e,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),w0(e)){var i=e;e=xt(i,"key",void 0),t=xt(i,"frame",void 0),this.setDuration(xt(i,"duration",this.duration)).setEaseFunction(xt(i,"ease",this.easeFunction)).setTransitionDirection(xt(i,"dir",this.dir));var s=xt(i,"mask",void 0);s&&this.setMaskGameObject(s),this.setMaskEnable(s===!0);var r=xt(i,"onStart",void 0),n=xt(i,"onProgress",void 0),a=xt(i,"onComplete",void 0);(r!==void 0||n!==void 0||a!==void 0)&&this.setTransitionStartCallback(r,xt(i,"onStartScope",void 0)).setTransitionProgressCallback(n,xt(i,"onProgressScope",void 0)).setTransitionCompleteCallback(a,xt(i,"onCompleteScope",void 0))}return this.setNextTexture(e,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new en(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var Vh=function(e,t,i,s,r){switch(this.clear().fillStyle(16777215),this.shape){case 1:var n=Math.min(e,t)/2;this.fillCircle(-e*(s-.5),-t*(r-.5),n+i);break;default:this.fillRect(-(e*s)-i,-(t*r)-i,e+2*i,t+2*i);break}};const O0=Phaser.GameObjects.Graphics;class Jr extends O0{constructor(t,i,s){i===void 0&&(i=0),typeof i=="string"&&(i=_0[i]),s===void 0&&(s=0),super(t.scene),this.parent=t,this.shape=i,this.padding=s,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,i){var s=this.parent;return t===void 0&&(t=s.x),i===void 0&&(i=s.y),super.setPosition(t,i),this}resize(t,i,s){var r=this.parent;return t===void 0&&(t=r.width),i===void 0&&(i=r.height),s===void 0&&(s=this.padding),this.widthSave===t&&this.heightSave===i&&this.paddingSave===s?this:(this.widthSave=t,this.heightSave=i,this.paddingSave=s,this.originXSave=r.originX,this.originYSave=r.originY,Vh.call(this,t,i,s,r.originX,r.originY),this)}setOrigin(t,i){i===void 0&&(i=t);var s=this.parent;return t===void 0&&(t=s.originX),i===void 0&&(i=s.originY),this.originXSave===t&&this.originYSave===i?this:(this.originXSave=t,this.originYSave=i,Vh.call(this,this.widthSave,this.heightSave,this.paddingSave,t,i),this)}}const _0={rectangle:0,circle:1},R0={setMaskGameObject(e){if(!e)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(e===!0&&this.maskGameObject instanceof Jr)return this;if(this.maskGameObject===e)return this;this.removeMaskGameObject()}return e===!0&&(e=new Jr(this)),this.maskGameObject=e,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(e,t,i){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(e.setMask(this.childrenMask),i&&this.childrenMask.setInvertAlpha()):e.clearMask(),this},setCurrentImageMaskEnable(e,t){return this.setImageMaskEnable(this.currentImage,e,t),this},setNextImageMaskEnable(e,t){return this.setImageMaskEnable(this.nextImage,e,t),this},setCellImagesMaskEnable(e,t){for(var i=this.getCellImages(),s=0,r=i.length;s<r;s++)this.setImageMaskEnable(i[s],e,t);return this},setMaskEnable(e,t){return this.setImageMaskEnable(this.backImage,e,t),this.setImageMaskEnable(this.frontImage,e,t),this.setCellImagesMaskEnable(e,t),this}};var L0=function(e,t){t===void 0&&(t=",");var i;return e==="__BASE"?i=function(s,r){return`${s}${t}${r}`}:i=function(s,r){return`${e}_${s}${t}${r}`},i},B0=function(e,t,i,s,r,n){i==null&&(i="__BASE"),Rn(n)||(n=L0(i,n));for(var a=e.sys.textures.get(t),h=a.frames[i],o=h.width/s,l=h.height/r,u=0,d=0,c,f=0;f<r;f++){u=0;for(var p=0;p<s;p++)c=n(p,f),a.add(c,0,u+h.cutX,d+h.cutY,o,l),u+=o;d+=l}return{getFrameNameCallback:n,cellWidth:o,cellHeight:l,columns:s,rows:r}};const re=Phaser.Utils.Objects.GetValue,I0=Phaser.GameObjects.Image,G0=Phaser.Utils.Objects.IsPlainObject,D0=Phaser.Math.RotateAround;var A0=function(e,t,i,s){G0(t)&&(s=t,t=re(s,"columns",1),i=re(s,"rows",1));for(var r=re(s,"ImageClass",I0),n=re(s,"originX",.5),a=re(s,"originY",.5),h=re(s,"add",!0),o=re(s,"align",h),l=re(s,"objectPool",void 0),u=e.scene,d=e.texture.key,c=e.frame.name,f=B0(u,d,c,t,i),p=f.getFrameNameCallback,v=e.scaleX,g=e.scaleY,m=e.rotation,b=e.getTopLeft(),S=b.x,x=b.y,C=[],y=f.cellWidth*v,T=f.cellHeight*g,P=0;P<i;P++)for(var w=0;w<t;w++){var M,R=p(w,P);l&&l.length>0?M=l.pop().setTexture(d,R):M=new r(u,0,0,d,R),h&&u.add.existing(M);var G=S+y*w,D=x+T*P,Y=G+n*y,N=D+a*T;o&&(M.setOrigin(n,a).setPosition(Y,N).setScale(v,g).setRotation(m),D0(M,S,x,m)),C.push(M)}return C};const $0={gridCutImage(e,t,i,s){s===void 0&&(s={}),s.objectPool=this.imagesPool;for(var r=A0(e,t,i,s),n,a=0,h=r.length;a<h;a++)n=r[a],n.setVisible(!0),this.add(n);return this.cellImages=r,this.setChildLocalVisible(e,!1),r},gridCutCurrentImage(e,t,i){return this.gridCutImage(this.currentImage,e,t,i)},gridCutNextImage(e,t,i){return this.gridCutImage(this.nextImage,e,t,i)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var e=this.cellImages[0].texture,t=this.cellImages,i,s,r=0,n=t.length;r<n;r++)i=t[r],this.setChildLocalAlpha(i,1).setChildLocalScale(i,1).setChildLocalVisible(i,!1),i.clearMask(),s=i.frame.name,i.setTexture(),e.remove(s);return this.imagesPool.push(...t),t.length=0,this}};var cu={};Object.assign(cu,P0,E0,R0,$0);var V0=function(e,t,i,s){},z0=function(e,t,i,s){e.setChildLocalAlpha(t,1-s).setChildLocalAlpha(i,s)},F0=function(e,t,i,s){e.setChildLocalAlpha(t,1)};const zh=Phaser.Utils.Objects.IsPlainObject,U=Phaser.Utils.Objects.GetValue,W0=Phaser.Math.Clamp;class Y0 extends ee{constructor(t,i,s,r,n,a){zh(i)?(a=i,i=U(a,"x",0),s=U(a,"y",0),r=U(a,"key",void 0),n=U(a,"frame",void 0)):zh(n)&&(a=n,n=void 0);var h=U(a,"back",void 0),o=U(a,"front",void 0);h||(h=t.add.image(i,s,r,n)),o||(o=t.add.image(i,s,r,n));var l=U(a,"width",o.width),u=U(a,"height",o.height);super(t,i,s,l,u),h.setVisible(!1),this.addMultiple([h,o]),this.type="rexTransitionImage",this.backImage=h,this.frontImage=o,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var d=U(a,"onStart",void 0),c=U(a,"onProgress",void 0),f=U(a,"onComplete",void 0),p=U(a,"dir",0);d===void 0&&c===void 0&&f===void 0&&(d=V0,c=z0,f=F0,p=0),this.setTransitionStartCallback(d,U(a,"onStartScope",void 0)).setTransitionProgressCallback(c,U(a,"onProgressScope",void 0)).setTransitionCompleteCallback(f,U(a,"onCompleteScope",void 0)).setTransitionDirection(p).setDuration(U(a,"duration",1e3)).setEaseFunction(U(a,"ease","Linear"));var v=U(a,"mask",void 0);v&&this.setMaskGameObject(v),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get t(){return this._t}set t(t){if(t=W0(t,0,1),this._t!==t){this._t=t;var i=this.currentImage,s=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),br(this.onStartCallback,this.onStartCallbackScope,this,i,s,t)),br(this.onProgressCallback,this.onProgressCallbackScope,this,i,s,t),t===1){br(this.onCompleteCallback,this.onCompleteCallbackScope,this,i,s,t);var r=s.texture.key,n=s.frame.name;this.frontImage.setTexture(r,n),this.backImage.setTexture(r,n),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,i){return super.setOrigin(t,i),this.backImage.setOrigin(t,i),this.frontImage.setOrigin(t,i),this.maskGameObject&&this.maskGameObject.setOrigin(t,i),this}setTexture(t,i){return this.frontImage.setTexture(t,i),this.backImage.setTexture(t,i).setVisible(!1),this}}var br=function(e,t,i,s,r,n){!e||(t?e.call(t,i,s,r,n):e(i,s,r,n))};Object.assign(Y0.prototype,cu);Phaser.GameObjects.Rectangle;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;var N0=function(e){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,H0(this,e)),this},H0=function(e,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var i=t.options;i.responsive=!1,i.maintainAspectRatio=!1,i.hasOwnProperty("devicePixelRatio")||(i.devicePixelRatio=1);var s=!1;i.animation===void 0?i.animation={}:i.animation===!1&&(s=!0,i.animation={});var r=i.animation;s&&(r.duration=0);var n=r.onProgress;r.onProgress=function(h){n&&n(h),e.needRedraw()};var a=r.onComplete;return r.onComplete=function(h){a&&a(h),e.needRedraw()},t},U0=function(e){if(this.chart!==void 0)if(typeof e=="string"){for(var t=this.chart.data.datasets,i,s=0,r=t.length;s<r;s++)if(i=t[s],i.label===e)return i}else return this.chart.data.datasets[e]},X0=function(e,t){var i=this.getChartDataset(e);if(i!==void 0){if(typeof t=="string"){var s=this.chart.data.labels;if(t=s.indexOf(t),t===-1)return}return i.data[t]}},j0=function(e,t,i){if(this.chart===void 0)return this;var s=this.getChartDataset(e);if(typeof t=="string"){var r=this.chart.data.labels;if(t=r.indexOf(t),t===-1)return this}return s.data[t]=i,this},K0=function(){return this.chart===void 0?this:(this.chart.update(),this)};class J0 extends yi{constructor(t,i,s,r,n,a){super(t,i,s,r,n),this.type="rexChart",this.chart=void 0,a!==void 0&&this.setChart(a)}destroy(t){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,i){if(t===this.width&&i===this.height)return this;if(super.resize(t,i),this.chart){var s=this.chart;s.height=this.canvas.height,s.width=this.canvas.width,s.aspectRatio=s.height?s.width/s.height:null,s.update()}return this}}var Z0={setChart:N0,getChartDataset:U0,getChartData:X0,setChartData:j0,updateChart:K0};Object.assign(J0.prototype,Z0);var q0=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i=this.sizerChildren,s,r,n;if(this.orientation===0)for(var a=0,h=i.length;a<h;a++)s=i[a],!s.rexSizer.hidden&&(s.rexSizer.proportion===0||e&&s.rexSizer.proportion>0?n=this.getChildWidth(s):n=0,r=s.rexSizer.padding,n+=r.left+r.right,a>0&&(n+=this.space.item),t+=n);else for(var a=0,h=i.length;a<h;a++)s=i[a],s.hasOwnProperty("rexSizer")&&(s.rexSizer.hidden||(r=s.rexSizer.padding,n=this.getChildWidth(s)+r.left+r.right,t=Math.max(n,t)));return t+this.space.left+this.space.right},Q0=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i=this.sizerChildren,s,r,n;if(this.orientation===0)for(var a=0,h=i.length;a<h;a++)s=i[a],!s.rexSizer.hidden&&(r=s.rexSizer.padding,n=this.getChildHeight(s)+r.top+r.bottom,t=Math.max(n,t));else for(var a=0,h=i.length;a<h;a++)s=i[a],s.hasOwnProperty("rexSizer")&&(s.rexSizer.hidden||(r=s.rexSizer.padding,s.rexSizer.proportion===0||e&&s.rexSizer.proportion>0?n=this.getChildHeight(s):n=0,n+=r.top+r.bottom,a>0&&(n+=this.space.item),t+=n));return t+this.space.top+this.space.bottom},tx=function(e,t){t===void 0&&(t=this.width);var i,s=e.rexSizer,r=s.padding;if(this.orientation===0)s.proportion>0&&this.proportionLength>0&&(i=s.proportion*this.proportionLength);else if(s.expand){var n=t-this.space.left-this.space.right;i=n-r.left-r.right}return i},ex=function(e,t){t===void 0&&(t=this.height);var i,s=e.rexSizer,r=s.padding;if(this.orientation===0){if(s.expand){var n=t-this.space.top-this.space.bottom;i=n-r.top-r.bottom}}else s.proportion>0&&this.proportionLength>0&&(i=s.proportion*this.proportionLength);return i},ix=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,s=0,r=t.length;s<r;s++)i=t[s],i.isRexSizer&&e.push(i);return e},sx=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,Ei.call(this),this},rx=function(){for(var e=this.sizerChildren,t,i,s,r=this.innerLeft,n=this.innerTop,a=this.innerWidth,h=this.innerHeight,o=r,l=n,u,d,c,f,p,v,g=0,m=e.length;g<m;g++)t=this.rtl?e[m-g-1]:e[g],!t.rexSizer.hidden&&(i=t.rexSizer,s=i.padding,Oi.call(this,t),t.isRexSpace?(p=0,v=0):(p=this.getExpandedChildWidth(t),v=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,p,v),In(t,this)):de(t,p,v),p===void 0&&(p=$(t)),v===void 0&&(v=B(t)),this.orientation===0?(u=o+s.left,i.proportion===0||this.proportionLength===0?c=p:c=i.proportion*this.proportionLength,d=l+s.top,f=h-s.top-s.bottom):(u=o+s.left,c=a-s.left-s.right,d=l+s.top,i.proportion===0||this.proportionLength===0?f=v:f=i.proportion*this.proportionLength),_i.call(this,t,u,d,c,f,i.align),this.orientation===0?o+=c+s.left+s.right+this.space.item:l+=f+s.top+s.bottom+this.space.item)},nx=function(t){var t=On.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var i=t-this.childrenWidth;i>0?(i=t-this.getChildrenWidth(!1),this.proportionLength=i/this.childrenProportion):this.proportionLength=0}return t},ax=function(e,i){var i=_n.call(this,e,i);if(this.proportionLength===void 0&&this.orientation===1){var s=i-this.childrenHeight;s>0?(s=i-this.getChildrenHeight(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return i};const hx=Phaser.GameObjects.Zone;class ox extends hx{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var lx=function(e,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var s=-1,r=1/0,n=0,a=i.length;n<a;n++){var h=i[n],o;this.orientation===0?o=Math.abs(h.left-e):o=Math.abs(h.top-t),r>o&&(r=o,s=n)}var h=i[i.length-1],o;return this.orientation===0?o=Math.abs(h.right-e):o=Math.abs(h.bottom-t),r>o&&(r=o,s=n+1),s};const fu=Phaser.Utils.Objects.IsPlainObject,ne=Phaser.Utils.Objects.GetValue,Fh=Phaser.Display.Align.CENTER,ux={min:0,full:-1};var yr=function(e,t,i,s,r,n,a,h){Mi.call(this,e);var o=e.isRexSpace,l=typeof t;if(t===null)return this;if(l!=="number"){if(l==="string")t=ux[t];else if(fu(t)){var u=t;t=ne(u,"proportion",void 0),i=ne(u,"align",Fh),s=ne(u,"padding",0),r=ne(u,"expand",!1),n=ne(u,"key",void 0),a=ne(u,"index",void 0),e.isRexSizer||(this.orientation===0?h=ne(u,"minWidth",void 0):h=ne(u,"minHeight",void 0))}}typeof i=="string"&&(i=Os[i]),t===void 0&&(t=o?1:0),i===void 0&&(i=Fh),s===void 0&&(s=0),r===void 0&&(r=!1),h===void 0&&(o?h=0:e.isRexSizer||(this.orientation===0?h=e._minWidth:h=e._minHeight));var u=this.getSizerConfig(e);return u.proportion=t,u.align=i,u.padding=je(s),u.expand=r,a===void 0||a>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(a,0,e),!e.isRexSizer&&t>0&&(this.orientation===0?e.minWidth=h===void 0?$(e):h:e.minHeight=h===void 0?B(e):h),n!==void 0&&this.addChildrenMap(n,e),this};const dx={add:yr,addSpace(e){return this.insertSpace(void 0,e),this},insertSpace(e,t){return t===void 0&&(t=1),yr.call(this,new ox(this.scene),{proportion:t,minWidth:0,minHeight:0,index:e}),this},insert(e,t,i,s,r,n,a,h){return fu(i)&&(i.index=e),yr.call(this,t,i,s,r,n,a,e,h),this},insertAtPosition(e,t,i,s,r,n,a,h,o){var l=lx.call(this,e,t);return l===-1&&(l=void 0),this.insert(l,i,s,r,n,a,h,o),this}},cx=Phaser.Utils.Array.Remove,fx={remove(e,t){return this.getParentSizer(e)!==this?this:(cx(this.sizerChildren,e),Bs.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,Is.call(this,e),this}};var pu={getChildrenWidth:q0,getChildrenHeight:Q0,getExpandedChildWidth:tx,getExpandedChildHeight:ex,getChildrenSizers:ix,preLayout:sx,layoutChildren:rx,resolveWidth:nx,resolveHeight:ax};Object.assign(pu,dx,fx);var px=function(){for(var e=0,t=this.sizerChildren,i,s,r=0,n=t.length;r<n;r++)i=t[r],!i.rexSizer.hidden&&(s=i.rexSizer.proportion,s>0&&(e+=s));return e},vx={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},Dn=function(e){return typeof e=="string"&&(e=vx[e]),e};const Sr=Phaser.Utils.Objects.IsPlainObject,Lt=Phaser.Utils.Objects.GetValue;class Z extends Oe{constructor(t,i,s,r,n,a,h){Sr(i)?(h=i,i=Lt(h,"x",0),s=Lt(h,"y",0),r=Lt(h,"width",void 0),n=Lt(h,"height",void 0),a=Lt(h,"orientation",0)):Sr(r)?(h=r,r=Lt(h,"width",void 0),n=Lt(h,"height",void 0),a=Lt(h,"orientation",0)):Sr(a)&&(h=a,a=Lt(h,"orientation",0)),a===void 0&&(a=0),super(t,i,s,r,n,h),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(a),this.setItemSpacing(Lt(h,"space.item",0)),this.setRTL(Lt(h,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Dn(t),this}setItemSpacing(t){return this.space.item=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=px.call(this)),this._childrenProportion}}Object.assign(Z.prototype,pu);var vu=function(){return Array.prototype.reduce.call(arguments,gx,0)},gx=function(e,t){return e+t},mx=function(){if(this.rexSizer.hidden)return 0;for(var e=0,t,i=this.sizerChildren,s,r,n,a,h=0;h<this.columnCount;h++){if(a=this.columnProportions[h],t=0,a===0){for(var o=0;o<this.rowCount;o++)s=i[o*this.columnCount+h],s&&(s.rexSizer.hidden||(r=s.rexSizer.padding,n=this.getChildWidth(s)+r.left+r.right,t=Math.max(t,n)));e+=t}this.columnWidth[h]=t}var l=this.space,u=Math.max(l.indentLeftOdd,l.indentLeftEven);return e+vu(l.left,u,...l.column,l.right)},Cx=function(){if(this.rexSizer.hidden)return 0;for(var e=0,t,i=this.sizerChildren,s,r,n,a,h=0;h<this.rowCount;h++){if(a=this.rowProportions[h],t=0,a===0){for(var o=0;o<this.columnCount;o++)s=i[h*this.columnCount+o],s&&(s.rexSizer.hidden||(n=s.isRexSizer?Math.max(s.minHeight,s.childrenHeight):s.hasOwnProperty("minHeight")?s.minHeight:B(s),r=s.rexSizer.padding,n+=r.top+r.bottom,t=Math.max(t,n)));e+=t}this.rowHeight[h]=t}var l=this.space,u=Math.max(l.indentTopOdd,l.indentTopEven);return e+vu(l.top,u,...l.row,l.bottom)},bx=function(e,t){var i,s=e.rexSizer;if(s.expand){var r=s.padding;i=t-r.left-r.right}return i},yx=function(e,t){var i,s=e.rexSizer;if(s.expand){var r=s.padding;i=t-r.top-r.bottom}return i},Sx=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,s=0,r=t.length;s<r;s++)i=t[s],i&&i.isRexSizer&&e.push(i);return e},xx=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Ei.call(this),this},Tx=function(){for(var e,t,i,s=this.innerLeft,r=this.innerTop,n,a=r,h,o,l,u,d,c,f=this.space.column,p=this.space.row,v=this.space.indentLeftOdd,g=this.space.indentLeftEven,m=this.space.indentTopOdd,b=this.space.indentTopEven,S,x,C,y,T=0;T<this.rowCount;T++){x=this.getRowHeight(T),C=T%2?g:v,n=s+C;for(var P=0;P<this.columnCount;P++){if(S=this.getColumnWidth(P),e=this.getChildAt(P,T),!e||e.rexSizer.hidden){n+=S+f[P];continue}Oi.call(this,e),d=this.getExpandedChildWidth(e,S),c=this.getExpandedChildHeight(e,x),e.isRexSizer?(e.runLayout(this,d,c),In(e,this)):de(e,d,c),t=e.rexSizer,i=t.padding,h=n+i.left,l=S-i.left-i.right,y=P%2?b:m,o=a+y+i.top,u=x-i.top-i.bottom,_i.call(this,e,h,o,l,u,t.align),n+=S+f[P]}a+=x+p[T]}},kx=function(t){var t=On.call(this,t);if(this.proportionWidthLength===void 0){var i=this.totalColumnProportions;if(i>0){var s=t-this.childrenWidth;s>=0&&(this.proportionWidthLength=s/i)}else this.proportionWidthLength=0}return t},Px=function(e,i){var i=_n.call(this,e,i);if(this.proportionHeightLength===void 0){var s=this.totalRowProportions;if(s>0){var r=i-this.childrenHeight;r>=0&&(this.proportionHeightLength=r/s)}else this.proportionHeightLength=0}return i},wx=function(e){var t,i,s;for(var r in this.sizerChildren)t=this.sizerChildren[r],t&&t.isRexSizer&&!t.ignoreLayout&&(s=this.getColumnWidth(parseInt(r)%this.columnCount),i=this.getExpandedChildWidth(t,s),i=t.resolveWidth(i),t.resolveChildrenWidth(i))},Mx=function(e){var t,i,s;for(var r in this.sizerChildren)t=this.sizerChildren[r],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(s=this.getColumnWidth(parseInt(r)%this.columnCount),i=this.getExpandedChildWidth(t,s),t.isRexSizer&&(i=t.resolveWidth(i)),t.runWidthWrap(i));return this};const Ex=Phaser.Utils.Objects.IsPlainObject,ze=Phaser.Utils.Objects.GetValue,Wh=Phaser.Display.Align.CENTER;var Yh=function(e,t,i,s,r){if(typeof e=="number"||typeof t=="number")if(e===void 0){for(var n,a=0;a<s;a++)if(n=t*s+a,!i[n])return n}else if(t===void 0){for(var n,a=0;a<r;a++)if(n=a*s+e,!i[n])return n}else{var n=t*s+e;if(!i[n])return n}else if(t===!0){for(var n,a=0;a<s;a++)for(var h=0;h<r;h++)if(n=h*s+a,!i[n])return n}else for(var a=0,o=i.length;a<o;a++)if(!i[a])return a;return null},Ox=function(e,t,i,s,r,n,a){if(Mi.call(this,e),Ex(t)){var o=t;t=ze(o,"column",void 0),i=ze(o,"row",void 0),s=ze(o,"align",Wh),r=ze(o,"padding",0),n=ze(o,"expand",!1),a=ze(o,"key",void 0)}var h=Yh(t,i,this.sizerChildren,this.columnCount,this.rowCount);if(h===null){if(typeof t=="number"&&typeof i=="number")return this;i===!0||typeof i=="number"?this.addEmptyColumn():this.addEmptyRow(),h=Yh(t,i,this.sizerChildren,this.columnCount,this.rowCount)}typeof s=="string"&&(s=Os[s]),s===void 0&&(s=Wh),r===void 0&&(r=0),n===void 0&&(n=!0);var o=this.getSizerConfig(e);return o.align=s,o.padding=je(r),o.expand=n,this.sizerChildren[h]=e,a!==void 0&&this.addChildrenMap(a,e),this};const _x={add:Ox};var Ye=function(e,t,i,s){i===void 0&&(i=0),s===void 0&&(s=e.length-1);for(var r=i;r<=s;r++)e[r]=t;return e};const Rx={remove(e,t){if(this.getParentSizer(e)!==this)return this;var i=this.sizerChildren.indexOf(e);return i!==-1&&(this.sizerChildren[i]=null),Bs.call(this,e,t),this},removeAt(e,t,i){var s=this.getChildAt(e,t);return s&&this.remove(s,i),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--){var i=this.sizerChildren[t];!i||this.remove(i,e)}return this},clear(e){return Ye(this.sizerChildren,null),Is.call(this,e),this}},Nh=Phaser.Utils.Objects.GetValue;var Lx=function(e,t,i,s,r){if(i===void 0&&(i=0),s===void 0&&(s=0),this.columnCount=e,this.rowCount=t,this.gridCount=e*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=e*t,Ye(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=e,typeof i=="number")Ye(this.columnProportions,i);else for(var n=0;n<e;n++)this.columnProportions[n]=i[n]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof s=="number")Ye(this.rowProportions,s);else for(var n=0;n<t;n++)this.rowProportions[n]=s[n]||0;this.columnWidth=[],this.columnWidth.length=e,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=e-1;var a=Nh(r,"column",0);if(typeof a=="number")Ye(this.space.column,a);else for(var n=0,h=this.space.column.length;n<h;n++)this.space.column[n]=a[n]||0;this.space.row=[],this.space.row.length=t-1;var o=Nh(r,"row",0);if(typeof o=="number")Ye(this.space.row,o);else for(var n=0,h=this.space.row.length;n<h;n++)this.space.row[n]=o[n]||0;return this},gu=function(e,t,i){t===void 0&&(t=this.rowProportions[0]||0),i===void 0&&(i=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var s=[e*this.columnCount,0],r=0;r<this.columnCount;r++)s.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,s),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(e,0,i),this},Bx=function(e,t){return gu.call(this,this.rowCount,e,t),this},mu=function(e,t,i){t===void 0&&(t=this.columnProportions[0]||0),i===void 0&&(i=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var s=this.rowCount-1;s>=0;s--){var r=s*this.columnCount+e;this.sizerChildren.splice(r,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(e,0,i),this},Ix=function(e,t){return mu.call(this,this.columnCount,e,t),this},Cu={getChildrenWidth:mx,getChildrenHeight:Cx,getExpandedChildWidth:bx,getExpandedChildHeight:yx,getChildrenSizers:Sx,preLayout:xx,layoutChildren:Tx,resolveWidth:kx,resolveHeight:Px,resolveChildrenWidth:wx,runWidthWrap:Mx,resetGrid:Lx,inseryEmptyRow:gu,addEmptyRow:Bx,insertEmptyColumn:mu,addEmptyColumn:Ix};Object.assign(Cu,_x,Rx);var Gx=function(){for(var e=0,t,i=0;i<this.columnCount;i++)t=this.columnProportions[i],t>0&&(e+=t);return e},Dx=function(){for(var e=0,t,i=0;i<this.rowCount;i++)t=this.rowProportions[i],t>0&&(e+=t);return e};const Zi=Phaser.Utils.Objects.IsPlainObject,V=Phaser.Utils.Objects.GetValue;class Ke extends Oe{constructor(t,i,s,r,n,a,h,o,l,u){Zi(i)?(u=i,i=V(u,"x",0),s=V(u,"y",0),r=V(u,"width",void 0),n=V(u,"height",void 0),a=V(u,"column",u.col||0),h=V(u,"row",0),o=V(u,"columnProportions",0),l=V(u,"rowProportions",0)):Zi(r)?(u=r,r=V(u,"width",void 0),n=V(u,"height",void 0),a=V(u,"column",u.col||0),h=V(u,"row",0),o=V(u,"columnProportions",0),l=V(u,"rowProportions",0)):Zi(a)?(u=a,a=V(u,"column",u.col||0),h=V(u,"row",0),o=V(u,"columnProportions",0),l=V(u,"rowProportions",0)):Zi(o)&&(u=o,o=V(u,"columnProportions",0),l=V(u,"rowProportions",0)),super(t,i,s,r,n,u),this.type="rexGridSizer",this.resetGrid(a,h,o,l,V(u,"space",void 0)),this.setIndentLeft(V(u,"space.indentLeftOdd",0),V(u,"space.indentLeftEven",0)),this.setIndentTop(V(u,"space.indentTopOdd",0),V(u,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var d=V(u,"createCellContainerCallback");if(d)for(var s=0,c=this.rowCount;s<c;s++)for(var i=0,f=this.columnCount;i<f;i++){var p={column:i,row:s},v=d(t,i,s,p);v&&this.add(v,p)}}destroy(t){!this.scene||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,i){return this.space.indentLeftOdd=t,this.space.indentLeftEven=i,this}setIndentTop(t,i){return this.space.indentTopOdd=t,this.space.indentTopEven=i,this}setColumnProportion(t,i){return t>=this.columnProportions.length?this:(this.columnProportions[t]=i,this)}setRowProportion(t,i){return t>=this.rowProportions.length?this:(this.rowProportions[t]=i,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=Gx.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=Dx.call(this)),this._totalRowProportions}getChildAt(t,i){return this.sizerChildren[i*this.columnCount+t]}childToGridIndex(t,i){if(!t)return null;var s=this.sizerChildren.indexOf(t);return s===-1?null:(i===void 0&&(i={}),i.x=s%this.columnCount,i.y=Math.floor(s/this.columnCount),i)}getColumnWidth(t){var i=this.columnProportions[t],s=i===0?this.columnWidth[t]:i*this.proportionWidthLength;return s}getRowHeight(t){var i=this.rowProportions[t],s=i===0?this.rowHeight[t]:i*this.proportionHeightLength;return s}}Object.assign(Ke.prototype,Cu);var Ax=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},$x=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},Vx=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,s=0,r=t.length;s<r;s++)i=t[s],i!==`
`&&i.isRexSizer&&e.push(i);return e},zx=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,Ei.call(this),this},Fx=function(){for(var e=this.innerWidth,t=this.justifyPercentage,i=this.space.item,s=this.space.line,r=this.space.indentLeftOdd,n=this.space.indentLeftEven,a=this.space.indentTopOdd,h=this.space.indentTopEven,o,l,u,d=0,c,f,p=this.innerLeft,v=this.innerTop,g,m,b,S,x=this.widthWrapResult.lines,C,y,T,P,w=v,M=0,R=x.length;M<R;M++){switch(C=x[M],y=C.children,this.rtl&&y.reverse(),c=M%2?n:r,P=p+c,T=e-C.width,this.align){case 0:break;case 1:P+=T;break;case 2:P+=T/2;break;case 3:d=xr(e,T,t,y.length);break;case 4:d=xr(e,T,t,y.length),d===0&&(P+=T);break;case 5:d=xr(e,T,t,y.length),d===0&&(P+=T/2);break}for(var G=0,D=y.length;G<D;G++)o=y[G],!o.rexSizer.hidden&&(l=o.rexSizer,u=l.padding,Oi.call(this,o),g=P+u.left,G>0&&(g+=i),f=G%2?h:a,m=w+f+u.top,b=$(o),S=B(o),P=g+b+u.right+d,_i.call(this,o,g,m,b,S,l.align));w+=C.height+s}},xr=function(e,t,i,s){return t/e<=i?t/(s-1):0},Wx=function(e,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var i=this.sizerChildren,s=this.space.item,r=this.space.line,n=this.space.indentLeftOdd,a=this.space.indentLeftEven,h=this.space.indentTopOdd,o=this.space.indentTopEven,l,u,d,c=0,f,p=t.lines,v=void 0,g,m=0,b=i.length;m<b;m++){if(l=i[m],l===`
`)l=void 0,u=0,g=!0;else{if(l.rexSizer.hidden)continue;l.isRexSizer&&l.layout(),u=Yx(l),g=c<u||v===void 0}if(g){v&&(v.width=e-(c+s),t.width=Math.max(t.width,v.width),t.height+=v.height+r),v={children:[],height:0},p.push(v);var f=p.length%2?n:a;c=e-f}c-=u+s,l&&(v.children.push(l),d=Nx(l),v.height=Math.max(v.height,d))}return v&&(v.width=e-(c+s),t.width=Math.max(t.width,v.width),t.height+=v.height),t.height+=Math.max(h,o),t},Yx=function(e){var t=e.rexSizer.padding;return $(e)+t.left+t.right},Nx=function(e){var t=e.rexSizer.padding;return B(e)+t.top+t.bottom},Hx=function(e){var t=e-this.space.left-this.space.right;this.widthWrapResult=Wx.call(this,t,this.widthWrapResult),Kl.call(this,e)};const Hh=Phaser.Math.Distance.Between;var Ux=function(e,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var s=-1,r=1/0,n=0,a=i.length;n<a;n++){var h=i[n];if(!(Math.abs(h.centerY-t)>h.height/2)){var l=Hh(h.left,h.centerY,e,t);r>l&&(r=l,s=n);var o=i[n+1];if(!(o&&o.y===h.y)){var l=Hh(h.right,h.centerY,e,t);r>l&&(r=l,s=n+1)}}}return s};const Xx=Phaser.Utils.Objects.IsPlainObject,Tr=Phaser.Utils.Objects.GetValue,jx=Phaser.Display.Align.CENTER;var kr=function(e,t,i,s){if(e===`
`)return this.addNewLine(),this;if(Mi.call(this,e),Xx(t)){var r=t;t=Tr(r,"padding",0),i=Tr(r,"key",void 0),s=Tr(r,"index",void 0)}t===void 0&&(t=0);var r=this.getSizerConfig(e);return r.align=jx,r.padding=je(t),s===void 0||s>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(s,0,e),i!==void 0&&this.addChildrenMap(i,e),this};const Kx={add(e,t,i){if($t(e))for(var s=e,r=0,n=s.length;r<n;r++)kr.call(this,s[r],t);else kr.call(this,e,t,i);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(e,t,i,s){return kr.call(this,t,i,s,e),this},insertAtPosition(e,t,i,s,r){var n=Ux.call(this,e,t);return n===-1&&(n=void 0),this.insert(n,i,s,r),this}},Jx=Phaser.Utils.Array.Remove,Zx={remove(e,t){return this.getParentSizer(e)!==this?this:(Jx(this.sizerChildren,e),Bs.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,Is.call(this,e),this}};var bu={getChildrenWidth:Ax,getChildrenHeight:$x,getChildrenSizers:Vx,preLayout:zx,layoutChildren:Fx,runWidthWrap:Hx};Object.assign(bu,Kx,Zx);var qx=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,i,s,r=0,n=e.length;r<n;r++)i=e[r],i!==`
`&&(s=this.getChildWidth(i),t=Math.max(s,t));return t},Qx=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,i,s,r=0,n=e.length;r<n;r++)i=e[r],i!==`
`&&(s=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:B(i),t=Math.max(s,t));return t};const Uh=Phaser.Utils.Objects.IsPlainObject,tt=Phaser.Utils.Objects.GetValue;class Li extends Oe{constructor(t,i,s,r,n,a){Uh(i)?(a=i,i=tt(a,"x",0),s=tt(a,"y",0),r=tt(a,"width",void 0),n=tt(a,"height",void 0)):Uh(r)&&(a=r,r=tt(a,"width",void 0),n=tt(a,"height",void 0)),super(t,i,s,r,n,a),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(tt(a,"orientation",0)),this.setItemSpacing(tt(a,"space.item",0)),this.setLineSpacing(tt(a,"space.line",0)),this.setIntentLeft(tt(a,"space.indentLeftOdd",0),tt(a,"space.indentLeftEven",0)),this.setIntentTop(tt(a,"space.indentTopOdd",0),tt(a,"space.indentTopEven",0)),this.setAlign(tt(a,"align",0)),this.setJustifyPercentage(tt(a,"justifyPercentage",.25)),this.setRTL(tt(a,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Dn(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,i){return this.space.indentLeftOdd=t,this.space.indentLeftEven=i,this}setIntentTop(t,i){return this.space.indentTopOdd=t,this.space.indentTopEven=i,this}setAlign(t){return typeof t=="string"&&(t=tT[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=qx.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=Qx.call(this)),this._maxChildHeight}}const tT={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(Li.prototype,bu);var mi=function(e,t,i,s){var r=new Jr(t,i,s);if(e&&!e.isRexSizer){var n=r.createGeometryMask();e.setMask(n),this.once("destroy",function(){e.setMask(),n.destroy()})}return this.pin(r),r};const Bt=Phaser.Utils.Objects.GetValue;class yu extends Z{constructor(t,i){super(t,i),this.type="rexLabel";var s=Bt(i,"background",void 0),r=Bt(i,"icon",void 0),n=Bt(i,"iconMask",void 0),a=Bt(i,"text",void 0),h=Bt(i,"action",void 0),o=Bt(i,"actionMask",void 0),l=Bt(i,"align",void 0),u=Bt(i,"space.icon",0),d=Bt(i,"space.text",0);if(s&&this.addBackground(s),(l==="right"||l==="bottom"||l==="center")&&this.addSpace(),r){var c;this.orientation===0?(a||h)&&(c={right:u}):(a||h)&&(c={bottom:u}),this.add(r,0,"center",c),n&&(n=mi.call(this,r,r,1))}if(a){var f=Bt(i,"expandTextWidth",!1),p=Bt(i,"expandTextHeight",!1),v,c,g;this.orientation===0?(v=f?1:0,h&&(c={right:d}),g=p):(v=p?1:0,h&&(c={bottom:d}),g=f),this.add(a,v,"center",c,g)}h&&(this.add(h),o&&(o=mi.call(this,h,h,1))),l==="center"&&this.addSpace(),this.addChildrenMap("background",s),this.addChildrenMap("icon",r),this.addChildrenMap("iconMask",n),this.addChildrenMap("text",a),this.addChildrenMap("action",h),this.addChildrenMap("actionMask",o)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var i=this.childrenMap.text;i!==void 0&&i.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,i){var s=this.childrenMap.icon;if(s!==void 0)return s.setTexture(t,i),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,i,s){if(this.ignoreLayout)return this;super.runLayout(t,i,s);var r=this.childrenMap.iconMask;r&&(r.setPosition(),this.resetChildPositionState(r));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(t,i){super.resize(t,i);var s=this.childrenMap.iconMask;s&&s.resize();var r=this.childrenMap.actionMask;return r&&r.resize(),this}}const qi=Z.prototype.add,Xh=Z.prototype.addSpace;var Pr=function(e){var t=!e.isRexSpace,i=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var s=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");s&&Xh.call(this),qi.call(this,e,{proportion:i,expand:!0});var r=!this.buttonsExpand&&this.buttonsAlign==="center";r&&Xh.call(this),this.hasTailSpace=r}else qi.call(this,e,{proportion:i,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var n=this.sizerChildren.length-1;qi.call(this,e,{index:n,proportion:i,expand:!0})}else qi.call(this,e,{proportion:i,expand:!0});return t&&this.buttonGroup.add(e),this};const eT={addButton(e){if($t(e))for(var t=e,i=0,s=t.length;i<s;i++)Pr.call(this,t[i]);else Pr.call(this,e);return this},addButtons(e){for(var t=0,i=e.length;t<i;t++)Pr.call(this,e[t]);return this}},iT=Z.prototype.remove,sT=Z.prototype.clear;var wr=function(e,t){return this.getParentSizer(e)!==this?this:(this.buttonGroup.remove(e),iT.call(this,e,t),this)};const rT={remove(e,t){if($t(e))for(var i=e,s=0,r=i.length;s<r;s++)wr.call(this,i[s],t);else wr.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,sT.call(this,e),this},removeButton(i,t){var i=this.getButton(i);return i?(this.remove(i,t),this):this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)wr.call(this,t[i],e);return this}},nT={add(e){if(this.buttons.push(e),this.buttonsType){var t=e.name;t===""?console.error(`${this.parent.constructor.name}: Button key is an empty string`):this.buttonMap.hasOwnProperty(t)&&console.error(`${this.parent.constructor.name}: Duplicate button key '${t}'`),this.buttonMap[t]=e,this.dataManager.set(t,void 0).set(t,!1)}return e._buttonBehavior=new Ls(e,this.clickConfig),e._buttonBehavior.on("click",function(i,s,r,n){this.fireEvent("button.click",s,r,n)},this).on("enable",function(i,s){this.fireEvent("button.enable",s)},this).on("disable",function(i,s){this.fireEvent("button.disable",s)},this),e.on("pointerover",function(i,s,r,n){this.fireEvent("button.over",e,i,n)},this).on("pointerout",function(i,s){this.fireEvent("button.out",e,i,s)},this),this},addMultiple(e){for(var t=0,i=e.length;t<i;t++)this.add(gameObject[t]);return this}},aT=Phaser.Utils.Array.Remove,hT={remove(e){if(aT(this.buttons,e),this.buttonsType){var t=e.name;delete this.buttonMap[t],this.dataManager.remove(t)}return this},clear(){if(this.buttons.length=0,this.buttonsType)for(var e in this.buttonMap)delete this.buttonMap[e],this.dataManager.remove(e);return this}};var oT=function(e,t,...i){var s;if(typeof t=="number"){if(s=t,t=this.buttons[s],!t)return}else if(s=this.buttons.indexOf(t),s===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(e,t,s,...i),this.groupName!==void 0?this.eventEmitter.emit(e,t,this.groupName,s,...i):this.eventEmitter.emit(e,t,s,...i)};const Ne=Phaser.Utils.Objects.GetValue;var jh=function(e){var t=Ne(e,"dataManager",void 0);if(t===void 0){var i=this.parent;i.setDataEnabled(),t=i.data}this.dataManager=t;var s,r;s=Ne(e,"setValueCallback",void 0),r=Ne(e,"setValueCallbackScope",void 0),s===void 0&&(s=Ne(e,"setButtonStateCallback",void 0),r=Ne(e,"setButtonStateCallbackScope",void 0)),this.setValueCallback=s,this.setValueCallbackScope=r,t.events.on("changedata",function(n,a,h,o){var l=this.buttonMap[a];if(!!l){var u=this.setValueCallback,d=this.setValueCallbackScope;u&&(d?u.call(d,l,h,o):u(l,h,o)),this.fireEvent("button.statechange",l,h,o)}},this)};const lT={setButtonsType(e){e===void 0&&(e={});var t=Ne(e,"buttonsType",e.type);switch(this.buttonsType=t,t){case"radio":this.setRadioType(e);break;case"checkboxes":this.setCheckboxesType(e);break}return this},setRadioType(e){jh.call(this,e);var t=void 0,i=this.parent,s=this.buttons,r=this.dataManager;return Object.defineProperty(i,"value",{get:function(){return t},set:function(n){n!==t&&(t=n,s.forEach(function(a){var h=a.name,o=r.get(h);h===n?o||r.set(h,!0):o&&r.set(h,!1)}))},enumerable:!0,configurable:!0}),i.on("button.click",function(n){i.value=n.name}),this},setCheckboxesType(e){jh.call(this,e);var t=this.parent,i=this.dataManager;return t.on("button.click",function(s){i.toggle(s.name)}),this},clearAllButtonsState(){for(var e in this.buttonMap)this.dataManager.set(e,!1);return this},getAllButtonsState(){var e={};for(var t in this.buttonMap)e[t]=this.dataManager.get(t);return e},setSelectedButtonName(e){return this.parent.value=e,this},getSelectedButtonName(){return this.parent.value},setButtonState(e,t){return t===void 0&&(t=!0),this.dataManager.set(e,t),this},getButtonState(e){return this.dataManager.get(e)}};var uT=function(e,t){if(e)if($t(e)){for(var i,s=0,r=e.length;s<r;s++)if(i=Kh(e[s],t),i)return i}else{var i;for(var n in e)if(i=Kh(e[n],t),i)return i}else return null},Kh=function(e,t){return e?e.hasOwnProperty("name")?e.name===t?e:null:GetElementByName(e,t):null};const Ds={getButton(e){var t=this.buttons,i,s=typeof e;switch(s){case"number":i=t[e];break;case"string":i=uT(t,e);break;default:i=e,t.indexOf(i)===-1&&(i=void 0);break}return i},setButtonEnable(e,t){var i=this.buttons;if(e===void 0||typeof e=="boolean"){t=e;for(var s=0,r=i.length;s<r;s++)i[s]._buttonBehavior.setEnable(t)}else this.getButton(e)._buttonBehavior.setEnable(t);return this},toggleButtonEnable(e){var t=this.buttons;if(e===void 0||typeof e=="boolean")for(var i=0,s=t.length;i<s;i++)t[i]._buttonBehavior.toggleEnable();else this.getButton(e)._buttonBehavior.toggleEnable();return this},getButtonEnable(e){return e===void 0&&(e=0),this.getButton(e)._buttonBehavior.enable},emitButtonClick(e){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",e),this},showButton(e){return Pe(this.getButton(e)),this},hideButton(e){return we(this.getButton(e)),this},isButtonShown(e){return Jl(this.getButton(e)),this},forEachButtton(e,t){for(var i=this.buttons,s=0,r=i.length;s<r;s++)t?e.call(t,i[s],s,i):e(i[s],s,i);return this}};class As{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[],this.buttonMap={}}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var dT={fireEvent:oT};Object.assign(As.prototype,nT,hT,lT,Ds,dT);const An={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(e){return this.buttonGroup.setSelectedButtonName(e),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(e,t){return this.buttonGroup.setButtonState(e,t),this},getButtonState(e){return this.buttonGroup.getButtonState(e)}},xe=Phaser.Utils.Objects.GetValue;class ft extends Z{constructor(t,i){i===void 0&&(i={});var s=i.space;typeof s=="number"&&(i.space={item:s}),super(t,i),this.type="rexButtons",this.buttonGroup=new As({parent:this,eventEmitter:xe(i,"eventEmitter",this),groupName:xe(i,"groupName",void 0),clickConfig:xe(i,"click",void 0)}).setButtonsType(i);var r=xe(i,"background",void 0),n=xe(i,"buttons",void 0);this.buttonsExpand=xe(i,"expand",!1),this.buttonsAlign=xe(i,"align",void 0),r&&this.addBackground(r),n&&this.addButtons(n),this.addChildrenMap("background",r),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(ft.prototype,eT,rT,Ds,An);const cT=Ke.prototype.add,fT={addButton(e,t,i){return cT.call(this,e,t,i,void 0,0,this.buttonsExpand),this.buttonGroup.add(e),this},addButtons(e,t){for(var i=0,s=e;i<s;i++)this.addButton(e[i],void 0,t);return this}},pT=Ke.prototype.remove,vT=Ke.prototype.clear;var Mr=function(i,t){var i=this.getButton(i);return i?(this.buttonGroup.remove(i),pT.call(this,i,t),this):this};const gT={remove(e,t){if($t(e))for(var i=e,s=0,r=i.length;s<r;s++)Mr.call(this,i[s],t);else Mr.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,vT.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Mr.call(this,t[i],e);return this}},Yt=Phaser.Utils.Objects.GetValue;class Su extends Ke{constructor(t,i){i===void 0&&(i={});var s=Yt(i,"row",0),r=Yt(i,"column",i.col||0),n=Yt(i,"createCellContainerCallback"),a=Yt(i,"buttons",void 0),h=Yt(i,"expand",!0),o=h?1:0;if(n&&(i.createCellContainerCallback=void 0),a!==void 0){s=Math.max(s,a.length);for(var l=0,u=a.length;l<u;l++)r=Math.max(r,a[l].length)}i.row=s,i.column=r,i.columnProportions=o,i.rowProportions=o,super(t,i),this.type="rexGridButtons",this.buttonGroup=new As({parent:this,eventEmitter:Yt(i,"eventEmitter",this),groupName:Yt(i,"groupName",void 0),clickConfig:Yt(i,"click",void 0)}).setButtonsType(i);var d=Yt(i,"background",void 0);if(this.buttonsExpand=h,Yt(i,"space",void 0),d&&this.addBackground(d),a)for(var c,f,p=0,v=a.length;p<v;p++){c=a[p];for(var g=0,m=c.length;g<m;g++)f=c[g],f&&this.addButton(f,g,p)}else if(n)for(var b=0;b<s;b++)for(var S=0;S<r;S++){var f=n(t,S,b);f&&this.addButton(f,S,b)}this.addChildrenMap("background",d),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Su.prototype,fT,gT,Ds,An);const xu=Li.prototype.add;var Qi=function(e){return xu.call(this,e),this.buttonGroup.add(e),this};const mT={addButton(e){if($t(e))for(var t=e,i=0,s=t.length;i<s;i++)Qi.call(this,t[i]);else Qi.call(this,e);return this},addButtons(e){if($t(e[0]))for(var t=e,i,s=0,r=t.length-1;s<=r;s++){i=t[s];for(var n=0,a=i.length;n<a;n++)Qi.call(this,i[n]);s>r&&xu.addNewLine(this)}else for(var n=0,a=e.length;n<a;n++)Qi.call(this,e[n]);return this}},CT=Li.prototype.remove,bT=Li.prototype.clear;var Er=function(i,t){var i=this.getButton(i);return i?(this.buttonGroup.remove(i),CT.call(this,i,t),this):this};const yT={remove(e,t){if($t(e))for(var i=e,s=0,r=i.length;s<r;s++)Er.call(this,i[s],t);else Er.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,bT.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)Er.call(this,t[i],e);return this}},Fe=Phaser.Utils.Objects.GetValue;class Ci extends Li{constructor(t,i){i===void 0&&(i={});var s=i.space;typeof s=="number"&&(i.space={item:s,line:s}),super(t,i),this.type="rexFixWidthButtons",this.buttonGroup=new As({parent:this,eventEmitter:Fe(i,"eventEmitter",this),groupName:Fe(i,"groupName",void 0),clickConfig:Fe(i,"click",void 0)}).setButtonsType(i);var r=Fe(i,"background",void 0),n=Fe(i,"buttons",void 0);this.buttonsAlign=Fe(i,"align",void 0),r&&this.addBackground(r),n&&this.addButtons(n),this.addChildrenMap("background",r),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Ci.prototype,mT,yT,Ds,An);const ST={getChoice(e){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(e)},getAction(e){return this.childrenMap.actionsSizer.getButton(e)},getToolbar(e){return this.childrenMap.toolbarSizer.getButton(e)},getLeftToolbar(e){return this.childrenMap.leftToolbarSizer.getButton(e)},setChoiceEnable(e,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonEnable(e,t),this},setActionEnable(e,t){return this.childrenMap.actionsSizer.setButtonEnable(e,t),this},setToolbarEnable(e,t){return this.childrenMap.toolbarSizer.setButtonEnable(e,t),this},setLeftToolbarEnable(e,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(e,t),this},toggleChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(e),this},toggleActionEnable(e){return this.childrenMap.actionsSizer.toggleButtonEnable(e),this},toggleToolbarEnable(e){return this.childrenMap.toolbarSizer.toggleButtonEnable(e),this},toggleLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(e),this},getChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(e):!1},getActionEnable(e){return this.childrenMap.actionsSizer.getButtonEnable(e)},getToolbarEnable(e){return this.childrenMap.toolbarSizer.getButtonEnable(e)},getLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.getButtonEnable(e)},emitChoiceClick(e){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(e),this},emitActionClick(e){return this.childrenMap.actionsSizer.emitButtonClick(e),this},emitToolbarClick(e){return this.childrenMap.toolbarSizer.emitButtonClick(e),this},emitLeftToolbarClick(e){return this.childrenMap.leftToolbarSizer.emitButtonClick(e),this},showChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.showButton(e),this},showAction(e){return this.childrenMap.actionsSizer.showButton(e),this},showToolbar(e){return this.childrenMap.toolbarSizer.showButton(e),this},showLeftToolbar(e){return this.childrenMap.leftToolbarSizer.showButton(e),this},hideChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(e),this},hideAction(e){return this.childrenMap.actionsSizer.hideButton(e),this},hideToolbar(e){return this.childrenMap.toolbarSizer.hideButton(e),this},hideLeftToolbar(e){return this.childrenMap.leftToolbarSizer.hideButton(e),this},addChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.addButton(e),this},addAction(e){return this.childrenMap.actionsSizer.addButton(e),this},addToolbar(e){return this.childrenMap.toolbarSizer.addButton(e),this},addLeftToolbar(e){return this.childrenMap.leftToolbarSizer.addButton(e),this},removeChoice(e,t){var i=this.childrenMap.choicesSizer;return i&&i.removeButton(e,t),this},removeAction(e,t){return this.childrenMap.actionsSizer.removeButton(e,t),this},removeToolbar(e,t){return this.childrenMap.toolbarSizer.removeButton(e,t),this},removeLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.removeButton(e,t),this},clearChoices(e){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(e),this},clearActions(e){return this.childrenMap.actionsSizer.clearButtons(e),this},clearToolbar(e){return this.childrenMap.toolbarSizer.clearButtons(e),this},clearLeftToolbar(e){return this.childrenMap.leftToolbarSizer.clearButtons(e),this},forEachChoice(e,t){var i=this.childrenMap.choicesSizer;return i&&i.forEachButtton(e,t),this},forEachAction(e,t){return this.childrenMap.actionsSizer.forEachButtton(e,t),this},forEachToolbar(e,t){return this.childrenMap.toolbarSizer.forEachButtton(e,t),this},forEachLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.forEachButtton(e,t),this},setAllButtonsEnable(e){return e===void 0&&(e=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(e),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(e),this.childrenMap.actionsSizer&&this.setActionEnable(e),this.childrenMap.choicesSizer&&this.setChoiceEnable(e),this},getChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e?e.getAllButtonsState():{}},getChoicesButtonState(e){var t=this.childrenMap.choicesSizer;return e===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(e):!1},setChoicesButtonState(e,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonState(e,t),this},clearChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e&&e.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var e=this.childrenMap.choicesSizer;return e?e.getSelectedButtonName():""},setChoicesSelectedButtonName(e){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(e),this}},k=Phaser.Utils.Objects.GetValue;class xT extends Z{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexDialog",this.eventEmitter=k(i,"eventEmitter",this);var s=k(i,"background",void 0),r=k(i,"title",void 0),n=k(i,"toolbar",void 0),a=k(i,"toolbarBackground",void 0),h=k(i,"leftToolbar",void 0),o=k(i,"leftToolbarBackground",void 0),l=k(i,"content",void 0),u=k(i,"description",void 0),d,c=k(i,"choices",void 0),f=k(i,"choicesBackground",void 0),p,v=k(i,"actions",void 0),g=k(i,"actionsBackground",void 0),m=k(i,"click",void 0);s&&this.addBackground(s);var b;n&&(b=new ft(t,{groupName:"toolbar",background:a,buttons:n,orientation:0,space:{item:k(i,"space.toolbarItem",0)},click:m,eventEmitter:this.eventEmitter}));var S;if(h&&(S=new ft(t,{groupName:"leftToolbar",background:o,buttons:h,orientation:0,space:{item:k(i,"space.leftToolbarItem",0)},click:m,eventEmitter:this.eventEmitter})),r&&!n&&!h){var x=k(i,"align.title","center"),C=k(i,"space.title",0),y;(l||u||c||v)&&(y={bottom:C});var T=k(i,"expand.title",!0);this.add(r,{align:x,padding:y,expand:T})}if(n&&!r&&!h){var C=k(i,"space.title",0),y;(l||u||c||v)&&(y={bottom:C});var T=k(i,"expand.toolbar",!0);this.add(b,{align:"right",padding:y,expand:T})}if(h&&!r&&!n){var C=k(i,"space.title",0),y;(l||u||c||v)&&(y={bottom:C});var T=k(i,"expand.leftToolbar",!0);this.add(S,{align:"left",padding:y,expand:T})}if(r&&(n||h)){var P=new Z(t,{orientation:0});S&&P.add(S,{align:"right",expand:!1});var x=k(i,"align.title","left"),T=k(i,"expand.title",!0);!T&&(x==="right"||x==="center")&&P.addSpace();var y={left:k(i,"space.titleLeft",0),right:k(i,"space.titleRight",0)},w=T?1:0;P.add(r,{proportion:w,align:"center",padding:y,expand:T}),!T&&(x==="left"||x==="center")&&P.addSpace(),b&&P.add(b,{align:"right",expand:!1});var C=k(i,"space.title",0),y;(l||u||c||v)&&(y={bottom:C}),this.add(P,{align:"center",padding:y,expand:!0})}if(l){var x=k(i,"align.content","center"),M=k(i,"space.content",0),y={left:k(i,"space.contentLeft",0),right:k(i,"space.contentRight",0),bottom:u||c||v?M:0},T=k(i,"expand.content",!0);this.add(l,{align:x,padding:y,expand:T})}if(u){var x=k(i,"align.description","center"),R=k(i,"space.description",0),y={left:k(i,"space.descriptionLeft",0),right:k(i,"space.descriptionRight",0),bottom:c||v?R:0},T=k(i,"expand.description",!0);this.add(u,{align:x,padding:y,expand:T})}if(c){var G=k(i,"choicesType","").split("-"),D=ui(G,"wrap")?Ci:ui(G,"grid")?Su:ft,Y=ui(G,"radio")?"radio":ui(G,"checkboxes")?"checkboxes":void 0,N={left:k(i,"space.choicesBackgroundLeft",0),right:k(i,"space.choicesBackgroundRight",0),top:k(i,"space.choicesBackgroundTop",0),bottom:k(i,"space.choicesBackgroundBottom",0)},A=k(i,"space.choice",0);D===ft?N.item=A:D===Ci?(N.item=A,N.line=k(i,"space.choiceLine",A)):(N.column=k(i,"space.choiceColumn",A),N.row=k(i,"space.choiceRow",A));var Et={width:k(i,"choicesWidth",void 0),height:k(i,"choicesHeight",void 0),groupName:"choices",buttonsType:Y,background:f,buttons:c,space:N,click:m,eventEmitter:this.eventEmitter,setValueCallback:k(i,"choicesSetValueCallback",void 0),setValueCallbackScope:k(i,"choicesSetValueCallbackScope",void 0)};D===ft&&(Et.orientation=ui(G,"x")?0:1),d=new D(t,Et);var ht=k(i,"space.choices",0),y={left:k(i,"space.choicesLeft",0),right:k(i,"space.choicesRight",0),bottom:v?ht:0},x=k(i,"align.choices","center"),T=k(i,"expand.choices",!0);this.add(d,{align:x,padding:y,expand:T})}if(v){p=new ft(t,{groupName:"actions",background:g,buttons:v,orientation:0,space:{item:k(i,"space.action",0)},expand:k(i,"expand.actions",!1),align:k(i,"align.actions","center"),click:m,eventEmitter:this.eventEmitter});var y={left:k(i,"space.actionsLeft",0),right:k(i,"space.actionsRight",0)};this.add(p,{align:"center",padding:y,expand:!0})}this.addChildrenMap("background",s),this.addChildrenMap("title",r),this.addChildrenMap("toolbar",n),this.addChildrenMap("leftToolbar",h),this.addChildrenMap("content",l),this.addChildrenMap("description",u),this.addChildrenMap("choices",c),this.addChildrenMap("actions",v),this.addChildrenMap("choicesSizer",d),this.addChildrenMap("actionsSizer",p),this.addChildrenMap("toolbarSizer",b),this.addChildrenMap("leftToolbarSizer",S)}}var ui=function(e,t){return e.indexOf(t)!==-1};Object.assign(xT.prototype,ST);Phaser.Utils.Objects.GetValue;const TT={getButtonsSizer(e){return this.childrenMap[`${e}ButtonsSizer`]},getButton(e,t){var i=this.getButtonsSizer(e);return i?i.getButton(t):void 0},setButtonEnable(e,t,i){return this.getButtonsSizer(e).setButtonEnable(t,i),this},setLeftButtonEnable(e,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(e,t),this},setRightButtonEnable(e,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(e,t),this},setTopButtonEnable(e,t){return this.childrenMap.topButtonsSizer.setButtonEnable(e,t),this},setBottomButtonEnable(e,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(e,t),this},toggleButtonEnable(e,t){return this.getButtonsSizer(e).toggleButtonEnable(t),this},toggleLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(e),this},toggleRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(e),this},toggleTopButtonEnable(e){return this.childrenMap.topButtonsSizer.toggleButtonEnable(e),this},toggleBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(e),this},getButtonEnable(e,t){return this.getButtonsSizer(e).getButtonEnable(t)},getLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.getButtonEnable(e)},getRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.getButtonEnable(e)},getTopButtonEnable(e){return this.childrenMap.topButtonsSizer.getButtonEnable(e)},getBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.getButtonEnable(e)},emitButtonClick(e,t){var i=this.getButtonsSizer(e);return i?(i.emitButtonClick(t),this):this},emitLeftButtonClick(e){return this.childrenMap.leftButtonsSizer.emitButtonClick(e),this},emitRightButtonClick(e){return this.childrenMap.rightButtonsSizer.emitButtonClick(e),this},emitTopButtonClick(e){return this.childrenMap.topButtonsSizer.emitButtonClick(e),this},emitBottomButtonClick(e){return this.childrenMap.bottomButtonsSizer.emitButtonClick(e),this},getLeftButton(e){return this.childrenMap.leftButtonsSizer.getButton(e)},getRightButton(e){return this.childrenMap.rightButtonsSizer.getButton(e)},getTopButton(e){return this.childrenMap.topButtonsSizer.getButton(e)},getBottomButton(e){return this.childrenMap.bottomButtonsSizer.getButton(e)},showButton(e,t){return Pe(this.getButton(e,t)),this},showLeftButton(e){return Pe(this.getLeftButton(e)),this},showRightButton(e){return Pe(this.getRightButton(e)),this},showTopButton(e){return Pe(this.getTopButton(e)),this},showBottomButton(e){return Pe(this.getBottomButton(e)),this},hideButton(e,t){return we(this.getButton(e,t)),this},hideLeftButton(e){return we(this.getLeftButton(e)),this},hideRightButton(e){return we(this.getRightButton(e)),this},hideTopButton(e){return we(this.getTopButton(e)),this},hideBottomButton(e){return we(this.getBottomButton(e)),this},addButton(e,t){return this.getButtonsSizer(e).addButton(t),this},addLeftButton(e){return this.addButton("left",e),this},addRightButton(e){return this.addButton("right",e),this},addTopButton(e){return this.addButton("top",e),this},removeButton(e,t,i){return this.getButtonsSizer(e).removeButton(t,i),this},removeLeftButton(e,t){return this.removeButton("left",e,t),this},removeRightButton(e,t){return this.removeButton("right",e,t),this},removeTopButton(e,t){return this.removeButton("top",e,t),this},removeBottomButton(e,t){return this.removeButton("bottom",e,t),this},clearButtons(e,t){return this.getButtonsSizer(e).clearButtons(t),this},clearLeftButtons(e){return this.clearButtons("left",e),this},clearRightButtons(e){return this.clearButtons("right",e),this},clearTopButtons(e){return this.clearButtons("top",e),this},clearBottomButtonss(e){return this.clearButtons("bottom",e),this},forEachButton(e,t,i){return this.getButtonsSizer(e).forEachButtton(t,i),this},forEachLeftButton(e,t){return this.childrenMap.leftButtonsSizer.forEachButtton(e,t),this},forEachRightButton(e,t){return this.childrenMap.rightButtonsSizer.forEachButtton(e,t),this},forEachTopButton(e,t){return this.childrenMap.topButtonsSizer.forEachButtton(e,t),this},forEachBottomButton(e,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(e,t),this}},F=Phaser.Utils.Objects.GetValue;class kT extends Ke{constructor(t,i){i===void 0&&(i={}),i.column=3,i.row=3,super(t,i),this.type="rexTabs",this.eventEmitter=F(i,"eventEmitter",this);var s=F(i,"background",void 0),r=F(i,"panel",void 0),n=F(i,"leftButtons",void 0),a=F(i,"leftButtonsBackground",void 0),h,o=F(i,"rightButtons",void 0),l=F(i,"rightButtonsBackground",void 0),u,d=F(i,"topButtons",void 0),c=F(i,"topButtonsBackground",void 0),f,p=F(i,"bottomButtons",void 0),v=F(i,"bottomButtonsBackground",void 0),g,m=F(i,"click",void 0);if(s&&this.addBackground(s),r&&this.add(r,1,1,"center",0,!0),n){var b=F(i,"space.leftButtonsOffset",0),S=F(i,"space.leftButton",0);h=new ft(t,{groupName:"left",background:a,buttons:n,orientation:1,space:{item:S},align:F(i,"align.leftButtons",void 0),click:m,eventEmitter:this.eventEmitter});var x={top:b};this.add(h,0,1,"top",x,!1)}if(o){var C=F(i,"space.rightButtonsOffset",0),y=F(i,"space.rightButton",0);u=new ft(t,{groupName:"right",background:l,buttons:o,orientation:1,space:{item:y},align:F(i,"align.rightButtons",void 0),click:m,eventEmitter:this.eventEmitter});var x={top:C};this.add(u,2,1,"top",x,!1)}if(d){var T=F(i,"space.topButtonsOffset",0),P=F(i,"space.topButton",0);f=new ft(t,{groupName:"top",background:c,buttons:d,orientation:0,space:{item:P},align:F(i,"align.topButtons",void 0),click:m,eventEmitter:this.eventEmitter});var x={left:T};this.add(f,1,0,"left",x,!1)}if(p){var w=F(i,"space.bottomButtonsOffset",0),M=F(i,"space.bottomButton",0);g=new ft(t,{groupName:"bottom",background:v,buttons:p,orientation:0,space:{item:M},align:F(i,"align.bottomButtons",void 0),click:m,eventEmitter:this.eventEmitter});var x={left:w};this.add(g,1,2,"left",x,!1)}this.addChildrenMap("background",s),this.addChildrenMap("panel",r),this.addChildrenMap("leftButtons",n),this.addChildrenMap("rightButtons",o),this.addChildrenMap("topButtons",d),this.addChildrenMap("bottomButtons",p),this.addChildrenMap("leftButtonsSizer",h),this.addChildrenMap("rightButtonsSizer",u),this.addChildrenMap("topButtonsSizer",f),this.addChildrenMap("bottomButtonsSizer",g)}}Object.assign(kT.prototype,TT);const Jh=Phaser.Math.Percent;var Tu=function(e,t,i){var s,r,n;return e.y===t.y?(s=Math.min(e.x,t.x),r=Math.max(e.x,t.x),n=Jh(i.x,s,r)):e.x===t.x&&(s=Math.min(e.y,t.y),r=Math.max(e.y,t.y),n=Jh(i.y,s,r)),n},PT=function(e,t,i){!this.enable||(Or.x=t,Or.y=i,this.value=Tu(this.getStartPoint(),this.getEndPoint(),Or))},Or={},Zh=function(e,t,i){if(!!this.enable&&!!e.isDown){_r.x=e.worldX,_r.y=e.worldY;var s=Tu(this.getStartPoint(),this.getEndPoint(),_r);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-s)<.1?this.value=s:this.easeValueTo(s)}},_r={},ku=function(e,t){t===void 0&&(t=wT);var i=this.childrenMap.thumb,s=i.x,r=i.y;return _s(i,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,e),t.x=i.x,t.y=i.y,i.x=s,i.y=r,t},wT={};const MT=Phaser.Display.Align.LEFT_CENTER,ET=Phaser.Display.Align.TOP_CENTER;var OT=function(e){if(e===void 0&&(e=_T),this.childrenMap.thumb){var t=this.orientation===0?MT:ET;ku.call(this,t,e)}else this.orientation===0?(e.x=this.innerLeft+1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerTop+1);return e},_T={};const RT=Phaser.Display.Align.RIGHT_CENTER,LT=Phaser.Display.Align.BOTTOM_CENTER;var BT=function(e){if(e===void 0&&(e=IT),this.childrenMap.thumb){var t=this.orientation===0?RT:LT;ku.call(this,t,e)}else this.orientation===0?(e.x=this.innerRight-1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerBottom-1);return e},IT={};const qh=Phaser.Math.Linear;var GT=function(e,t,i,s){return s===void 0&&(s=DT),s.x=qh(t.x,i.x,e),s.y=qh(t.y,i.y,e),s},DT={},AT=function(e){var t=this.childrenMap.thumb;return t===void 0?this:(e===void 0&&(e=this.value),GT(e,this.getStartPoint(),this.getEndPoint(),t),this.resetChildPositionState(t),this)};const $T=Phaser.Display.Align.LEFT_CENTER,VT=Phaser.Display.Align.TOP_CENTER;var zT=function(e){var t=this.childrenMap.indicator;if(t===void 0)return this;e===void 0&&(e=this.value);var i,s,r=this.childrenMap.thumb;if(r)if(this.orientation===0){var n=$(r),a=r.x-n*r.originX+n;i=a-this.left}else{var h=B(r),o=r.y-h*r.originY+h;s=o-this.top}else this.orientation===0?i=this.width*e:s=this.height*e;de(t,i,s);var l=this.orientation===0?$T:VT;Xl(t,this,l),this.resetChildPositionState(t)};const nt=Phaser.Utils.Objects.GetValue,FT=Phaser.Math.Clamp,WT=Phaser.Math.Linear,Qh=Phaser.Math.Percent,YT=Phaser.Math.Snap.To;class $n extends Z{constructor(t,i){super(t,i),this.type="rexSlider",this.eventEmitter=nt(i,"eventEmitter",this);var s=nt(i,"background",void 0),r=nt(i,"track",void 0),n=nt(i,"indicator",void 0),a=nt(i,"thumb",void 0);s&&this.addBackground(s),r&&this.add(r,{proportion:1,expand:!0,minWidth:0,minHeight:0}),n&&this.pin(n),a&&this.pin(a);var h=nt(i,"input",0);switch(typeof h=="string"&&(h=NT[h]),h){case 0:a&&(a.setInteractive(),this.scene.input.setDraggable(a),a.on("drag",PT,this).on("dragstart",function(u){this.eventEmitter.emit("inputstart",u)},this).on("dragend",function(u){this.eventEmitter.emit("inputend",u)},this));break;case 1:this.setInteractive().on("pointerdown",Zh,this).on("pointermove",Zh,this).on("pointerdown",function(u){this.eventEmitter.emit("inputstart",u)},this).on("pointerup",function(u){this.eventEmitter.emit("inputend",u)},this).on("pointerover",function(u){u.isDown&&this.eventEmitter.emit("inputstart",u)},this).on("pointerout",function(u){u.isDown&&this.eventEmitter.emit("inputend",u)},this);break}this.addChildrenMap("background",s),this.addChildrenMap("track",r),this.addChildrenMap("indicator",n),this.addChildrenMap("thumb",a);var o=nt(i,"valuechangeCallback",null);if(o!==null){var l=nt(i,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,l)}this.setEnable(nt(i,"enable",void 0)),this.setGap(nt(i,"gap",void 0)),this.setValue(nt(i,"value",0),nt(i,"min",void 0),nt(i,"max",void 0)),this.setEaseValuePropName("value").setEaseValueDuration(nt(i,"easeValue.duration",0)).setEaseValueFunction(nt(i,"easeValue.ease","Linear"))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=YT(t,this.gap));var i=this._value;this._value=FT(t,0,1),i!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter))}setValue(t,i,s){return t==null?this:(i!==void 0&&(t=Qh(t,i,s)),this.value=t,this)}addValue(t,i,s){return i!==void 0&&(t=Qh(t,i,s)),this.value+=t,this}getValue(t,i){var s=this.value;return t!==void 0&&(s=WT(t,i,s)),s}runLayout(t,i,s){return this.ignoreLayout?this:(super.runLayout(t,i,s),this.updateThumb(),this.updateIndicator(),this)}}const NT={pan:0,drag:0,click:1,none:-1};var HT={getStartPoint:OT,getEndPoint:BT,updateThumb:AT,updateIndicator:zT};Object.assign($n.prototype,HT,xi);const Pu={v:0,vertical:0,h:1,horizontal:1},UT=Phaser.Utils.Objects.GetValue;var $s=function(e,t){var i=UT(e,"scrollMode",0);return typeof i=="string"&&(i=Pu[i]),i};const dt=Phaser.Utils.Objects.GetValue;class XT extends Z{constructor(t,i){super(t,i),this.type="rexScrollBar";var s=dt(i,"background",void 0),r=dt(i,"buttons",void 0),n=dt(r,"top",dt(r,"left",void 0)),a=dt(r,"bottom",dt(r,"right",void 0)),h,o=dt(i,"slider",void 0);if(s&&this.addBackground(s),n){this.add(n);var l=new Kr(n);l.on("intouch",function(){!this.enable||(this.value-=this.scrollStep)},this)}if(o){o.orientation=this.orientation,o.eventEmitter=this,o.value=null;var u;if(this.orientation===0){var d=dt(o,"width",void 0);u=d===void 0?1:0}else{var c=dt(o,"height",void 0);u=c===void 0?1:0}h=new $n(t,o),t.add.existing(h),this.add(h,{proportion:u})}if(a){this.add(a);var l=new Kr(a);l.on("intouch",function(){!this.enable||(this.value+=this.scrollStep)},this)}var f=[n,a];this.addChildrenMap("background",s),this.addChildrenMap("slider",h),this.addChildrenMap("buttons",f);var p=dt(i,"valuechangeCallback",null);if(p!==null){var v=dt(i,"valuechangeCallbackScope",void 0);this.on("valuechange",p,v)}this.setEnable(dt(i,"enable",void 0)),this.setValue(dt(i,"value",0)),this.setScrollStep(dt(r,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,s),this}addValue(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,s),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,s),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}class jT extends XT{constructor(t,i){i===void 0&&(i={});var s=vi(i);i={slider:s},i.orientation=s.orientation,delete s.orientation,i.background=s.background,delete s.background,i.buttons=s.buttons,delete s.buttons,super(t,i);var r=this.childrenMap.slider;this.addChildrenMap("track",r.childrenMap.track),this.addChildrenMap("indicator",r.childrenMap.indicator),this.addChildrenMap("thumb",r.childrenMap.thumb)}}class KT extends Ee{constructor(t,i){super(i),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,i=this.parent,s=i.dragState;return s.isDown&&(t=i.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,i){this.next()}next_DRAGBEGIN(){var t,i=this.parent,s=i.dragState;return s.isDown?t=s.pointer.getDistance()>=i.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,i){this.next()}next_DRAG(){var t,i=this.parent,s=i.dragState;return s.isUp&&(i.outOfBounds?t="BACK":i.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,i){var s=this.parent,r=s.dragState;r.justMoved&&s.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,i=this.parent,s=i.dragState;return s.isDown?t="DRAG":i.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,i){this.parent.sliding(t,i),this.next()}next_BACK(){var t,i=this.parent,s=i.dragState;return s.isDown?t="DRAG":i.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,i){this.parent.pullBack(t,i),this.next()}}const ts=Phaser.Utils.Objects.GetValue,JT=Phaser.Math.Distance.Between;class ZT extends Mt{constructor(t,i){super(t,i),this._enable=void 0,t.setInteractive(ts(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(ts(t,"enable",!0)),this.holdThreshold=ts(t,"holdThreshold",50),this.pointerOutReleaseEnable=ts(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=this.scene.sys.game,i=t.loop.delta;return i}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=JT(this.preX,this.preY,this.x,this.y),i=t/(this.dt*.001);return i}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,i,s){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=i,this.localY=s)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,i,s){!this.enable||!t.isDown||this.pointer!==t||(this.localX=i,this.localY=s)}preupdate(t,i){if(!!this.enable){var s=this.pointer;this.justMoved=!1,s&&!this.isInTouched?(this.x=s.worldX,this.y=s.worldY,this.preX=s.worldX,this.preY=s.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",s,this.localX,this.localY)):s&&this.isInTouched?this.x===s.x&&this.y===s.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=s.worldX,this.y=s.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",s,this.localX,this.localY)):!s&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",s))}}}const Rr=Phaser.Utils.Objects.GetValue;class qT{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(Rr(t,"value",0)),this.setSpeed(Rr(t,"speed",0)),this.setAcceleration(Rr(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class QT{constructor(){this.value,this.dir,this.movement=new qT}init(t,i,s,r,n){return this.value=t,this.end=n,n!==void 0?this.dir=t<n:this.dir=i,this.movement.setSpeed(s).setAcceleration(-r),this}stop(){this.movement.reset()}update(t){var i=this.movement.getDeltaValue(t);return this.dir||(i=-i),this.end===void 0?this.value+=i:i===0?this.value=this.end:(this.value+=i,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const X=Phaser.Utils.Objects.GetValue,tk=Phaser.Math.Clamp;class ek extends Mt{constructor(t,i){super(t,i);var s=X(i,"enable",!0);this._state=new KT(this,{enable:s,eventEmitter:!1});var r={inputConfig:X(i,"inputConfig",void 0),enable:s,pointerOutRelease:X(i,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new ZT(t,r),this._enable=void 0,this._value=void 0,this._slowDown=new QT;var n=X(i,"valuechangeCallback",null);if(n!==null){var a=X(i,"valuechangeCallbackScope",void 0);this.on("valuechange",n,a)}if(n=X(i,"overmaxCallback",null),n!==null){var a=X(i,"overmaxCallbackScope",void 0);this.on("overmax",n,a)}if(n=X(i,"overminCallback",null),n!==null){var a=X(i,"overminCallbackScope",void 0);this.on("overmin",n,a)}this.resetFromJSON(i),this.boot()}resetFromJSON(t){this.setOrientationMode(X(t,"orientation",0)),this.setDragThreshold(X(t,"threshold",10)),this.setSlidingDeceleration(X(t,"slidingDeceleration",5e3)),this.setBackDeceleration(X(t,"backDeceleration",2e3));var i=X(t,"bounds",void 0);return i?this.setBounds(i):this.setBounds(X(t,"max",0),X(t,"min",0)),this.setValue(X(t,"value",this.maxValue||0)),this.setEnable(X(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=ik[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setBounds(t,i){if(Array.isArray(t)){var s=t;t=s[0],i=s[1]}return t<i?(this.minValue=t,this.maxValue=i):(this.minValue=i,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var i=this._value,s=this.overMax(t),r=this.overMin(t);s&&this.emit("overmax",t,i),r&&this.emit("overmin",t,i),this.backEnable||(s&&(t=this.maxValue),r&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,i)}}setValue(t,i){return i===void 0&&(i=!1),i&&(t=tk(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,i){return this.setValue(this.value+t,i),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0}get dragSpeed(){return this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,i=this.dragSpeed;if(i===0){this._slowDown.stop(),this._state.next();return}var s=this.slidingDeceleration;this._slowDown.init(t,i>0,Math.abs(i),s)}sliding(t,i){i*=.001;var s=this._slowDown.update(i).value;this.overMax(s)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(s)?(this.value=this.minValue,this._slowDown.stop()):this.value=s}onPullBack(){var t=this.value,i=this.outOfMinBound?this.minValue:this.maxValue,s=Math.abs(i-t),r=this.backDeceleration,n=Math.sqrt(2*r*s);this._slowDown.init(t,void 0,n,r,i)}pullBack(t,i){i*=.001,this.value=this._slowDown.update(i).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const ik={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},es=Phaser.Utils.Objects.GetValue;class sk extends Mt{constructor(t,i){if(super(t,i),this.parent!==this.scene?this.focusMode=es(i,"focus",!1):this.focusMode=!1,this.setSpeed(es(i,"speed",.1)),this.setEnable(es(i,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(es(i,"inputConfig",void 0)).on("wheel",function(r,n,a,h,o){!this.enable||this.scroll(a)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,i,s,r,n,a){!this.enable||this.scroll(r)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const j=Phaser.Utils.Objects.GetValue;var rk=function(e,t){var i=e.scene,s=$s(t),r=new Z(i,{orientation:s}),n=j(t,"child.gameObject",void 0),a=j(t,"slider",void 0),h,o=j(a,"position",0);typeof o=="string"&&(o=nk[o]);var l=o===0,u=j(t,"scroller",!0),d,c=j(t,"mouseWheelScroller",!1),f;if(n){var p=j(t,"space.child",0),v={};if(e.childMargin={},typeof p!="number"){var g=p;s===0?(v.left=j(g,"left",0),v.right=j(g,"right",0),e.childMargin.top=j(g,"top",0),e.childMargin.bottom=j(g,"bottom",0)):(v.top=j(g,"top",0),v.bottom=j(g,"bottom",0),e.childMargin.top=j(g,"left",0),e.childMargin.bottom=j(g,"right",0))}else a&&(s===0?v=l?{right:p}:{left:p}:v=l?{bottom:p}:{top:p}),e.childMargin.top=0,e.childMargin.bottom=0;a?(a===!0&&(a={}),a.orientation=r.orientation===0?1:0,h=new jT(i,a),e.adaptThumbSizeMode=j(a,"adaptThumbSize",!1),e.minThumbSize=j(a,"minThumbSize",void 0)):(e.adaptThumbSizeMode=!1,e.minThumbSize=void 0),u&&(u===!0&&(u={}),u.orientation=s,d=new ek(n,u)),c&&(f=new sk(n,c)),h&&!l&&r.add(h,{proportion:0,align:"center",expand:!0});var m=j(t,"child.proportion",1),b=j(t,"child.expand",!0);r.add(n,{proportion:m,align:"center",padding:v,expand:b}),h&&l&&r.add(h,{proportion:0,align:"center",expand:!0})}return h&&h.on("valuechange",function(S){e.t=S,e.emit("scroll",e)}),d&&d.on("valuechange",function(S){e.childOY=S,e.emit("scroll",e)}),f&&f.on("scroll",function(S){e.addChildOY(-S,!0)}),e.addChildrenMap("child",n),e.addChildrenMap("slider",h),e.addChildrenMap("scroller",d),e.addChildrenMap("mouseWheelScroller",f),r},nk={right:0,left:1,bottom:0,top:1};Z.prototype.runLayout;var ak=function(){var e=this.topChildOY,t=this.bottomChildOY,i=this.childrenMap.scroller,s=this.childrenMap.slider;return i&&i.setBounds(t,e),s&&s.setEnable(t!==e),this.updateController(),this.adaptThumbSizeMode&&hk.call(this),this},hk=function(){var e=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,i=t.childrenMap.track,s=t.childrenMap.thumb,r=this.minThumbSize;if(this.scrollMode===0){var n=i.displayHeight*e;r!==void 0&&n<r&&(n=r),de(s,void 0,n)}else{var a=i.displayWidth*e;r!==void 0&&a<r&&(a=r),de(s,a,void 0)}ok.call(this)},ok=function(){var e=this.childrenMap.slider,t=e.minWidth,i=e.minHeight;e.minWidth=e.width,e.minHeight=e.height,e.layout(),e.minWidth=t,e.minHeight=i},lk=function(){var e=this.childrenMap.scroller,t=this.childrenMap.slider;e&&e.setValue(this.childOY),t&&t.setValue(this.t)};const Nt=Phaser.Utils.Objects.GetValue,to=Phaser.Math.Clamp;class Vs extends Z{constructor(t,i){i===void 0&&(i={});var s=$s(i);i.orientation=s===0?1:0,super(t,i),this.type=Nt(i,"type","rexScrollable");var r=Nt(i,"background",void 0),n=rk(this,i),a=Nt(i,"header",void 0),h=Nt(i,"footer",void 0);if(r&&this.addBackground(r),a){var o=Nt(i,"align.header","center"),l=Nt(i,"space.header",0),u;s===0?u={bottom:l}:u={right:l};var d=Nt(i,"expand.header",!0);this.add(a,{proportion:0,align:o,padding:u,expand:d})}if(n&&this.add(n,{proportion:1,align:"center",padding:0,expand:!0}),h){var o=Nt(i,"align.footer","center"),c=Nt(i,"space.footer",0),u;s===0?u={top:c}:u={left:c};var d=Nt(i,"expand.footer",!0);this.add(h,{proportion:0,align:o,padding:u,expand:d})}this.addChildrenMap("background",r),this.addChildrenMap("header",a),this.addChildrenMap("footer",h),this.runLayoutFlag=!1}runLayout(t,i,s){return this.ignoreLayout?this:(super.runLayout(t,i,s),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var i=this.childMargin;if(i.top!==0||i.bottom!==0){var s=this.childrenMap.child,r=s.topChildOY-s.bottomChildOY,n=r+i.top+i.bottom,a=n*t-i.top;t=a/r}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,i=this.childMargin;if(i.top!==0||i.bottom!==0){var s=this.childrenMap.child,r=s.topChildOY-s.bottomChildOY,n=r+i.top+i.bottom,a=r*t+i.top;t=a/n}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,i){return i===void 0&&(i=!1),i&&(t=to(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,i){return this.setChildOY(this.childOY+t,i),this}setT(t,i){return i===void 0&&(i=!1),i&&(t=to(t,0,1)),this.t=t,this}addT(t,i){return this.setT(this.t+t,i),this}scrollToTop(){return this.t=0,this}scrollToBottom(){return this.t=1,this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var i=this.childrenMap.slider;!i||i.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var i=this.childrenMap.scroller;!i||i.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var i=this.childrenMap.mouseWheelScrollerEnable;!i||i.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var i=this.childrenMap.child;return i.setInteractive(),i.input.dropZone=t,this}}var uk={resizeController:ak,updateController:lk};Object.assign(Vs.prototype,uk);class wu{constructor(t,i){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,i){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,i),this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var i=this.parent;this._deltaHeight===0&&t!==0?i.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&i.nonZeroDeltaHeightCount--;var s=this._deltaHeight!==t;if(this._deltaHeight=t,s){i.resetTotalRowsHeight();var r=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(r,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(wu.prototype,ms);const is=Phaser.Utils.Objects.GetValue,dk=Phaser.Utils.Array.SpliceOne;class ck{constructor(t,i){this.parent=t,this.cells=[],this.cellPool=new te,this.resetFromJSON(i)}resetFromJSON(t){return this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight(),this.setDefaultCellHeight(is(t,"cellHeight",30)),this.setDefaultCellWidth(is(t,"cellWidth",30)),this.initCells(is(t,"cellsCount",0)),this.setColumnCount(is(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var i=this.cells;i.length=t;for(var s=0;s<t;s++)i[s]=null;return this}insertNewCells(t,i){var s=this.cells;if(t===s.length){var r=t+i;s.legth=r;for(var n=t;n<r;n++)s[n]=null}else{var a=[];a.length=i;for(var n=0;n<i;n++)a[n]=null;this.cells.splice(t,0,...a)}return this.resetTotalRowsHeight(),this}removeCells(t,i){for(var s=t+i,r=t;r<s;r++)this.freeCell(r);return s===this.cells.length?this.cells.length=t:(i===1?dk(this.cells,t):this.cells.splice(t,i),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,i){if(this.defaultCellHeightMode){var h=t/this.defaultCellHeight;return i?h=Math.ceil(h):h=Math.floor(h),h}for(var s=this.rowCount,r=t,n,a,h=0;;)if(a=this.getRowHeight(h),r-=a,n=h>=0&&h<s,r>0&&n)h+=1;else{if(r===0)return h;if(i){var o=h;h+=1,n=h>=0&&h<s,n||(h=o)}return h}}widthToColIndex(t,i){var s=t/this.defaultCellWidth;return i?s=Math.ceil(s):s=Math.floor(s),s}colRowToCellIndex(t,i){return t>=this.colCount?null:i*this.colCount+t}rowIndexToHeight(t,i){if(this.defaultCellHeightMode)return(i-t+1)*this.defaultCellHeight;for(var s,r=0,n=t;n<=i;n++)s=this.getRowHeight(n),r+=s;return r}colIndexToWidth(t,i){return(i-t+1)*this.defaultCellWidth}getRowHeight(t){var i=this.colCount;if(i<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var s=0,r,n=0;n<i;n++)r=this.getCellHeight(this.colRowToCellIndex(n,t)),s<r&&(s=r);return s}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var i;if(this.defaultCellHeightMode)i=this.defaultCellHeight;else{var s=this.getCell(t,!1),r=s?s.deltaHeight:0;i=this.defaultCellHeight+r}return i}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,i){if(!this.isValidCellIdx(t))return null;if(i===void 0&&(i=!0),this.cells[t]===null&&i){var s=this.newCell(t);this.cells[t]=s}return this.cells[t]}newCell(t){var i=this.cellPool.pop();return i===null?i=new wu(this):i.setParent(this),i.index=t,i}buildCellIndex(t){t===void 0&&(t=0);for(var i=this.cells,s,r=t,n=i.length;r<n;r++)s=i[r],s&&(s.index=r);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var fk=function(e){var t=this.table,i=this.topTableOY,s=this.bottomTableOY,r=e>this.topTableOY,n=e<this.bottomTableOY;if(this.clampTableOXY){var a=t.rowCount,h=t.heightToRowIndex(this.instHeight,!0);a<h?e=0:r?e=i:n&&(e=s)}return this._tableOY!==e&&(this._tableOY=e),r&&(this.execeedTopState||this.emit("execeedtop",this,e,i)),this.execeedTopState=r,n&&(this.execeedBottomState||this.emit("execeedbottom",this,e,s)),this.execeedBottomState=n,this},pk=function(e){var t=this.table,i=this.leftTableOX,s=this.rightTableOX,r=e>this.leftTableOX,n=e<this.rightTableOX;if(this.clampTableOXY){var a=t.colCount,h=t.widthToColIndex(this.instWidth,!0);a<h?e=0:r?e=i:n&&(e=s)}return this._tableOX!==e&&(this._tableOX=e),r&&(this.execeedLeftState||this.emit("execeedleft",this,e,i)),this.execeedLeftState=r,n&&(this.execeedRightState||this.emit("execeedright",this,e,s)),this.execeedRightState=n,this},Mu=function(e){return e.hasOwnProperty("geometryMask")?e.geometryMask:e.bitmapMask};const vk=Phaser.Geom.Intersects.RectangleToRectangle,gk=Phaser.Geom.Rectangle.Overlaps;var mk=function(e,t,i){if(!!t){i===void 0&&(i=e.getAllChildren());for(var s=e.getBounds(),r=Mu(t),n,a,h,o=0,l=i.length;o<l;o++)if(n=i[o],!n.hasOwnProperty("isRexContainerLite")&&n!==r&&!!Ck(n))if(n.getBounds)switch(a=n.getBounds(a),h=bk(s,a),h){case 4:yk(e,n);break;case 0:vk(s,a)||gk(s,a)?Lr(e,n,t):Sk(e,n);break;default:Lr(e,n,t);break}else Lr(e,n,t)}},Ck=function(e){for(;;){var t=e.rexContainer;if(t)if(t.visible){var i=t.parent;if(i){e=i;continue}else return!0}else return!1;else return e.visible}},bk=function(e,t){var i=0,s=t.top,r=t.bottom,n=t.left,a=t.right;return i+=e.contains(n,s)?1:0,i+=e.contains(n,r)?1:0,i+=e.contains(a,s)?1:0,i+=e.contains(a,r)?1:0,i},yk=function(e,t,i){e.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},Lr=function(e,t,i){e.setChildMaskVisible(t,!0),t.setMask&&t.setMask(i)},Sk=function(e,t,i){e.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()};const Br=Phaser.Utils.Objects.GetValue,xk={update:0,everyTick:1},Eu={setupChildrenMask(e){return e===!1?this:(this.setMaskUpdateMode(Br(e,"updateMode",0)),this.enableChildrenMask(Br(e,"padding",0)),this.setMaskLayer(Br(e,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(e){return typeof e=="string"&&(e=xk[e]),this.maskUpdateMode=e,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(e){var t=mi.call(this,null,this,0,e);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(e){return e===void 0&&(e=!0),this.maskChildrenFlag=e,this},setMaskLayer(e){return this.maskLayer=e,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):mk(this,this.childrenMask,this.getAllChildren(),this.maskLayer),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var e=Mu(this.childrenMask);return e.setPosition().resize(),this.resetChildPositionState(e),this}};var Ou=function(e){if(this.emit("cellinvisible",e),this.cellContainersPool){var t=e.popContainer();t&&this.cellContainersPool.killAndHide(t)}e.destroyContainer()},eo=function(){var e=this.preVisibleCells,t=this.visibleCells;e.iterate(function(i){t.contains(i)||Ou.call(this,i)},this)},_u=function(e){var t=null,i=e.getContainer();if(i?(t=i,e.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",e,t,this),this.cellContainersPool){var i=e.getContainer();i?t===null?this.cellContainersPool.add(i):t!==i&&(this.cellContainersPool.add(i),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},Tk=function(){if(this.cellsCount!==0){var e=this.table,t=e.heightToRowIndex(-this.tableOY);t<=0&&(t=0);var i=t,s=e.widthToColIndex(-this.tableOX);s<=0&&(s=0);for(var r=s,n=e.colRowToCellIndex(r,i),a=this.bottomBound,h=this.rightBound,o=e.cellsCount-1,l=e.colCount-1,u=kk.call(this,r),d=u,c=Pk.call(this,i);c<a&&n<=o;){if(this.table.isValidCellIdx(n)){var f=e.getCell(n,!0);this.visibleCells.set(f),this.preVisibleCells.contains(f)||_u.call(this,f),this.scrollMode===0?f.setXY(d,c):f.setXY(c,d)}d<h&&r<l?(d+=e.getColWidth(r),r+=1):(d=u,c+=e.getRowHeight(i),r=s,i+=1),n=e.colRowToCellIndex(r,i)}}},kk=function(e){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,i=this.tableOX+this.table.colIndexToWidth(0,e-1)+t;return i},Pk=function(e){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,i=this.tableOY+this.table.rowIndexToHeight(0,e-1)+t;return i},wk=function(e){return e===void 0&&(e=!1),e&&(io.call(this),eo.call(this)),io.call(this),Tk.call(this),eo.call(this),this.setMaskChildrenFlag(),this},io=function(){var e=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=e,this.visibleCells.clear()},Mk=function(e){var t=this.table.getCell(e,!1);return t&&this.visibleCells.contains(t)},Ru=function(e,t){t-=this.y+this.topLeftY,e-=this.x+this.topLeftX;var i=this.tableOY-(this.scrollMode===0?t:e),s=this.tableOX-(this.scrollMode===0?e:t),r=this.table,n=r.heightToRowIndex(-i),a=r.widthToColIndex(-s),h=r.colRowToCellIndex(a,n);return h===null||!this.isCellVisible(h)?null:h},Ek=function(e,t){var i=Ru.call(this,e,t);if(i!==null)return this.getCellContainer(i)},Ok=function(e,t){return this.visibleCells.each(e,t),this},_k=function(e,t){return this.visibleCells.iterate(e,t),this},Rk=function(e,t){return this.table.cells.slice().forEach(e,t),this},Lk=function(e,t){return this.table.cells.forEach(e,t),this},Bk=function(e){var t=this.cellsCount;return t===e?this:(t>e?this.removeCells(e,t-e):this.insertNewCells(t,e-t),this)};const Ik=Phaser.Math.Clamp;var Gk=function(e,t){return typeof e=="object"&&(e=e.index),t===void 0&&(t=1),t<=0?this:(e=Ik(e,0,this.cellsCount),this.table.insertNewCells(e,t),this)},Dk=function(e,t){if(typeof e=="object"&&(e=e.index),t===void 0&&(t=1),e<0&&(t+=e,e=0),t<=0)return this;if(e>this.cellsCount)return this;for(var i,s=e,r=e+t;s<r;s++)i=this.getCell(s,!1),i&&(this.visibleCells.contains(i)&&(Ou.call(this,i),this.visibleCells.delete(i)),this.preVisibleCells.delete(i));return this.table.removeCells(e,t),this},Ak=function(e){return this.table.colCount===e?this:(this.table.setColumnCount(e),this)},$k=function(e,t){return this.setCellsCount(e*t),this.table.setColumnCount(e),this},Vk=function(e){var t=this.table.getCell(e,!1);return!t||!t.container?this:(_u.call(this,t),this)},Lu={setTableOY:fk,setTableOX:pk,updateTable:wk,isCellVisible:Mk,pointToCellIndex:Ru,pointToCellContainer:Ek,eachVisibleCell:Ok,iterateVisibleCell:_k,eachCell:Rk,iterateCell:Lk,setCellsCount:Bk,insertNewCells:Gk,removeCells:Dk,setColumnCount:Ak,setGridSize:$k,updateVisibleCell:Vk};Object.assign(Lu,Eu);const zk=Phaser.GameObjects.Group,so=Phaser.Structs.Set,Tt=Phaser.Utils.Objects.GetValue;class Bu extends ee{constructor(t,i,s,r,n,a){a===void 0&&(a={}),super(t,i,s,r,n),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new so,this.preVisibleCells=new so,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var h=Tt(a,"reuseCellContainer",!1);h&&(this.cellContainersPool=new zk(t));var o=Tt(a,"cellVisibleCallback",null);if(o!==null){var l=Tt(a,"cellVisibleCallbackScope",void 0);this.on("cellvisible",o,l)}if(o=Tt(a,"cellInvisibleCallback",null),o!==null){var l=Tt(a,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",o,l)}if(this.setupChildrenMask(Tt(a,"mask",void 0)),this.setScrollMode(Tt(a,"scrollMode",0)),this.setClampMode(Tt(a,"clamplTableOXY",!0)),this.scrollMode===0){var u=Tt(a,"cellWidth",void 0);if(this.expandCellSize=u===void 0,u===void 0){var d=Tt(a,"columns",1);a.cellWidth=this.width/d}}else{var u=Tt(a,"cellHeight",void 0),c=Tt(a,"cellWidth",void 0);this.expandCellSize=u===void 0,a.cellWidth=u,a.cellHeight=c}this.table=new ck(this,a),this.updateTable()}destroy(t){!this.scene||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=Fk[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,i){return this.setTableOY(i).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,i){return this.addTableOY(i).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var i=this.table.getCell(t,!1),s;return i&&(s=i.getContainer()),s}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,i){var s;return typeof t=="number"?s=this.table.getCell(t,!0):s=t,s.height=i,this}setCellWidth(t,i){var s;return typeof t=="number"?s=this.table.getCell(t,!0):s=t,s.width=i,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,i=this.tableWidth,s=this.instWidth;return i>s?t=i-s:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,i){return this.width===t&&this.height===i?this:(super.resize(t,i),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(Bu.prototype,Lu);const Fk={v:0,vertical:0,h:1,horizontal:1};var Wk=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.tableOY},set:function(t){e.tableOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTableOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTableOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.instHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.tableHeight}})},Yk=function(e){e.on("cellvisible",function(t,a,s){var r=this.createCellContainerCallback,n=this.createCellContainerCallbackScope;t.item=this.items[t.index];var a;n?a=r.call(n,t,a,s):a=r(t,a,s),a&&(a.setOrigin&&a.setOrigin(0),a.isRexSizer&&a.layout()),t.item=void 0,t.setContainer(a)},this)},Xt=function(e,t,i,s,r,n,a){var h;if(r===void 0?h=s:h=i.pointToCellIndex(s,r),h!=null){var o=i.getCellContainer(h);o&&e.emit(t,o,h,n,a)}},Nk=function(e,t){e.on("pointerdown",function(i,s,r,n){Xt(this.eventEmitter,"cell.down",e,i.x,i.y,i,n)},this).on("pointerup",function(i,s,r,n){Xt(this.eventEmitter,"cell.up",e,i.x,i.y,i,n)},this)},Hk=function(e,t){e.on("pointermove",ro,this).on("pointerover",ro,this).on("pointerout",Uk,this)},ro=function(e,t,i,s){var r=this.childrenMap.child,n=r.pointToCellIndex(e.x,e.y);if(n!==r.input.lastOverCellIndex){var a=r.input.lastOverCellIndex;r.input.lastOverCellIndex=n,Xt(this.eventEmitter,"cell.out",r,a,void 0,e,s),Xt(this.eventEmitter,"cell.over",r,n,void 0,e,s)}},Uk=function(e,t){var i=this.childrenMap.child,s=i.input.lastOverCellIndex;i.input.lastOverCellIndex=void 0,Xt(this.eventEmitter,"cell.out",i,s,void 0,e,t)};const Xk=Phaser.Utils.Objects.GetValue;var jk=function(e,t){var i=Xk(t,"click",void 0);i!==!1&&(i===void 0&&(i={}),i.threshold=10,e._click=new Ls(e,i),e._click.on("click",function(s,r,n,a){Xt(this.eventEmitter,"cell.click",r,n.x,n.y,n,a)},this))};const Kk=Phaser.Utils.Objects.GetValue;var Jk=function(e,t){var i=Kk(t,"tap",void 0);i!==!1&&(e._tap=new eu(e,i),e._tap.on("tap",function(s,r,n){var a=`cell.${s.tapsCount}tap`;Xt(this.eventEmitter,a,s.gameObject,s.x,s.y,n)},this))};const Zk=Phaser.Utils.Objects.GetValue;var qk=function(e,t){var i=Zk(t,"press",void 0);i!==!1&&(e._press=new iu(e,i),e._press.on("pressstart",function(s,r,n){Xt(this.eventEmitter,"cell.pressstart",e,s.x,s.y,n)},this).on("pressend",function(s,r,n){Xt(this.eventEmitter,"cell.pressend",e,s.x,s.y,n)},this))};const Qk=Phaser.Utils.Objects.GetValue;var tP=function(e,t){var i=Qk(t,"swipe",void 0);i!==!1&&(i===void 0&&(i={}),i.dir="4dir",e._swipe=new Bn(e,i),e._swipe.on("swipe",function(s,r,n){var a=s.left?"left":s.right?"right":s.up?"up":"down";Xt(this.eventEmitter,`cell.swipe${a}`,e,s.x,s.y,n)},this))},eP=function(e,t){e.setInteractive(),Nk.call(this,e,t),Hk.call(this,e,t),jk.call(this,e,t),Jk.call(this,e,t),qk.call(this,e,t),tP.call(this,e,t)},iP=function(e){e===void 0?this.items.length=0:this.items=e;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const Ht=Phaser.Utils.Objects.GetValue;class sP extends Vs{constructor(t,i){i===void 0&&(i={});var s=$s(i),r=Ht(i,"table",void 0);r===void 0&&(r={}),r.scrollMode=s,r.clamplTableOXY=Ht(i,"clamplChildOY",!1);var n=Ht(r,"width",void 0),a=Ht(r,"height",void 0),h=new Bu(t,0,0,n,a,r);t.add.existing(h);var o,l;s===0?(o=n===void 0?1:0,l=a===void 0):(o=a===void 0?1:0,l=n===void 0),Wk(h),h.minWidth=n===void 0?0:void 0,h.minHeight=a===void 0?0:void 0,i.type="rexGridTable",i.child={gameObject:h,proportion:o,expand:l};var u=Ht(i,"space",void 0);u&&(u.child=u.table),super(t,i),this.addChildrenMap("table",h),this.addChildrenMap("tableLayer",h.maskLayer),this.eventEmitter=Ht(i,"eventEmitter",this);var d=Ht(i,"createCellContainerCallback",kt),c=Ht(i,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(d,c),Yk.call(this,h),this.resizeControllerFlag=!1;var f=s===0?"cellheightchange":"cellwidthchange";h.on(f,function(){this.resizeControllerFlag=!0},this),Ht(r,"interactive",!0)&&eP.call(this,h,r),this.setItems(Ht(i,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,i){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=i,this}refresh(){return this.setItems(this.items),this}getCell(t){var i=this.childrenMap.child;return i.getCell(t)}getCellContainer(t){var i=this.childrenMap.child;return i.getCellContainer(t)}updateVisibleCell(t){var i=this.childrenMap.child;return i.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var rP={setItems:iP};Object.assign(sP.prototype,rP);var Vn=function(e,t){return e.sameOrientation?e.orientation=t.orientation:e.orientation=t.orientation===0?1:0,e},nP=function(e,t){e.popUp(Vn(e.root.easeIn,e))},aP=function(e,t){e.scaleDown(Vn(e.root.easeOut,e))};const hP={setTransitInCallback(e){return e===void 0&&(e=nP),this.transitInCallback=e,this},setTransitOutCallback(e){return e===void 0&&(e=aP),this.transitOutCallback=e,this}};var Iu=function(e,t,i,s,r){var n=e.scene,a=n.sys.events,h=n.time.delayedCall(t,a.once,["postupdate",function(){i.call(s,r)}],a);return h};const oP={delayCall(e,t,i){return this.timer=Iu(this,e,t,i),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var lP=function(e,t){var s=this.childrenMap.subMenu;if(s&&s.parentButton===e)return this;this.collapseSubMenu();var i;this.root.toggleOrientation?i=this.orientation===0?1:0:i=this.orientation;var s=new this.constructor(this.scene,{items:t,orientation:i,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:e});return this.pin(s),this.childrenMap.subMenu=s,this.root.emit("expand",s,e,this),this},uP=function(){var e=this.root;e.emit("collapse",this,this.parentButton,e);var t=e.easeOut.duration;return e.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},dP=function(){var e=this.childrenMap.subMenu;return e===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(e),e.collapse(),this)},cP=function(e){return Ql.call(this,e)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(e):!1},Gu={expandSubMenu:lP,collapse:uP,collapseSubMenu:dP,isInTouching:cP};Object.assign(Gu,hP,oP);var fP=function(e,t,i,s){var r;return i&&(t.scene=e,s?r=i.call(s,t):r=i(t),t.scene=void 0),r},pP=function(e,t,i,s){var r,n=[],a;if(t&&i)for(var h=0,o=t.length;h<o;h++)r=t[h],r.scene=e,s?a=i.call(s,r,h,t):a=i(r,h,t),r.scene=void 0,n.push(a);return n},vP=function(e){e.on(e.root.expandEventName,function(t,i){if(!this._isPassedEvent){var s=this.root.childrenKey,r=this.items[i][s];r&&this.expandSubMenu(t,r)}},e).on("button.click",function(t,i,s,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,i,s,r),this.root._isPassedEvent=!1)},e).on("button.over",function(t,i,s,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,i,s,r),this.root._isPassedEvent=!1)},e).on("button.out",function(t,i,s,r){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,i,s,r),this.root._isPassedEvent=!1)},e)},no=function(e,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=Dn(t.orientation)===e.orientation:t.sameOrientation=!0,t.destroy=!1,t},gP=function(){var e=this.root,t=e.easeIn.duration;e.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const gt=Phaser.Utils.Objects.GetValue;class mP extends ft{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1);var s=i._rootMenu,r=i._parentMenu,n=i._parentButton,a=gt(i,"items",void 0),h=gt(i,"createBackgroundCallback",void 0),o=gt(i,"createBackgroundCallbackScope",void 0);i.background=fP(t,a,h,o);var l=gt(i,"createButtonCallback",void 0),u=gt(i,"createButtonCallbackScope",void 0);i.buttons=pP(t,a,l,u),super(t,i),this.type="rexMenu",this.items=a,this.root=s===void 0?this:s,this.parentMenu=r,this.parentButton=n,this.timer=void 0;var d=this.root===this;if(d){var c=i.bounds;c===void 0&&(c=Es(t)),this.bounds=c,this.subMenuSide=[this.y<c.centerY?qr:us,this.x<c.centerX?Zr:ls];var f=gt(i,"subMenuSide",void 0);f!==void 0&&(typeof f=="string"&&(f=CP[f]),this.subMenuSide[this.orientation]=f),this.toggleOrientation=gt(i,"toggleOrientation",!1),this.expandEventName=gt(i,"expandEvent","button.click"),this.easeIn=no(this,gt(i,"easeIn",0)),this.easeOut=no(this,gt(i,"easeOut",0)),this.setTransitInCallback(gt(i,"transitIn")),this.setTransitOutCallback(gt(i,"transitOut")),this.createBackgroundCallback=h,this.createBackgroundCallbackScope=o,this.createButtonCallback=l,this.createButtonCallbackScope=u,this.childrenKey=gt(i,"childrenKey","children"),this._isPassedEvent=!1}var p=0,v=0;if(!this.root.easeIn.sameOrientation){var g=Vn(this.root.easeIn,this).orientation,m=r?r.orientation:this.orientation,f=this.root.subMenuSide[m];g===0&&f===ls&&(p=1),g===1&&f===us&&(v=1)}if(this.setOrigin(p,v).layout(),!d){this.setScale(this.root.scaleX,this.root.scaleY);var f=this.root.subMenuSide[r.orientation];switch(f){case ls:this.alignTop(n.top).alignRight(n.left);break;case Zr:this.alignTop(n.top).alignLeft(n.right);break;case us:this.alignLeft(n.left).alignBottom(n.top);break;case qr:this.alignLeft(n.left).alignTop(n.bottom);break}}this.pushIntoBounds(this.root.bounds),vP(this),gP.call(this)}destroy(t){!this.scene||(super.destroy(t),this.removeDelayCall())}}const ls=2,Zr=0,us=3,qr=1,CP={up:us,down:qr,left:ls,right:Zr};Object.assign(mP.prototype,Gu);var bP=function(e,t){e.popUp(this.listEaseInDuration,"y","Cubic")},yP=function(e,t){e.scaleDown(this.listEaseOutDuration,"y","Linear")},SP={setWrapEnable(e){return e===void 0&&(e=!0),this.listWrapEnable=e,this},setCreateButtonCallback(e){return this.listCreateButtonCallback=e,this},setCreateBackgroundCallback(e){return this.listCreateBackgroundCallback=e,this},setButtonClickCallback(e){return this.listOnButtonClick=e,this},setButtonOverCallback(e){return this.listOnButtonOver=e,this},setButtonOutCallback(e){return this.listOnButtonOut=e,this},setListEaseInDuration(e){return e===void 0&&(e=0),this.listEaseInDuration=e,this},setListEaseOutDuration(e){return e===void 0&&(e=0),this.listEaseOutDuration=e,this},setListTransitInCallback(e){return e===void 0&&(e=bP),this.listTransitInCallback=e,this},settListTTransitOutCallback(e){return e===void 0&&(e=yP),this.listTransitOutCallback=e,this},setListBounds(e){return this.listBounds=e,this},setListWidth(e){return this.listWidth=e,this},setListHeight(e){return this.listHeight=e,this},setListSize(e,t){return this.setListWidth(e).setListHeight(t),this},setListAlignmentMode(e){return this.listAlignMode=e,this},setListSpace(e){return e===void 0&&(e={}),this.listSpace=e,this},setListDraggable(e){return e===void 0&&(e=!0),this.listDraggable=e,this}},xP=function(e){var t,i=this.listCreateBackgroundCallback;i&&(t=i.call(this,e),e.add.existing(t));var s=[],r=this.listCreateButtonCallback;if(r)for(var n=this.options,a=0,h=n.length;a<h;a++){var o=r.call(this,e,n[a],a,n);e.add.existing(o),s.push(o)}var l=this.listWidth;l===void 0&&(this.listAlignMode==="text"?l=this.getElement("text").width:l=this.width);var u=this.listHeight,d;return this.listWrapEnable?d=new Ci(e,{width:l,height:u,background:t,buttons:s,space:this.listSpace,draggable:this.listDraggable}):d=new ft(e,{width:l,height:u,orientation:"y",background:t,buttons:s,space:this.listSpace,draggable:this.listDraggable}),e.add.existing(d),d},TP=function(){if(this.listPanel)return this;var e=this.scene,t=xP.call(this,e).setOrigin(0,0).layout(),i=this.getElement(this.listAlignMode).getTopLeft().x;t.setPosition(i,this.bottom);var s=this.listBounds;s||(s=Es(e)),t.bottom>s.bottom&&t.changeOrigin(0,1).setPosition(i,this.top),t.on("button.over",function(n,a,h,o){this.listOnButtonOver&&this.listOnButtonOver.call(this,n,a,h,o),this.emit("button.over",this,t,n,a,h,o)},this).on("button.out",function(n,a,h,o){this.listOnButtonOut&&this.listOnButtonOut.call(this,n,a,h,o),this.emit("button.out",this,t,n,a,h,o)},this);var r=this.listEaseInDuration;return this.listTransitInCallback(t,r),this.delayCall(r,function(){var n=this.listOnButtonClick;n&&t.on("button.click",function(a,h,o,l){n.call(this,a,h,o,l),this.emit("button.click",this,t,a,h,o,l)},this),e.input.once("pointerup",this.closeListPanel,this),this.emit("list.open",this,t)},this),this.pin(t),this.listPanel=t,this},kP=function(){if(!this.listPanel)return this;var e=this.listPanel;this.listPanel=void 0;var t=this.listEaseOutDuration;return this.listTransitOutCallback(e,t),this.delayCall(t,function(){this.emit("list.close",this,e),e.destroy()},this),this},PP=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this};const wP={delayCall(e,t,i){return this.timer=Iu(this,e,t,i),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var Du={openListPanel:TP,closeListPanel:kP,toggleListPanel:PP};Object.assign(Du,SP,wP);const W=Phaser.Utils.Objects.GetValue;class MP extends yu{constructor(t,i){super(t,i),this.type="rexDropDownList",this.timer=void 0,this.setOptions(W(i,"options"));var s=W(i,"list");this.setWrapEnable(W(s,"wrap",!1)),this.setCreateButtonCallback(W(s,"createButtonCallback")),this.setCreateBackgroundCallback(W(s,"createBackgroundCallback")),this.setButtonClickCallback(W(s,"onButtonClick")),this.setButtonOverCallback(W(s,"onButtonOver")),this.setButtonOutCallback(W(s,"onButtonOut")),this.setListEaseInDuration(W(s,"easeIn",500)),this.setListEaseOutDuration(W(s,"easeOut",100)),this.setListTransitInCallback(W(s,"transitIn")),this.settListTTransitOutCallback(W(s,"transitOut")),this.setListSize(W(s,"width"),W(s,"height")),this.setListAlignmentMode(W(s,"alignParent","text")),this.setListBounds(W(s,"bounds")),this.setListSpace(W(s,"space")),this.setListDraggable(W(s,"draggable",!1)),this.setValueChangeCallback(W(i,"setValueCallback"),W(i,"setValueCallbackScope")),this.setValue(W(i,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t),this.removeDelayCall())}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,i){return this.valueChangeCallback=t,this.valueChangeCallbackScope=i,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var i=this._value;this._value=t;var s=this.valueChangeCallback,r=this.valueChangeCallbackScope;s&&(r?s.call(r,this,t,i):s(this,t,i))}}}Object.assign(MP.prototype,Du);const EP=Phaser.GameObjects.Text;var OP=function(e){return e instanceof EP};const _P=Phaser.GameObjects.BitmapText;var RP=function(e){return e instanceof _P};const wt=0,Dt=1,At=2;var zs=function(e){var t;return RP(e)?t=At:OP(e)?t=wt:t=Dt,t},zn=function(e,t,i){var s=zs(e);switch(s){case wt:i=e.getWrappedText(t);break;case Dt:i=e.getPenManager(t,i);break;case At:e.maxWidth>0?i=e.setText(t).getTextBounds().wrappedText.split(`
`):i=t.split(`
`);break}return i},LP=function(e,t){e===void 0&&(e=this.startLineIndex),t===void 0&&(t=e+this.pageLinesCount);var i;switch(this.textObjectType){case wt:case At:i=this.lines.slice(e,t).join(`
`);break;case Dt:var s=this.lines.getLineStartIndex(e),r=this.lines.getLineEndIndex(t-1);i=this.lines.getSliceTagText(s,r,!0);break}return i},Ir=function(e){return Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e};const BP={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(i){var t=this.totalLinesCount;this.sections.push(Ir(i));var i=this.sections.join(`
`);this.lines=zn(this.parent,i,this.lines);for(var s=this.totalLinesCount-t,r=Math.ceil(s/this.pageLinesCount),n=0;n<r;n++)this.pageStartIndexes.push(t+n*this.pageLinesCount);return this},setText(e,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var i=Ir(e).split(this.pageBreak),s=0,r=i.length;s<r;s++)this.appendPage(i[s]);return this},appendText(e){var t=this.content+Ir(e);return this.setText(t,!1),this}},IP=Phaser.Math.Clamp,GP={getPage(e){return e===void 0&&(e=this.pageIndex),this.setPageIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(e){return e=IP(e,0,this.pageCount-1),this.pageIndex=e,this.startLineIndex=this.pageStartIndexes[e],this.endLineIndex=this.pageStartIndexes[e+1],this}};var Au=function(e,t){var i=zs(e);switch(i){case wt:var n=e.style,s=n.wordWrapWidth,r=n.wordWrapCallback;n.wordWrapWidth=0,n.wordWrapCallback=void 0,e.setText(t),n.wordWrapWidth=s,n.wordWrapCallback=r;break;case Dt:var n=e.style,a=n.wrapMode;n.wrapMode=0,e.setText(t),n.wrapMode=a;break;case At:var h=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=h;break}};const DP={showPage(e){return this.displayText(this.getPage(e)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(e){Au(this.parent,e)}};var $u={getLines:LP};Object.assign($u,BP,GP,DP);const di=Phaser.Utils.Objects.GetValue,AP=Phaser.Math.Clamp;class $P extends Mt{constructor(t,i){super(t,{eventEmitter:!1}),this.textObjectType=zs(this.parent),this.pageStartIndexes=[],this.lines=zn(this.parent,""),this.sections=[],this.resetFromJSON(i)}resetFromJSON(t){return this.setMaxLines(di(t,"maxLines",void 0)),this.setPageBreak(di(t,"pageBreak",`\f
`)),this.setText(di(t,"text","")),this.setStartLineIndex(di(t,"start",0)),this.setPageIndex(di(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case wt:this.lines.length=0;break;case Dt:this.lines.destroy();break;case At:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=AP(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case wt:case Dt:var i=this.parent.style.maxLines;i>0?t=i:t=this.totalLinesCount;break;case At:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign($P.prototype,$u);Phaser.Utils.Objects.GetFastValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;const mt=Phaser.Utils.Objects.GetValue;class OE extends Z{constructor(t,i){super(t,i),this.type="rexNumberBar";var s=mt(i,"background",void 0),r=mt(i,"icon",void 0),n=mt(i,"iconMask",void 0),a=mt(i,"slider",void 0),h=mt(i,"text",void 0),o=mt(i,"space.icon",0),l=mt(i,"space.slider",0);if(s&&this.addBackground(s),r){var u;this.orientation===0?(a||h)&&(u={right:o}):(a||h)&&(u={bottom:o}),this.add(r,{proportion:0,align:"center",padding:u}),n&&(n=mi.call(this,r,r,1))}var d;if(a){a.orientation=this.orientation,a.eventEmitter=this,a.value=null,a.hasOwnProperty("input")||(a.input=-1),d=new $n(t,a),t.add.existing(d);var u;this.orientation===0?h&&(u={right:l}):h&&(u={bottom:l});var c;if(this.orientation===0){var f=mt(a,"width",void 0);c=f===void 0?1:0}else{var p=mt(a,"height",void 0);c=p===void 0?1:0}this.add(d,{proportion:c,align:"center",padding:u})}h&&this.add(h),this.addChildrenMap("background",s),this.addChildrenMap("icon",r),this.addChildrenMap("iconMask",n),this.addChildrenMap("slider",d),this.addChildrenMap("text",h);var v=mt(i,"valuechangeCallback",null);if(v!==null){var g=mt(i,"valuechangeCallbackScope",void 0);this.on("valuechange",v,g)}this.setEnable(mt(i,"enable",void 0)),this.setValue(mt(i,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,s),this}addValue(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,s),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,s),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var i;return t.text?i=t.text:i=t.getData("text"),i}set text(t){var i=this.childrenMap.text;i!==void 0&&(i.setText?i.setText(t):i.setData("text",t))}setText(t){return this.text=t,this}}Phaser.Utils.Objects.GetValue;const VP=Ri.prototype.add;var ao=function(e,t,i,s,r,n,a,h,o){return e.setVisible(!1),VP.call(this,e,t,i,s,r,n,a,h,o),this};const zP={add:ao,addPage:ao};var FP=function(e){return e===void 0?null:this.sizerChildren.hasOwnProperty(e)?this.sizerChildren[e]:null};const ho=ee.prototype.setChildVisible;var WP=function(e){this._previousKey=this._currentKey;var t=this.previousPage;t&&(this.swapMode===0?(ho.call(this,t,!1),this.emit("pageinvisible",t,this._previousKey,this)):t.destroy()),e&&!this.sizerChildren.hasOwnProperty(e)&&this.emit("createpage",e,this),this._currentKey=e;var i=this.currentPage;return i&&(ho.call(this,i,!0),this.emit("pagevisible",i,this._currentKey,this),this.fadeInDuration>0&&i.setAlpha(0).fadeIn(this.fadeInDuration,1)),this},YP=function(e){return this.sizerChildren.hasOwnProperty(e)},Vu={getPage:FP,swapPage:WP,hasPage:YP};Object.assign(Vu,zP);const oo=Phaser.Utils.Objects.GetValue;class zu extends Ri{constructor(t,i){super(t,i),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(oo(i,"swapMode",0)),this.setFadeInDuration(oo(i,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=NP[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(zu.prototype,Vu);const NP={invisible:0,destroy:1};var HP=function(e){var t=this.getElement("tabs.buttons");if(!(e>=t.length))return t[e].name},UP=function(e){for(var t=this.getElement("tabs.buttons"),i=0,s=t.length;i<s;i++)if(t[i].name===e)return i};const XP=Phaser.Utils.Objects.IsPlainObject,Gr=Phaser.Utils.Objects.GetValue,jP=Phaser.Utils.String.UUID;var KP=function(e,t,i){if(XP(e)){var s=e;e=Gr(s,"key"),t=Gr(s,"tab"),i=Gr(s,"page")}return e||(e=jP()),t.name=e,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(i,{key:e}),this},JP=function(e){var t;return typeof e=="number"?t=e:t=this.getPageIndex(e),t!=null&&this.childrenMap.tabs.emitButtonClick(t),this},ZP=function(){return this.swapPage(0),this},qP=function(){return this.swapPage(this.getElement("tabs.buttons").length-1),this};const QP={swapPage:JP,swapFirstPage:ZP,swapLastPage:qP};var tw=function(e,t){typeof e=="number"&&(e=this.getPageKey(e));var i=this.childrenMap.tabs,s=i.getByName(e),r=this.childrenMap.pages,n=r.getElement(e);return!s||!n?this:(r.removeChildrenMap(e),i.removeButton(s,t),r.remove(n,t),this)};const ew={removePage:tw};var iw=function(e){return typeof e=="number"&&(e=this.getPageKey(e)),this.childrenMap.pages.getPage(e)},sw=function(e){var t;return typeof e=="number"?t=e:t=this.getPageIndex(e),this.getElement("tabs.buttons")[t]},Fu={getPageKey:HP,getPageIndex:UP,addPage:KP,getPage:iw,getTab:sw};Object.assign(Fu,QP,ew);const Te=Phaser.Utils.Objects.GetValue,ss=Z.prototype.add;class rw extends Z{constructor(t,i){i===void 0&&(i={});var s=Te(i,"tabPosition","top"),r=s==="left"||s==="right"?"x":"y";i.orientation=r,super(t,i),this.type="rexTabPages";var n=Te(i,"background",void 0);n&&this.addBackground(n);var a=Te(i,"pages"),h=new zu(t,a);t.add.existing(h);var o=r==="y",l=o?Te(i,"wrapTabs",!1):!1,u=Te(i,"tabs",void 0);u===void 0&&(u={});var d=l?Ci:ft;u.orientation=o?"x":"y",u.buttonsType="radio";var c=new d(t,u);t.add.existing(c);var f=l?!0:Te(i,"expand.tabs",!1),p=Te(i,"align.tabs","left");switch(s){case"top":case"left":ss.call(this,c,{proportion:0,expand:f,align:p}),ss.call(this,h,{proportion:1,expand:!0});break;case"bottom":case"right":ss.call(this,h,{proportion:1,expand:!0}),ss.call(this,c,{proportion:0,expand:f,align:p});break}this.addChildrenMap("background",n),this.addChildrenMap("tabs",c),this.addChildrenMap("pages",h),c.on("button.click",function(v){var g=v.name;h.hasPage(g)&&h.swapPage(g)}),c.on("button.statechange",function(v,g,m,b){var S=m?"tab.focus":"tab.blur";this.emit(S,v,v.name)},this),h.on("pagevisible",function(v,g,m){this.emit("page.focus",v,g)}),h.on("pageinvisible",function(v,g,m){this.emit("page.blur",v,g)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}}Object.assign(rw.prototype,Fu);var nw=function(e){return e!==void 0&&(this.text=e),this.lines=zn(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},Wu=function(e){return(e-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},Yu=function(e){return e*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},aw=function(e){var t=e+this.visibleLinesCount+1,i;switch(this.textObjectType){case wt:i=this.lines.slice(e,t).join(`
`);break;case Dt:var s=this.lines.getLineStartIndex(e),r=this.lines.getLineEndIndex(t-1);i=this.lines.getSliceTagText(s,r,!0);break;case At:i=this.lines.slice(e,t).join(`
`);break}return i},Nu=function(){var e=this.textObject.rexSizer;this.textObject.y+=e.offsetY-e.preOffsetY,e.preOffsetY=e.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&hw.call(this)},hw=function(){if(!!this.textObject.setCrop){var e=this.textObject.rexSizer.offsetY,t,i;e<=0?(t=-e,i=this.height):(t=0,i=this.height-e),this.textObject.setCrop(0,t,this.width,i)}},ow=function(){var e=Math.max(Math.floor(Wu.call(this,-this.textOY)),0),t=Yu.call(this,e)+this.textOY,i=aw.call(this,e);return Au(this.textObject,i),this.textObject.rexSizer.offsetY=t,Nu.call(this),this},lw=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Ei.call(this),this},uw=function(e,t,i){if(i+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===i)){switch(this.textObjectWidth=t,this._textObjectRealHeight=i,this.textObjectType){case wt:case Dt:e.setFixedSize(t,i);var s=e.style,r=Math.max(t,0);this.textObjectType===wt?s.wordWrapWidth=r:(s.wrapMode===0&&(s.wrapMode=1),s.wrapWidth=r);break;case At:e.setMaxWidth(t);break}this.setText()}},dw=function(){var e,t,i,s=this.left,r=this.top,n,a,h,o;e=this.textObject,e.rexSizer.hidden||(t=e.rexSizer,i=t.padding,n=s+i.left,a=r+i.top,h=this.width-i.left-i.right,o=this.height-i.top-i.bottom,uw.call(this,e,h,o),_s(e,n,a,h,o,t.align),t.preOffsetY=0,Nu.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))};const cw={setText:nw,updateTextObject:ow,preLayout:lw,layoutChildren:dw},lo=Phaser.Utils.Objects.IsPlainObject,Ct=Phaser.Utils.Objects.GetValue,fw=Phaser.Display.Align.TOP_LEFT;class Hu extends Oe{constructor(t,i,s,r,n,a){lo(i)?(a=i,i=Ct(a,"x",0),s=Ct(a,"y",0),r=Ct(a,"width",void 0),n=Ct(a,"height",void 0)):lo(r)&&(a=r,r=Ct(a,"width",void 0),n=Ct(a,"height",void 0)),super(t,i,s,r,n,a),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=Ct(a,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Ct(a,"clamplTextOY",!0)),this.alwaysScrollable=Ct(a,"alwaysScrollable",!1);var h=Ct(a,"background",void 0),o=Ct(a,"text",void 0);o===void 0&&(o=pw(t)),this.textCropEnable=Ct(a,"textCrop",!!o.setCrop);var l=Ct(a,"textMask",!this.textCropEnable);h&&this.addBackground(h),this.add(o),this.sizerChildren=[o];var u=this.getSizerConfig(o);u.align=fw,u.padding=je(0),u.expand=!0,this.textObject=o,this.textObjectType=zs(o),u.preOffsetY=0,u.offsetY=0,l&&(this.textMask=mi.call(this,this.textObject,this)),this.addChildrenMap("background",h),this.addChildrenMap("text",o)}destroy(t){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case wt:this.lines.length=0;break;case Dt:this.lines.destroy();break;case At:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case wt:case Dt:var i=this.textObject.style;t=i.metrics.fontSize+i.strokeThickness;break;case At:var s=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*s;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case wt:case Dt:t=this.textObject.lineSpacing;break;case At:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(Wu.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=Yu.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var i=this.topTextOY,s=this.bottomTextOY,r=this.textOYExceedTop(t),n=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:r?t=i:n&&(t=s)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),r&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=r,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,s)),this.execeedBottomState=n}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var pw=function(e){return e.add.text(0,0,"")};Object.assign(Hu.prototype,cw);var vw=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textObjectHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.textHeight}})},gw=function(e){var t=this.childrenMap.child;return t.setText(e),this.resizeController(),this},mw=function(e){return this.setText(this.text+e),this};const qt=Phaser.Utils.Objects.GetValue;class Cw extends Vs{constructor(t,i){i===void 0&&(i={});var s=qt(i,"text",void 0),r=qt(i,"textWidth",void 0),n=qt(i,"textHeight",void 0),a=qt(i,"textCrop",!!s.setCrop),h=qt(i,"textMask",!a),o=qt(i,"content",""),l=new Hu(t,{width:r,height:n,text:s,textMask:h,textCrop:a&&!h,content:o,clamplTextOY:qt(i,"clamplChildOY",!1),alwaysScrollable:qt(i,"alwaysScrollable",!1)});t.add.existing(l);var u=r===void 0?1:0,d=n===void 0;vw(l),i.scrollMode=0,i.type="rexTextArea",i.child={gameObject:l,proportion:u,expand:d};var c=qt(i,"space",void 0);c&&(c.child=c.text),super(t,i),this.addChildrenMap("text",s)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var bw={setText:gw,appendText:mw};Object.assign(Cw.prototype,bw);var yw=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,i=t.rexSizer;return i.hidden?e=0:this.scrollMode===0?e=this.getChildWidth(t):e=0,e},Sw=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,i=t.rexSizer;return i.hidden||this.scrollMode===0?e=0:e=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:B(t),e},xw=function(e){return e===void 0&&(e=[]),this.child&&this.child.isRexSizer&&e.push(this.child),e},Tw=function(){var e=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:e+=this.childOY,this.child.setPosition(e,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},kw=function(){var e=this.child,t,i;e.rexSizer.hidden||(this.scrollMode===0?t=this.width:i=this.height,e.isRexSizer?e.runLayout(this,t,i):de(e,t,i),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},Uu={getChildrenWidth:yw,getChildrenHeight:Sw,getChildrenSizers:xw,resetChildPosition:Tw,layoutChildren:kw};Object.assign(Uu,Eu);const uo=Phaser.Utils.Objects.IsPlainObject,It=Phaser.Utils.Objects.GetValue,Pw=Phaser.Display.Align.TOP_LEFT;class Xu extends Oe{constructor(t,i,s,r,n,a){uo(i)?(a=i,i=It(a,"x",0),s=It(a,"y",0),r=It(a,"width",void 0),n=It(a,"height",void 0)):uo(r)&&(a=r,r=It(a,"width",void 0),n=It(a,"height",void 0)),super(t,i,s,r,n,a),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(It(a,"scrollMode",!0)),this.setClampMode(It(a,"clamplChildOY",!0));var h=It(a,"child",void 0),o=It(a,"expand",!0);h.setOrigin&&h.setOrigin(0),this.add(h),this.sizerChildren=[h];var l=this.getSizerConfig(h);l.align=Pw,l.expand=o,this.child=h,this.setupChildrenMask(It(a,"mask",void 0))}destroy(t){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=Pu[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?B(this.child):$(this.child)}get childWidth(){return this.scrollMode===0?$(this.child):B(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var i=this.topChildOY,s=this.bottomChildOY,r=this.childOYExceedTop(t),n=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:r?t=i:n&&(t=s)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),r&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=r,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,s)),this.execeedBottomState=n}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(Xu.prototype,Uu);const ci=Phaser.Utils.Objects.GetValue;class _E extends Vs{constructor(t,i){i===void 0&&(i={});var s=$s(i),r=ci(i,"panel",void 0);r===void 0&&(r={}),r.scrollMode=s,r.clamplChildOY=ci(i,"clamplChildOY",!1);var n=new Xu(t,r);t.add.existing(n);var a=ci(r,"width",void 0),h=ci(r,"height",void 0),o,l;s===0?(o=a===void 0?1:0,l=h===void 0):(o=h===void 0?1:0,l=a===void 0),i.type="rexScrollablePanel",i.child={gameObject:n,proportion:o,expand:l};var u=ci(i,"space",void 0);u&&(u.child=u.panel),super(t,i),this.addChildrenMap("panel",n.child),this.addChildrenMap("panelLayer",n.maskLayer)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),ru(this.childrenMap.child,t),this}}const rs={popUp:function(e,t){e.popUp(t)},scaleDown:function(e,t){e.scaleDown(t)},fadeIn:function(e,t){e.fadeIn(t)},fadeOut:function(e,t){e.fadeOut(t)}};var ju=function(e,t,i,s){i===void 0&&(i=0),s===void 0&&(s=t.length),e.length=s-i;for(var r=0,n=e.length;r<n;r++)e[r]=t[r+i];return e};const ds=Phaser.Utils.Objects.GetValue;var Qr=function(e,t,i){var s=ds(i,"reverse",!1),r;if($t(e[0]))if(s)for(var a=e.length,n=a-1;n>=0;n--)r=Qr(e[n],t,i);else for(var n=0,a=e.length;n<a;n++)r=Qr(e[n],t,i);else r=ww(e,t,i);return r},ww=function(e,t,i){var s=ds(i,"argsConvert",void 0),r=ds(i,"argsConvertScope",void 0),n=e[0];if(ae=ju(ae,e,1),s){s===!0&&(s=Bl,r=void 0);for(var a=0,h=ae.length;a<h;a++)r?ae[a]=s.call(r,ae[a],e):ae[a]=s(ae[a],e)}var o;typeof n=="string"?(o=t[n],o==null&&(o=ds(t,n,null))):o=n;var l=o.apply(t,ae);return l},ae=[];const Gt=Phaser.Utils.Objects.GetValue;class Mw extends Mt{constructor(t,i){super(t,i);var s=Gt(i,"clock",void 0);s||(s=new zl(t)),this.clock=s,this.clock.on("update",this.update,this),this.resetFromJSON(i)}resetFromJSON(t){return this.clock.resetFromJSON(Gt(t,"clock",void 0)),this.state=Gt(t,"state",0),this.commands=Gt(t,"commands",[]),this.scope=Gt(t,"scope",void 0),this.setTimeUnit(Gt(t,"timeUnit",0)),this.setDtMode(Gt(t,"dtMode",0)),this.index=Gt(t,"index",0),this.nextTime=Gt(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,i,s){this.stop();var r=Gt(s,"timeUnit",void 0);r!==void 0&&this.setTimeUnit(r);var n=Gt(s,"dtMode",void 0);return n!==void 0&&this.setDtMode(n),t=t.filter(function(a){var h=a[0];return!isNaN(h)}).map(function(a){var h=a[0];return typeof h=="string"&&(a[0]=parseFloat(a[0])),a}),this.dtMode===0&&t.sort(function(a,h){var o=a[0],l=h[0];return o>l?1:o<l?-1:0}),this.commands=t,this.scope=i,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var i=this.commands.length-1;;){var s=this.commands[this.index],r=s[1];if($t(r)||(r=ju(Ew,s,1)),Qr(r,this.scope),this.emit("runcommand",r,this.scope),this.index===i)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var i=this.commands[this.index][0];return this.timeUnit===1&&(i=i*1e3),this.dtMode===1&&(i+=t),i}setDtMode(t){return typeof t=="string"&&(t=_w[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=Ow[t]),this.timeUnit=t,this}}var Ew=[];const Ow={ms:0,s:1,sec:1},_w={abs:0,absolute:0,inc:1,increment:1},fi=Phaser.Utils.Objects.GetValue;class RE extends yu{constructor(t,i){i===void 0&&(i={text:createDefaultTextObject(t)}),super(t,i),this.type="rexToast",this.setTransitInTime(fi(i,"duration.in",200)),this.setDisplayTime(fi(i,"duration.hold",1200)),this.setTransitOutTime(fi(i,"duration.out",200)),this.setTransitInCallback(fi(i,"transitIn",he.popUp)),this.setTransitOutCallback(fi(i,"transitOut",he.scaleDown)),this.player=new Mw(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=he[t]),t){case he.popUp:t=rs.popUp;break;case he.fadeIn:t=rs.fadeIn;break}return t||(t=kt),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=he[t]),t){case he.scaleDown:t=rs.scaleDown;break;case he.fadeOut:t=rs.fadeOut;break}return t||(t=kt),this.transitOutCallback=t,this}setScale(t,i){return i===void 0&&(i=t),this.scaleX0=t,this.scaleY0=i,super.setScale(t,i),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var i=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[kt]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[kt]]];return this.player.load(i,this).once("complete",function(){this.showMessage()},this).start(),this}}const he={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var Rw=function(){return function(e,t,i,s){t!=="panel"&&i.setChildVisible(e,!0)}},Lw=function(){return function(e,t,i,s){t!=="panel"&&i.setChildVisible(e,!1)}};const Bw={show:Rw,hide:Lw};var Iw=function(e,t){return t===void 0&&(t=1),function(i,s,r,n){s!=="panel"&&r.fadeChild(i,n?0:e,t)}},Gw=function(e,t){return t===void 0&&(t=0),function(i,s,r,n){s!=="panel"&&r.fadeChild(i,n?0:e,t)}};const Dw={show:Iw,hide:Gw};var co=function(e,t){return function(i,s,r,n){s!=="panel"&&r.moveChild(i,n?0:e,t)}};const Aw={show:co,hide:co};var fo=function(e,t){return function(i,s,r,n){s==="panel"&&r.moveChild(i,n?0:e,t)}};const $w={show:fo,hide:fo},Dr={visible:Bw,fade:Dw,move:Aw,"move-panel":$w};var Vw=function(e){var t,i;[t,...i]=typeof e=="string"?[e]:e;var s,r;return Dr.hasOwnProperty(t)?(s=Dr[t].show.apply(null,i),r=Dr[t].hide.apply(null,i)):(s=kt,r=kt),{show:s,hide:r}};const zw={showChild(e,t){var i=this.sizerChildren[e];return i&&(this.emit("showchild",i,e,this,t),this.resetChildState(i)),this},hideChild(e,t){var i=this.sizerChildren[e];return i&&(this.emit("hidechild",i,e,this,t),this.resetChildState(i)),this},swapChild(e,t){return this.currentChildKey===e||(this.currentChildKey==="panel"||e==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=e,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(e,t))),this},showPanel(e){return this.swapChild("panel",e),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var e=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(e),this},toggleRightSide(){var e=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(e),this},toggleTopSide(){var e=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(e),this},toggleBottomSide(){var e=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(e),this}},Fw=ee.prototype.setChildVisible,Ww={setChildVisible(e,t){var i;if(typeof e=="string"){var i=e;e=this.sizerChildren[i]}else i=Gs(this.sizerChildren,e);return t===void 0&&(t=this.currentChildKey===i),Fw.call(this,e,t),this}},Yw={fadeChild(e,t,i){var s;return typeof e=="string"?(s=e,e=this.sizerChildren[s]):s=Gs(this.sizerChildren,e),t===void 0&&(t=500),i===void 0&&(i=this.currentChildKey===s?1:0),e.fadeIn(t,{start:e.alpha,end:i}),this},fadeChildPromise(e,t,i){return typeof e=="string"&&(e=this.sizerChildren[key]),this.fadeChild(e,t,i),e._fade?et(e._fade):Promise.resolve()}},Nw={moveChild(e,t,i,s){var r;typeof e=="string"?(r=e,e=this.sizerChildren[r]):r=Gs(this.sizerChildren,e),t===void 0&&(t=500);var n=this.currentChildKey===r;if(s===void 0)switch(r){case"leftSide":case"rightSide":s=$(e);break;case"topSide":case"bottomSide":s=B(e);break;default:if(n)switch(this.previousChildKey){case"leftSide":case"rightSide":s=$(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":s=B(this.sizerChildren[this.previousChildKey]);break;default:s=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":s=$(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":s=B(this.sizerChildren[this.currentChildKey]);break;default:s=0;break}break}var a,h,o,l;if(n)switch(r){case"panel":switch(this.previousChildKey){case"leftSide":a=!0;break;case"rightSide":h=!0;break;case"topSide":o=!0;break;case"bottomSide":l=!0;break}break;case"leftSide":h=!0;break;case"rightSide":a=!0;break;case"topSide":l=!0;break;case"bottomSide":o=!0;break}else switch(r){case"panel":switch(this.currentChildKey){case"leftSide":h=!0;break;case"rightSide":a=!0;break;case"topSide":l=!0;break;case"bottomSide":o=!0;break}break;case"leftSide":a=!0;break;case"rightSide":h=!0;break;case"topSide":o=!0;break;case"bottomSide":l=!0;break}return a?e.moveTo(t,`-=${s}`,void 0,i):h?e.moveTo(t,`+=${s}`,void 0,i):o?e.moveTo(t,void 0,`-=${s}`,i):l?e.moveTo(t,void 0,`+=${s}`,i):e.moveTo(0),this},moveChildPromise(e,t,i,s){return typeof e=="string"&&(e=this.sizerChildren[key]),this.moveChild(e,t,i,s),e._easeMove?et(e._easeMove):Promise.resolve()}};var Ku={};Object.assign(Ku,Ww,Yw,Nw);const ct=Phaser.Utils.Objects.GetValue;class Hw extends Ri{constructor(t,i){super(t,i),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var s=ct(i,"showChildCallback",void 0);if(s)if(Rn(s)){var r=ct(i,"showChildCallbackScope",void 0);this.on("showchild",s,r);var n=ct(i,"hideChildCallback",void 0),a=ct(i,"hideChildCallbackScope",void 0);this.on("hidechild",n,a)}else{var h=Vw(s);this.on("showchild",h.show),this.on("hidechild",h.hide)}var o=ct(i,"background",void 0),l=ct(i,"panel",void 0),u=ct(i,"leftSide",void 0),d=ct(i,"rightSide",void 0),c=ct(i,"topSide",void 0),f=ct(i,"bottomSide",void 0);if(o&&this.addBackground(o),l&&this.add(l,"panel","center",0,!0),u){var p=ct(i,"expand.left",!0);this.add(u,"leftSide","left-top",0,{height:p})}if(d){var p=ct(i,"expand.right",!0);this.add(d,"rightSide","right-top",0,{height:p})}if(c){var p=ct(i,"expand.top",!0);this.add(c,"topSide","left-top",0,{width:p})}if(f){var p=ct(i,"expand.bottom",!0);this.add(f,"bottomSide","left-bottom",0,{width:p})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Hw.prototype,zw,Ku);Phaser.Utils.Objects.GetValue;Phaser.Math.Distance.Between;Phaser.Math.RotateAroundDistance;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetAdvancedValue;Phaser.Math.Linear;const Ju=Phaser.Math.Vector3,Uw=Phaser.Math.Matrix4;new Ju;new Ju;new Uw;Phaser.GameObjects.Mesh;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Geom.Mesh.GenerateGridVerts;Phaser.Math.RadToDeg;const Xw=Phaser.Math.DegToRad,jw=45;1+1/Math.sin(Xw(jw));Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Utils.Objects.IsPlainObject;const Kw=Phaser.Math.DegToRad;Kw(180);Phaser.Utils.Objects.GetValue;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;Phaser.Utils.Objects.GetValue;Phaser.Geom.Rectangle;Phaser.Geom.Rectangle.Union;Phaser.Utils.Objects.GetValue;Phaser.Math.RotateAround;Phaser.Geom.Mesh.Vertex;Phaser.Geom.Mesh.Face;Phaser.GameObjects.Mesh;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Time.TimerEvent;/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Zu(e){return typeof e>"u"||e===null}function Jw(e){return typeof e=="object"&&e!==null}function Zw(e){return Array.isArray(e)?e:Zu(e)?[]:[e]}function qw(e,t){var i,s,r,n;if(t)for(n=Object.keys(t),i=0,s=n.length;i<s;i+=1)r=n[i],e[r]=t[r];return e}function Qw(e,t){var i="",s;for(s=0;s<t;s+=1)i+=e;return i}function tM(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var eM=Zu,iM=Jw,sM=Zw,rM=Qw,nM=tM,aM=qw,Fn={isNothing:eM,isObject:iM,toArray:sM,repeat:rM,isNegativeZero:nM,extend:aM};function qu(e,t){var i="",s=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(i+='in "'+e.mark.name+'" '),i+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(i+=`

`+e.mark.snippet),s+" "+i):s}function bi(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=qu(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}bi.prototype=Object.create(Error.prototype);bi.prototype.constructor=bi;bi.prototype.toString=function(t){return this.name+": "+qu(this,t)};var Me=bi,hM=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],oM=["scalar","sequence","mapping"];function lM(e){var t={};return e!==null&&Object.keys(e).forEach(function(i){e[i].forEach(function(s){t[String(s)]=i})}),t}function uM(e,t){if(t=t||{},Object.keys(t).forEach(function(i){if(hM.indexOf(i)===-1)throw new Me('Unknown option "'+i+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(i){return i},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=lM(t.styleAliases||null),oM.indexOf(this.kind)===-1)throw new Me('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var it=uM;function po(e,t){var i=[];return e[t].forEach(function(s){var r=i.length;i.forEach(function(n,a){n.tag===s.tag&&n.kind===s.kind&&n.multi===s.multi&&(r=a)}),i[r]=s}),i}function dM(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,i;function s(r){r.multi?(e.multi[r.kind].push(r),e.multi.fallback.push(r)):e[r.kind][r.tag]=e.fallback[r.tag]=r}for(t=0,i=arguments.length;t<i;t+=1)arguments[t].forEach(s);return e}function tn(e){return this.extend(e)}tn.prototype.extend=function(t){var i=[],s=[];if(t instanceof it)s.push(t);else if(Array.isArray(t))s=s.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(i=i.concat(t.implicit)),t.explicit&&(s=s.concat(t.explicit));else throw new Me("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(n){if(!(n instanceof it))throw new Me("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new Me("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new Me("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),s.forEach(function(n){if(!(n instanceof it))throw new Me("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(tn.prototype);return r.implicit=(this.implicit||[]).concat(i),r.explicit=(this.explicit||[]).concat(s),r.compiledImplicit=po(r,"implicit"),r.compiledExplicit=po(r,"explicit"),r.compiledTypeMap=dM(r.compiledImplicit,r.compiledExplicit),r};var cM=tn,fM=new it("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),pM=new it("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),vM=new it("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),gM=new cM({explicit:[fM,pM,vM]});function mM(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function CM(){return null}function bM(e){return e===null}var yM=new it("tag:yaml.org,2002:null",{kind:"scalar",resolve:mM,construct:CM,predicate:bM,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function SM(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function xM(e){return e==="true"||e==="True"||e==="TRUE"}function TM(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var kM=new it("tag:yaml.org,2002:bool",{kind:"scalar",resolve:SM,construct:xM,predicate:TM,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function PM(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function wM(e){return 48<=e&&e<=55}function MM(e){return 48<=e&&e<=57}function EM(e){if(e===null)return!1;var t=e.length,i=0,s=!1,r;if(!t)return!1;if(r=e[i],(r==="-"||r==="+")&&(r=e[++i]),r==="0"){if(i+1===t)return!0;if(r=e[++i],r==="b"){for(i++;i<t;i++)if(r=e[i],r!=="_"){if(r!=="0"&&r!=="1")return!1;s=!0}return s&&r!=="_"}if(r==="x"){for(i++;i<t;i++)if(r=e[i],r!=="_"){if(!PM(e.charCodeAt(i)))return!1;s=!0}return s&&r!=="_"}if(r==="o"){for(i++;i<t;i++)if(r=e[i],r!=="_"){if(!wM(e.charCodeAt(i)))return!1;s=!0}return s&&r!=="_"}}if(r==="_")return!1;for(;i<t;i++)if(r=e[i],r!=="_"){if(!MM(e.charCodeAt(i)))return!1;s=!0}return!(!s||r==="_")}function OM(e){var t=e,i=1,s;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),s=t[0],(s==="-"||s==="+")&&(s==="-"&&(i=-1),t=t.slice(1),s=t[0]),t==="0")return 0;if(s==="0"){if(t[1]==="b")return i*parseInt(t.slice(2),2);if(t[1]==="x")return i*parseInt(t.slice(2),16);if(t[1]==="o")return i*parseInt(t.slice(2),8)}return i*parseInt(t,10)}function _M(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Fn.isNegativeZero(e)}var RM=new it("tag:yaml.org,2002:int",{kind:"scalar",resolve:EM,construct:OM,predicate:_M,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),LM=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function BM(e){return!(e===null||!LM.test(e)||e[e.length-1]==="_")}function IM(e){var t,i;return t=e.replace(/_/g,"").toLowerCase(),i=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:i*parseFloat(t,10)}var GM=/^[-+]?[0-9]+e/;function DM(e,t){var i;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Fn.isNegativeZero(e))return"-0.0";return i=e.toString(10),GM.test(i)?i.replace("e",".e"):i}function AM(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Fn.isNegativeZero(e))}var $M=new it("tag:yaml.org,2002:float",{kind:"scalar",resolve:BM,construct:IM,predicate:AM,represent:DM,defaultStyle:"lowercase"}),VM=gM.extend({implicit:[yM,kM,RM,$M]}),zM=VM,Qu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),td=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function FM(e){return e===null?!1:Qu.exec(e)!==null||td.exec(e)!==null}function WM(e){var t,i,s,r,n,a,h,o=0,l=null,u,d,c;if(t=Qu.exec(e),t===null&&(t=td.exec(e)),t===null)throw new Error("Date resolve error");if(i=+t[1],s=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(i,s,r));if(n=+t[4],a=+t[5],h=+t[6],t[7]){for(o=t[7].slice(0,3);o.length<3;)o+="0";o=+o}return t[9]&&(u=+t[10],d=+(t[11]||0),l=(u*60+d)*6e4,t[9]==="-"&&(l=-l)),c=new Date(Date.UTC(i,s,r,n,a,h,o)),l&&c.setTime(c.getTime()-l),c}function YM(e){return e.toISOString()}var NM=new it("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:FM,construct:WM,instanceOf:Date,represent:YM});function HM(e){return e==="<<"||e===null}var UM=new it("tag:yaml.org,2002:merge",{kind:"scalar",resolve:HM}),Wn=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function XM(e){if(e===null)return!1;var t,i,s=0,r=e.length,n=Wn;for(i=0;i<r;i++)if(t=n.indexOf(e.charAt(i)),!(t>64)){if(t<0)return!1;s+=6}return s%8===0}function jM(e){var t,i,s=e.replace(/[\r\n=]/g,""),r=s.length,n=Wn,a=0,h=[];for(t=0;t<r;t++)t%4===0&&t&&(h.push(a>>16&255),h.push(a>>8&255),h.push(a&255)),a=a<<6|n.indexOf(s.charAt(t));return i=r%4*6,i===0?(h.push(a>>16&255),h.push(a>>8&255),h.push(a&255)):i===18?(h.push(a>>10&255),h.push(a>>2&255)):i===12&&h.push(a>>4&255),new Uint8Array(h)}function KM(e){var t="",i=0,s,r,n=e.length,a=Wn;for(s=0;s<n;s++)s%3===0&&s&&(t+=a[i>>18&63],t+=a[i>>12&63],t+=a[i>>6&63],t+=a[i&63]),i=(i<<8)+e[s];return r=n%3,r===0?(t+=a[i>>18&63],t+=a[i>>12&63],t+=a[i>>6&63],t+=a[i&63]):r===2?(t+=a[i>>10&63],t+=a[i>>4&63],t+=a[i<<2&63],t+=a[64]):r===1&&(t+=a[i>>2&63],t+=a[i<<4&63],t+=a[64],t+=a[64]),t}function JM(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var ZM=new it("tag:yaml.org,2002:binary",{kind:"scalar",resolve:XM,construct:jM,predicate:JM,represent:KM}),qM=Object.prototype.hasOwnProperty,QM=Object.prototype.toString;function tE(e){if(e===null)return!0;var t=[],i,s,r,n,a,h=e;for(i=0,s=h.length;i<s;i+=1){if(r=h[i],a=!1,QM.call(r)!=="[object Object]")return!1;for(n in r)if(qM.call(r,n))if(!a)a=!0;else return!1;if(!a)return!1;if(t.indexOf(n)===-1)t.push(n);else return!1}return!0}function eE(e){return e!==null?e:[]}var iE=new it("tag:yaml.org,2002:omap",{kind:"sequence",resolve:tE,construct:eE}),sE=Object.prototype.toString;function rE(e){if(e===null)return!0;var t,i,s,r,n,a=e;for(n=new Array(a.length),t=0,i=a.length;t<i;t+=1){if(s=a[t],sE.call(s)!=="[object Object]"||(r=Object.keys(s),r.length!==1))return!1;n[t]=[r[0],s[r[0]]]}return!0}function nE(e){if(e===null)return[];var t,i,s,r,n,a=e;for(n=new Array(a.length),t=0,i=a.length;t<i;t+=1)s=a[t],r=Object.keys(s),n[t]=[r[0],s[r[0]]];return n}var aE=new it("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:rE,construct:nE}),hE=Object.prototype.hasOwnProperty;function oE(e){if(e===null)return!0;var t,i=e;for(t in i)if(hE.call(i,t)&&i[t]!==null)return!1;return!0}function lE(e){return e!==null?e:{}}var uE=new it("tag:yaml.org,2002:set",{kind:"mapping",resolve:oE,construct:lE});zM.extend({implicit:[NM,UM],explicit:[ZM,iE,aE,uE]});function vo(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}var dE=new Array(256),cE=new Array(256);for(var We=0;We<256;We++)dE[We]=vo(We)?1:0,cE[We]=vo(We);Phaser.GameObjects.Image;Phaser.GameObjects.Sprite;Phaser.GameObjects.Video;Phaser.GameObjects.Text;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;var Fs=function(e,t){return t&&t!==""?`${t}.${e}`:e},fE=function(e,t){return t&&t!==""?e.substring(t.length+1):e},pE=function(e,t,i){i=JSON.stringify([i]),localStorage.setItem(Fs(e,t),i)},vE=function(e,t){var i=localStorage.getItem(Fs(e,t));if(i!=null)return i=JSON.parse(i)[0],i},gE=function(e,t){return localStorage.removeItem(Fs(e,t)),this};const mE={getStoreKey(e){return Fs(e,this.name)},getDataKey(e){return fE(e,this.name)},setItem(e,t){return pE(e,this.name,t),this},getItem(e){return vE(e,this.name)},removeItem(e){return gE(e,this.name),this}};var CE=function(){this.dataKeys.clear();var e=this.getItem("__keys__");if(e)for(var t=0,i=e.length;t<i;t++)this.dataKeys.set(e[t]);return this},bE=function(e,t){if(e===void 0&&(t=!1),CE.call(this),this.defaultData=e,this._syncEnable=!1,this.reset(),t||this.dataKeys.iterate(function(n,a){this.set(n,this.getItem(n))},this),this._syncEnable=!0,e){var i,s;for(var r in e)s=t?void 0:this.getItem(r),i=s===void 0?e[r]:s,this.set(r,i);this.setItem("__keys__",this.dataKeys.entries)}return this},yE=function(e){return this.defaultData?this.defaultData[e]:void 0},SE=function(e){e.events.on("changedata",function(t,i,s,r){!this._syncEnable||typeof s!="object"&&s===r||(this.setItem(i,s),this.dataKeys.contains(i)||(this.dataKeys.set(i),this.setItem("__keys__",this.dataKeys.entries)))},e).on("setdata",function(t,i,s){!this._syncEnable||(this.setItem(i,s),this.dataKeys.set(i),this.setItem("__keys__",this.dataKeys.entries))},e).on("removedata",function(t,i,s){!this._syncEnable||(this.removeItem(i),this.dataKeys.delete(i),this.setItem("__keys__",this.dataKeys.entries))},e)};const ns=Phaser.Utils.Objects.GetValue,xE=Phaser.Structs.Set;var TE={load:bE,getDefaultValue:yE},kE=function(e,t){if(e.hasOwnProperty("_syncEnable"))return e;e._syncEnable=!0,e.dataKeys=new xE,e.defaultData=void 0,Object.assign(e,mE,TE),SE(e),e.name=ns(t,"name","");var i=ns(t,"load",!0);if(i){var s=ns(t,"default",void 0),r=ns(t,"reset",!1);e.load(s,r)}return e};const PE=Phaser.Data.DataManager,wE=Phaser.Events.EventEmitter,go=Phaser.Utils.Objects.IsPlainObject;class LE extends PE{constructor(t,i,s){go(t)?(s=t,t=void 0,i=void 0):go(i)&&(s=i,i=void 0);var r=i===void 0;if(r&&(i=new wE),t===void 0&&(t=i),super(t,i),r){var n=t.events?t.events:t;n&&n.once("destroy",this.destroy,this)}kE(this,s)}}export{py as A,ft as B,Od as C,LE as D,Ke as G,EE as H,yu as L,OE as N,ME as R,_E as S,RE as T,xT as a,Iy as b,MP as c,Dc as d};
//# sourceMappingURL=phaser3-rex-plugins.7a1304fd.js.map
