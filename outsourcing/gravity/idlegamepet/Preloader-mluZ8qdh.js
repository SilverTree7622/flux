var t=Object.defineProperty,i=(i,s,e)=>((i,s,e)=>s in i?t(i,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[s]=e)(i,"symbol"!=typeof s?s+"":s,e);import"./networkPlugin-Bwiiz7BK.js";class s extends Phaser.Scene{constructor(){super("Preloader"),i(this,"progressBar"),i(this,"logo"),i(this,"slime"),i(this,"nextScene","Game"),i(this,"sndList",[]),i(this,"start2LoadAudioAndAnim",!1),i(this,"animationFiles",[])}editorCreate(){const t=this.add.image(450,800,"preload_screen_bg");t.scaleX=1.57,t.scaleY=1.57;const i=this.add.rectangle(450,1488,700,50);i.isFilled=!0,i.fillColor=14737632,i.isStroked=!0;const s=this.add.image(450,800,"BI");s.postFX.addShine(1,.5,3,!1);const e=this.add.image(-919,991,"angelslime");e.scaleX=.3,e.scaleY=.3,e.setOrigin(0,.5),this.progressBar=i,this.logo=s,this.slime=e,this.events.emit("scene-awake")}init(){this.editorCreate();const t=this.add.rectangle(this.progressBar.x-this.progressBar.width/2+4,this.progressBar.y+1,4,44,10273766);t.setOrigin(0,.5),this.slime.depth=999,this.slime.y=t.y;const i=this.progressBar.width;this.load.on("progress",(s=>{this.progressBar.visible=!0;const e=Math.floor(s*i);t.width=e,this.slime.x=i-18-(i-e)})),this.load.on("filecomplete",(t=>{if(window.__PRELOAD_ASSET_PACK__&&1===this.load.progress&&!this.start2LoadAudioAndAnim){this.start2LoadAudioAndAnim=!0;let t=0;this.sound.on("decodedall",(i=>{if(t!==this.sndList.length-1)return void t++;if(0===this.animationFiles.length)return void setTimeout((()=>{this.startGame()}),200);let s=0;this.events.on("animationcomplete",(t=>{s++,s===this.animationFiles[0].url.anims.length&&setTimeout((()=>{this.startGame()}),200)}));for(const t of this.animationFiles)if(t.url&&"object"==typeof t.url)for(const i of t.url.anims)try{this.anims.fromJSON(i),this.events.emit("animationcomplete",i.key)}catch(e){}}));for(const i of this.sndList)this.sound.decodeAudio(i.key,i.url[0])}}))}preload(){window.__PRELOAD_ASSET_PACK__&&(this.sndList=window.__PRELOAD_ASSET_PACK__.section1.files.filter((t=>"audio"===t.type)),this.animationFiles=window.__PRELOAD_ASSET_PACK__.section1.files.filter((t=>"animation"===t.type)),window.__PRELOAD_ASSET_PACK__.section1.files=window.__PRELOAD_ASSET_PACK__.section1.files.filter((t=>"audio"!==t.type&&"animation"!==t.type)),this.load.pack("preload",window.__PRELOAD_ASSET_PACK__)),window.__PRELOAD_ASSET_PACK__||this.load.pack("preload","preload-asset-pack.json")}create(){window.__PRELOAD_ASSET_PACK__||this.startGame()}startGame(){this.scene.start(this.nextScene)}}export{s as default};
