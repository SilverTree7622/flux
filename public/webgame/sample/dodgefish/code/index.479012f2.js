import{P as u}from"./phaser.e837d425.js";import{C as M,L as y,R as x,B as T,D as B,G as _,S as R,a as F,T as Y,A as w,b as H,c as U,N as V,H as z,d as X}from"./phaser3-rex-plugins.7a1304fd.js";import{i as g}from"./i18next.6c7a663d.js";import{B as $}from"./i18next-browser-languagedetector.048a28da.js";import"./@babel.8e3947f4.js";const K=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}};K();const W=!1,v=1,q=1080,J=1920,i={SCALE:v,WIDTH:q*v,HEIGHT:J*v,DEBUG:W,FONT:{FAMILY:'"Noto Sans", sans-serif',COLOR:"#ffffff"},CURSOR:{DEFAULT:"url(assets/cursors/default.cur), default",POINTER:"url(assets/cursors/pointer.cur), pointer"},SCENES:{LOADING:"loading-scene",MAIN_MENU:"main-menu-scene",GAME_FIELD:"game-field-scene",GAME_OVER:"game-over-scene",GAME_INFO_UI:"game-info-ui-scene",PLAYER_SKINS:"player-skins-scene",LOCAL_STORAGE:"local-storage-scene",SHOP:"shop-scene",SETTINGS:"settings-scene"},SPIKE:{WIDTH:145,HEIGHT:87},WALL:{HEIGHT:150},COLORS:{ACCENT:"#2BAFF6",ACCENT_VARIANT:"#004F79",DEFAULT:{BACKGROUND:"#EBEBEB",SPIKE:"#808080"}},FISH:{COUNT:126,BUY_COST:1e3,GIFT_COST:500}};class Q extends u.Scene{constructor(){super(i.SCENES.LOADING)}preload(){this.load.baseURL="assets/",this.addLoader(),this.addLoaderEvents(),this.loadResources()}create(){this.input.setDefaultCursor(i.CURSOR.DEFAULT)}addLoader(){const{width:e,height:t}=this.cameras.main;this.circularProgress=new M(this,{x:e/2,y:t/2,radius:150,trackColor:"#004F79",barColor:"#2BAFF6",textSize:"86px",textStyle:"bold",textFormatCallback:function(s){return(100-Math.floor(s*100)).toString()},textColor:"#004F79",textFamily:i.FONT.FAMILY,valuechangeCallback(s,a,n){},value:0}),this.add.existing(this.circularProgress)}addLoaderEvents(){this.load.on(u.Loader.Events.PROGRESS,e=>{this.circularProgress.easeValueTo(e)}),this.load.on(u.Loader.Events.COMPLETE,()=>{this.circularProgress.destroy(),this.scene.stop(i.SCENES.LOADING),this.scene.launch(i.SCENES.LOCAL_STORAGE),this.scene.launch(i.SCENES.GAME_FIELD),this.scene.pause(i.SCENES.GAME_FIELD),this.scene.launch(i.SCENES.MAIN_MENU)})}loadResources(){this.load.atlas("ui","spritesheets/ui.png","spritesheets/ui.json"),this.load.atlas("fish","spritesheets/fish.png","spritesheets/fish.json"),this.load.atlas("particle","spritesheets/particle.png","spritesheets/particle.json"),this.load.atlas("roe","spritesheets/roe.png","spritesheets/roe.json"),this.load.image("fish_death","sprites/fish_death.png"),this.load.image("gift","sprites/gift.png"),this.load.audioSprite("sfx","sfx/sfxSprite.json","sfx/sfxSprite.ogg")}}class S extends y{constructor(e,t){super(e,{background:S.createBackground(e,t),icon:S.createIcon(e,t),space:{left:30,right:30,top:30,bottom:30},name:"button"}),this.isDisabled=!1,this.config=t,e.add.existing(this)}setOver(){const e=this.getElement("background"),t=this.getElement("icon");return this.scene.tweens.add({targets:t,scale:1.3,duration:250,ease:"Sine.easeInOut"}),e.setFillStyle(this.config.backgroundColorOver),this}setDisabled(){this.isDisabled=!0;const e=this.getElement("background"),t=this.getElement("icon");return e.setTint(9013641),t.setTint(9013641),this}setDefaultStyle(){const e=this.getElement("background"),t=this.getElement("icon");return this.scene.tweens.add({targets:t,scale:1,duration:250,ease:"Sine.easeInOut"}),e.setFillStyle(this.config.backgroundColor),e.clearTint(),t.clearTint(),this}static createBackground(e,t){const s=new x(e,0,0,0,0,{radius:40},t.backgroundColor).setName("background");return e.add.existing(s),s}static createIcon(e,t){const s=e.add.image(0,0,t.texture,t.frameIcon).setOrigin(.5,.5);return s.setName("icon"),e.add.existing(s),s}}class Z extends Phaser.Scene{constructor(){super(i.SCENES.MAIN_MENU)}create(){this.addTapToJump(),this.addPlayerSkin(),this.addInfoUi(),this.addPlayPanel(),this.startGameEvent(),this.addVolumeEvent(),this.addResumeEvent(),this.addChangeSkinEvent(),this.addButtonUi()}startGameEvent(){this.playPanel.on("pointerdown",()=>{this.scene.pause(),this.scene.setVisible(!1),this.scene.pause(i.SCENES.GAME_INFO_UI),this.scene.setVisible(!1,i.SCENES.GAME_INFO_UI),this.scene.launch(i.SCENES.GAME_FIELD)},this)}addResumeEvent(){this.events.on(Phaser.Scenes.Events.START,()=>{this.scene.launch(i.SCENES.GAME_FIELD),this.scene.pause(i.SCENES.GAME_FIELD),this.scene.launch(i.SCENES.GAME_INFO_UI)})}addInfoUi(){this.scene.run(i.SCENES.GAME_INFO_UI)}addTapToJump(){const{width:e,height:t}=this.cameras.main;this.add.text(e/2,t/2-250,g.t("Tap to jump").toUpperCase(),{fontFamily:i.FONT.FAMILY,fontSize:"54px",color:i.COLORS.ACCENT,align:"center"}).setOrigin(.5,.5)}addPlayerSkin(){const{width:e,height:t}=this.cameras.main,n=this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").get("selectFish");this.playerSkin=this.add.image(e/2,t/2,"fish",n).setScale(1.3),this.add.tween({targets:this.playerSkin,y:t/2+70,duration:700,repeat:-1,yoyo:!0,ease:"Sine.easeInOut"})}addPlayPanel(){const{centerX:e,centerY:t}=this.cameras.main;this.playPanel=this.add.rectangle(e,t,600,800,0,0).setOrigin(.5,.5).setInteractive()}addButtonUi(){const e={texture:"ui",backgroundColor:2863094,backgroundColorOver:20345},t=new S(this,{frameIcon:"fish",...e}),s=new S(this,{frameIcon:"gift",...e}),a=new S(this,{frameIcon:"settings",...e}),n=new T(this,{x:200,y:200,anchor:{centerX:"right-125",centerY:"center"},orientation:"vertical",buttons:[t,s,a],space:{item:50}}).layout();this.add.existing(n),n.on("button.over",r=>{r.setOver()},this),n.on("button.out",r=>{r.setDefaultStyle()},this),n.on("button.click",(r,l)=>{switch(this.game.sound.playAudioSprite("sfx","button"),l){case 0:this.scene.launch(i.SCENES.PLAYER_SKINS);break;case 1:this.scene.launch(i.SCENES.SHOP);break;case 2:this.scene.launch(i.SCENES.SETTINGS);break}},this)}addChangeSkinEvent(){this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").events.on("changedata-selectFish",(s,a)=>{this.playerSkin.setFrame(a)})}addVolumeEvent(){const t=this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData");this.game.sound.volume=t.get("soundVolume")||1,this.game.sound.on("volume",(s,a)=>{this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").set("soundVolume",a)})}}class j extends Phaser.Scene{constructor(){super(i.SCENES.LOCAL_STORAGE)}create(){this.addLocalStorageData()}addLocalStorageData(){this.localStorageData=new B(this,{name:i.SCENES.LOCAL_STORAGE,default:{bestScore:0,gamesPlayed:0,roe:0,selectFish:"fish_01a",fishes:["fish_01a","fish_02a"],soundVolume:.5}}),this.data.set("localStorageData",this.localStorageData)}}class ee extends Phaser.Physics.Matter.Sprite{constructor(e,t,s,a,n){super(e.matter.world,t,s,a,n),e.add.existing(this)}}class te{constructor(e){this.player=e}enter(){const t=this.player.frameName.slice(0,-1)+"a";this.player.setFrame(t)}}class se{constructor(e){this.player=e}enter(){const t=this.player.frameName.slice(0,-1)+"f";this.player.setFrame(t)}}class ae{constructor(e){this.currentState={enter:()=>{}},this.states={idle:new te(e),jump:new se(e)}}setState(e){this.currentState!==this.states[e]&&(this.currentState=this.states[e],this.currentState.enter())}}class ie extends ee{constructor(e,t,s,a){super(e,t,s,"fish",a),this.direction="right",this.frameName=a,this.velocity={x:12,y:-18},this.setScale(1.3),this.setRectangle(150,100,{chamfer:{radius:50},label:"player"}),this.setOrigin(.5,.5),e.matter.body.setInertia(this.body,Number.POSITIVE_INFINITY),this.setBounce(1),this.setFriction(0,0,0),this.addParticles(),this.stateController=new ae(this)}jump(){return this.stateController.setState("jump"),this.scene.time.delayedCall(200,()=>{this.stateController.setState("idle")}),this.particlesEmitter.start(),this.scene.time.delayedCall(400,()=>{this.particlesEmitter.stop()}),this.setVelocity(this.velocity.x,this.velocity.y),this}flip(){return this.direction=this.direction==="left"?"right":"left",this.velocity.x=Math.sign(this.velocity.x)===-1?Math.abs(this.velocity.x):Math.abs(this.velocity.x)*-1,this.setFlipX(!this.flipX),this}addVelocity(e,t=0){return this.velocity.x=Math.sign(this.velocity.x)===-1?(Math.abs(this.velocity.x)+e)*-1:this.velocity.x+e,this.velocity.y=Math.sign(this.velocity.y)===-1?(Math.abs(this.velocity.y)+t)*-1:this.velocity.y+t,this}spawn(){var e;this.setVisible(!0),this.setCollisionCategory(Number(!0)),this.velocity.x=Math.abs(this.velocity.x),this.resetFlip(),this.setVelocity(0,0),this.setPosition(i.WIDTH/2,i.HEIGHT/2),this.data.values.score=0,(e=this.deathSprite)==null||e.destroy()}death(){this.setVisible(!1),this.setActive(!1),this.setCollisionCategory(Number(!1)),this.particlesEmitter.remove(),this.addDeathSprite()}changeSkin(e){this.frameName=e,this.particlesEmitter.setFrame("particle_"+e.slice(0,-1))}addDeathSprite(){this.deathSprite=this.scene.matter.add.sprite(this.x,this.y,"fish_death"),this.deathSprite.setBounce(1),this.deathSprite.setFriction(0,0,0),this.deathSprite.setVelocity(-this.velocity.x/2),this.scene.tweens.add({targets:this.deathSprite,duration:1e3,angle:360,repeat:-1})}addParticles(){const e=this.scene.add.particles("particle","particle_"+this.frameName.slice(0,-1));this.particlesEmitter=e.createEmitter({x:this.x,y:this.y,lifespan:400,scale:{start:.7,end:.2},frequency:90,follow:this})}}class b extends Phaser.GameObjects.Container{constructor(e,t){const{x:s,y:a,width:n,height:r,label:l,color:h,alpha:d,isSensor:c=!1}=t;super(e,s,a),e.add.existing(this),this.setSize(n,r),this.rect=e.add.rectangle(0,0,n,r,h,d),this.add(this.rect),e.matter.add.gameObject(this,{isStatic:!0,isSensor:c,label:l})}setFillStyle(e,t){return this.rect.setFillStyle(e,t),this}}class oe extends Phaser.GameObjects.Polygon{constructor(e,t){const{x:s,y:a,width:n,height:r,label:l,color:h,alpha:d,isSensor:c}=t,p=`0 ${r} ${n} ${r} ${n/2} 0`;super(e,s,a,p,h,d),e.add.existing(this),e.matter.add.gameObject(this,{isStatic:!0,isSensor:!0,label:l,shape:{type:"fromVerts",verts:p,flagInternal:!0}},!0)}}class E{constructor(e,t){this.spikes=[],this.currentSpikes=0,this.maximumSpikes=0;const{x:s=0,y:a=0,count:n=0,maximum:r=n,label:l,color:h,alpha:d,angle:c,space:p=0,orientation:O="horizontal",isAnimation:N=!1}=t;this.scene=e,this.isAnimation=N,this.currentSpikes=n,this.maximumSpikes=r;const k=i.SPIKE.WIDTH,D=i.SPIKE.HEIGHT;for(let f=0;f<r;f++){const P=s+(O==="horizontal"?f*k+k/2+f*p:0),G=a+(O==="vertical"?f*k+k/2+f*p:0),I=new oe(e,{x:P,y:G,width:k,height:D,label:l,color:h,alpha:d});I.setAngle(c),this.spikes.push(I)}this.hideSpikes(),this.changeCount(n)}setFillStyle(e,t){for(const s of this.spikes)s.setFillStyle(e,t);return this}randNumber(e,t,s=[]){let a=Math.floor(Math.random()*(t-e+1-s.length)+e);return[...s].sort((n,r)=>n-r).every(n=>n<=a&&(a++,!0)),a}changeCount(e){e>this.maximumSpikes&&(e=this.maximumSpikes),this.currentSpikes=e,this.hideSpikes();const t=[];for(const[s,a]of this.spikes.entries())a.visible&&t.push(s);for(;t.length<e;){const s=this.randNumber(0,this.maximumSpikes-1,t);this.showSpike(s),t.push(s)}return this}static getNeededSpikes(e){return e===0?0:e===1?2:e<5?3:e<12?4:e<20?5:e<30?6:e<40?Phaser.Math.Between(4,7):e<50?Phaser.Math.Between(6,8):e<60?Phaser.Math.Between(6,9):e>=60?Phaser.Math.Between(7,9):Phaser.Math.Between(3,9)}showSpike(e){const t=this.spikes[e];return this.isAnimation&&this.scene.tweens.add({targets:t,scale:1,duration:300}),t.setVisible(!0),t.setActive(!0),t.setCollisionCategory(Number(!0)),this}hideSpikes(){for(const e of this.spikes)this.isAnimation&&this.scene.tweens.add({targets:e,scale:0,duration:300}),e.setVisible(!1),e.setActive(!1),e.setCollisionCategory(Number(!1));return this}get getCurrentCount(){return this.currentSpikes}}function L(o){return o<5?{background:15461355,spike:8421504}:o<10?{background:14478577,spike:6452609}:o<15?{background:16313315,spike:8547425}:o<20?{background:15266271,spike:7699556}:o<25?{background:15262967,spike:7038592}:o<30?{background:7763573,spike:16579070}:o<35?{background:2845055,spike:6541816}:o<40?{background:1995264,spike:7261952}:o<45?{background:10634,spike:3312383}:o<50?{background:9178942,spike:16654183}:o<55?{background:16754988,spike:16777215}:o<60?{background:38911,spike:16777215}:o<65?{background:11554303,spike:16777215}:o<70?{background:8506386,spike:16777215}:o<75?{background:0,spike:16777215}:o<80?{background:15575240,spike:0}:o<85?{background:10273259,spike:0}:o<90?{background:12116892,spike:0}:o<95?{background:11248881,spike:0}:o<100?{background:10018269,spike:0}:o>=100?{background:0,spike:16718080}:{background:15461355,spike:8421504}}class ne extends Phaser.Physics.Matter.Image{constructor(e,t,s,a=0){super(e.matter.world,t,s,"roe","roe_1"),this.value=0,this.scene.add.existing(this),this.value=a,this.setCircle(this.width/2,{label:"roe"}),this.setStatic(!0),this.setSensor(!0),this.spawn(t,s)}spawn(e,t){this.setAlpha(0),this.scene.add.tween({targets:this,duration:250,alpha:{from:0,to:1},ease:"Sine.easeInOut",onComplete:()=>{this.addAnimation()}}),this.setActive(!0),this.setVisible(!0),this.setPosition(e,t)}remove(){var e;(e=this.tween)==null||e.remove(),this.setVisible(!1),this.setActive(!1),this.setCollisionCategory(Number(!1))}showTakenValue(){this.scene.floatingNumbers.createFloatingText({textOptions:{fontFamily:i.FONT.FAMILY,fontSize:"72px",color:"#FC4100"},align:"top-center",animation:"up",animationEase:"Sine.easeInOut",text:"+"+this.value,offsetY:this.height,parentObject:this})}addAnimation(){this.tween=this.scene.add.tween({targets:this,duration:750,y:this.y-this.height,ease:"Sine.easeInOut",repeat:-1,yoyo:!0})}get getValue(){return this.value}set setValue(e){this.value=e}}function re(o){return o<25?{value:1,frame:"roe_1"}:o<50?{value:2,frame:"roe_2"}:o<75?{value:3,frame:"roe_3"}:o<100?{value:4,frame:"roe_4"}:o>=100?{value:5,frame:"roe_5"}:{value:1,frame:"roe_1"}}class le extends u.Scene{constructor(){super(i.SCENES.GAME_FIELD),this.spikes=[]}create(){const{width:e,height:t}=this.cameras.main;this.matter.world.setBounds(0,0,e,t),this.addScoreText(),this.addPlayer(),this.scoreText.setText(this.player.data.get("score")),this.addWalls(),this.addSpikes(),this.addCollisionStartEvent(),this.addPauseEvent(),this.addChangeSkinEvent(),this.startGame()}addPlayer(){const{centerX:e,centerY:t}=this.cameras.main,n=this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").get("selectFish");this.player=new ie(this,e,t,n),this.initPlayerData(),this.addPlayerController()}addChangeSkinEvent(){this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").events.on("changedata-selectFish",(s,a)=>{this.player.changeSkin(a)})}initPlayerData(){this.player.setDataEnabled(),this.player.data.set("score",0),this.player.data.set("roe",0),this.player.on("changedata-score",(e,t)=>{const s=u.Utils.String.Pad(t.toString(),2,"0",1);this.scoreText.setText(s)},this)}addScoreText(){const{centerX:e,centerY:t}=this.cameras.main;this.scoreText=this.add.text(e,t,"",{fontFamily:i.FONT.FAMILY,fontSize:"480px",color:i.COLORS.DEFAULT.SPIKE+"40"}).setOrigin(.5,.5)}addPlayerController(){this.input.on("pointerdown",()=>{this.game.sound.playAudioSprite("sfx","jump"),this.player.jump()},this)}addWalls(){const{width:e,height:t}=this.cameras.main;this.wallLeft=new b(this,{x:5,y:t/2,width:50,height:t,label:"wallLeft",alpha:0,isSensor:!0}),this.wallRight=new b(this,{x:e-5,y:t/2,width:50,height:t,label:"wallRight",alpha:0,isSensor:!0});const s=i.WALL.HEIGHT;this.wallTop=new b(this,{x:e/2,y:s/5,width:e,height:s/2.5,label:"wallTop",color:8421504,alpha:1}),this.wallBottom=new b(this,{x:e/2,y:t-s/2,width:e,height:s,label:"wallBottom",color:8421504,alpha:1})}addSpikes(){const{width:e,height:t}=this.cameras.main,s=i.WALL.HEIGHT;this.spikeGroupLeft=new E(this,{x:8,y:i.SPIKE.HEIGHT,count:0,maximum:11,label:"spike",color:13421772,alpha:1,angle:90,space:4,orientation:"vertical",isAnimation:!0}),this.spikeGroupRight=new E(this,{x:e-8,y:i.SPIKE.HEIGHT,count:0,maximum:11,label:"spike",color:13421772,alpha:1,angle:-90,space:4,orientation:"vertical",isAnimation:!0}),this.spikeGroupTop=new E(this,{x:i.SPIKE.WIDTH/7,y:s/4+i.SPIKE.HEIGHT/2,count:7,label:"spike",color:13421772,alpha:1,angle:180,space:4,orientation:"horizontal"}),this.spikeGroupBottom=new E(this,{x:i.SPIKE.WIDTH/7,y:t-s-i.SPIKE.HEIGHT/5,count:7,label:"spike",color:13421772,alpha:1,angle:0,space:4,orientation:"horizontal"}),this.spikes.push(this.spikeGroupLeft,this.spikeGroupRight,this.spikeGroupTop,this.spikeGroupBottom)}addCollisionStartEvent(){this.matter.world.on(u.Physics.Matter.Events.COLLISION_START,(e,t,s)=>{var a,n,r;[t.label,s.label].includes("player")&&([t.label,s.label].includes("wallLeft")||[t.label,s.label].includes("wallRight")?(this.game.sound.playAudioSprite("sfx","point"),this.nextStep()):[t.label,s.label].includes("wallTop")||[t.label,s.label].includes("wallBottom")||[t.label,s.label].includes("spike")?this.gameOver():[t.label,s.label].includes("roe")&&(this.game.sound.playAudioSprite("sfx","candy"),this.player.data.values.roe+=((a=this.roe)==null?void 0:a.getValue)||0,(n=this.roe)==null||n.showTakenValue(),(r=this.roe)==null||r.remove(),this.roe=null))})}addPauseEvent(){this.events.on(u.Scenes.Events.PAUSE,()=>{this.scoreText.setVisible(!1),this.player.setVisible(!1)},this)}nextStep(){this.player.data.values.score<=100&&this.player.addVelocity(.04,.04),this.player.flip(),this.player.data.values.score++;const e=L(this.player.data.get("score"));this.changeColor(e),this.changeCountSpikes(),this.spawnRoe()}spawnRoe(){if(this.roe)return;const{width:e}=this.cameras.main,t=re(this.player.data.get("score")),s=this.player.direction==="right"?e-i.SPIKE.WIDTH:i.SPIKE.WIDTH,a=u.Math.RND.between(300,i.HEIGHT-400),n=t.value;this.roe=new ne(this,s,a,n),this.roe.setTexture("roe",t.frame)}changeColor(e){this.cameras.main.setBackgroundColor(e.background),this.scoreText.setColor("#"+e.spike.toString(16)+"30"),this.wallTop.setFillStyle(e.spike),this.wallBottom.setFillStyle(e.spike);for(const t of this.spikes)t.setFillStyle(e.spike)}changeCountSpikes(){const e=E.getNeededSpikes(this.player.data.values.score),t=this.spikeGroupLeft.getCurrentCount>0?e:0;this.spikeGroupRight.changeCount(t);const s=this.spikeGroupRight.getCurrentCount===0?e:0;this.spikeGroupLeft.changeCount(s)}startGame(){this.player.spawn(),this.changeColor({background:15461355,spike:8421504}),this.spikeGroupLeft.changeCount(0),this.spikeGroupRight.changeCount(0),this.player.jump()}gameOver(){var e;this.game.sound.playAudioSprite("sfx","dead"),(e=this.roe)==null||e.remove(),this.roe=null,this.player.death(),this.scene.run(i.SCENES.GAME_OVER,{score:this.player.data.values.score,roe:this.player.data.values.roe})}}class ce extends u.Scene{constructor(){super(i.SCENES.GAME_INFO_UI)}init(e){this.color=e.color}create(){this.addLocalStorageData(),this.addGameTitle(),this.addBestScore(),this.addGamesPlayed(),this.addRoeText(),this.addResumeEvent(),this.addLocalStorageEvents(),this.color&&this.changeColor(this.color)}addLocalStorageData(){const e=this.scene.get(i.SCENES.LOCAL_STORAGE);this.localStorageData=e.data.get("localStorageData")}addLocalStorageEvents(){this.localStorageData.events.on("changedata-bestScore",()=>{const e=this.localStorageData.get("bestScore"),t=(g.t("Best score")+" "+e).toUpperCase();this.bestScoreText.setText(t)},this),this.localStorageData.events.on("changedata-gamesPlayed",()=>{const e=this.localStorageData.get("gamesPlayed"),t=(g.t("Games played")+" "+e).toUpperCase();this.gamesPlayedText.setText(t)},this),this.localStorageData.events.on("changedata-roe",()=>{this.roeText.setText(String(this.localStorageData.get("roe")))},this)}changeColor(e){const t="#"+u.Display.Color.ComponentToHex(e);this.gameTitle.setColor(t),this.bestScoreText.setColor(t),this.gamesPlayedText.setColor(t)}addResumeEvent(){this.events.on(u.Scenes.Events.RESUME,(e,{color:t})=>{t&&this.changeColor(t)},this)}addGameTitle(){const{width:e}=this.cameras.main;this.gameTitle=this.add.text(e/2,250,"DODGING FISH",{fontFamily:i.FONT.FAMILY,fontSize:"112px",color:i.COLORS.DEFAULT.SPIKE}).setOrigin(.5,.5)}addBestScore(){const{width:e,height:t}=this.cameras.main,s=this.localStorageData.get("bestScore"),a=(g.t("Best score")+" "+s).toUpperCase();this.bestScoreText=this.add.text(e/2,t-400,a,{fontFamily:i.FONT.FAMILY,fontSize:"72px",color:i.COLORS.DEFAULT.SPIKE}).setOrigin(.5,.5)}addGamesPlayed(){const{width:e,height:t}=this.cameras.main,s=this.localStorageData.get("gamesPlayed"),a=(g.t("Games played")+" "+s).toUpperCase();this.gamesPlayedText=this.add.text(e/2,t-300,a,{fontFamily:i.FONT.FAMILY,fontSize:"72px",color:i.COLORS.DEFAULT.SPIKE}).setOrigin(.5,.5)}addRoeText(){const{width:e,height:t}=this.cameras.main,s=this.localStorageData.get("roe");this.add.image(e/2-50,t-500,"roe","roe_1"),this.roeText=this.add.text(e/2,t-500,String(s),{fontFamily:i.FONT.FAMILY,fontSize:"72px",color:"#FC4100",align:"left"}).setOrigin(0,.5)}}class he extends u.Scene{constructor(){super(i.SCENES.GAME_OVER),this.score=0,this.roe=0}init(e){this.score=e.score,this.roe=e.roe}create(){this.addBackground(),this.addBackgroundScore(),this.addScore(),this.startMainMenuEvent(),this.addBestScoreValue(),this.incGamesPlayedValue(),this.incRoeValue(),this.scene.resume(i.SCENES.GAME_INFO_UI,{color:L(this.score).spike}),this.scene.setVisible(!0,i.SCENES.GAME_INFO_UI)}addBestScoreValue(){const t=this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData"),s=t.get("bestScore");this.score>s&&t.set("bestScore",this.score)}incGamesPlayedValue(){this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").inc("gamesPlayed",1)}incRoeValue(){this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").inc("roe",this.roe)}addBackground(){this.add.rectangle(0,0,this.cameras.main.width,this.cameras.main.height,16777215,0).setOrigin(0,0).setInteractive()}addBackgroundScore(){const{centerX:e,centerY:t}=this.cameras.main,s=new x(this,e,t,700,700,{radius:160},i.COLORS.ACCENT);this.add.existing(s)}addScore(){const{centerX:e,centerY:t}=this.cameras.main;this.add.text(e,t-125,g.t("Score"),{fontSize:"52px",fontFamily:i.FONT.FAMILY,align:"center"}).setOrigin(.5,.5),this.add.text(e,t+50,String(this.score||0),{fontSize:"300px",fontFamily:i.FONT.FAMILY,align:"center"}).setOrigin(.5,.5)}startMainMenuEvent(){this.input.on("pointerdown",()=>{this.scene.stop(i.SCENES.GAME_FIELD),this.scene.stop(i.SCENES.GAME_INFO_UI),this.scene.stop(),this.scene.start(i.SCENES.MAIN_MENU)},this)}}class de extends Phaser.GameObjects.Container{constructor(e,t,s,a,n){super(e,t,s),this.scene.add.existing(this),this.selectCallback=n,this.addPanel(a)}selectItem(e){const t=this.grid.getChildren(),n=this.scene.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").get("fishes");for(const r of t){const l=r;n.includes(l.frame.name)?(l.setDefaultStyle(),l.frame.name===e&&l.setOver()):l.setDisabled()}}addPlayerItem(e){const t=new S(this.scene,{texture:e.texture,frameIcon:e.frameIcon,backgroundColorOver:7261952});this.grid.add(t)}createGrid(e){this.grid=new _(this.scene,{x:0,y:0,column:4,row:35,rowProportions:0,space:{row:50,column:50},name:"fishes"});for(const t of e)this.addPlayerItem(t);return this.grid.setInteractive(),this.grid}addPanel(e){this.panel=new R(this.scene,{x:0,y:0,width:700,height:1480,anchor:{centerX:"center",centerY:"center+100"},scrollMode:0,panel:{child:this.createGrid(e),mask:{padding:1}},mouseWheelScroller:{focus:!1,speed:.7},space:{left:30,right:30,top:30,bottom:30,panel:30}}),this.panel.layout(),this.panel.setChildrenInteractive({targets:[this.panel.getByName("fishes",!0)]}),this.add(this.panel),this.panel.on("child.click",t=>{this.selectItem(t.frame.name),this.selectCallback(t)})}}class ue extends F{constructor(e,t){const s=ge(e);super(e,{anchor:{x:"center",y:"center"},width:800,background:Se(e),title:e.add.text(0,0,g.t("Buy"),{fontSize:"72px",fontFamily:i.FONT.FAMILY}),content:e.add.image(0,0,"fish",t),description:fe(e,i.FISH.BUY_COST.toString()),actions:[pe(e),me(e)],space:{left:30,right:30,top:30,bottom:30,title:50,content:50,description:50,choices:25,toolbarItem:5,action:25},expand:{title:!1,content:!1,description:!1},align:{title:"center",actions:"right",description:"right"},click:{mode:"release"}}),this.shadowBackground=s,this.layout(),this.popUp(1e3),e.add.existing(this),e.tweens.add({targets:this,scaleX:1,scaleY:1,ease:"Bounce",duration:1e3,repeat:0,yoyo:!1}),e.tweens.add({targets:this.shadowBackground,alpha:1,ease:"Sine.easeInOut",duration:700,repeat:0,yoyo:!1})}closeModal(){this.shadowBackground.destroy(),this.destroy()}}const ge=o=>{const{width:e,height:t}=o.cameras.main;return o.add.rectangle(0,0,e,t,20345,.5).setOrigin(0,0).setInteractive().setAlpha(0)},Se=o=>{const e=new x(o,0,0,500,500,{radius:50},20345);return o.add.existing(e),e},pe=o=>new S(o,{texture:"ui",frameIcon:"back",backgroundColor:16777215,backgroundColorOver:2863094}),me=o=>{const e=new S(o,{texture:"ui",frameIcon:"like",backgroundColor:16777215,backgroundColorOver:2863094});return o.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").get("roe")<i.FISH.BUY_COST&&e.setDisabled(),e},fe=(o,e)=>new y(o,{width:40,height:40,text:o.add.text(0,0,e,{fontSize:"48px",fontFamily:i.FONT.FAMILY}),icon:o.add.image(0,0,"roe","roe_1"),space:{right:0,icon:25}});class C extends Y{constructor(e){super(e,{anchor:{x:"center",y:"bottom-200"},background:ye(e),text:e.add.text(0,0,"",{fontFamily:i.FONT.FAMILY,fontSize:"48px"}),space:{left:70,right:70,top:50,bottom:50}}),e.add.existing(this)}}const ye=o=>{const e=new x(o,0,0,500,500,{radius:50},20345);return o.add.existing(e),e};class ke extends u.Scene{constructor(){super(i.SCENES.PLAYER_SKINS),this.skins=[]}create(){this.addBackground(),this.addCountSkins(),this.addButtons(),this.loadAllSkins(),this.addSelectPanel()}addBackground(){const{width:e,height:t}=this.cameras.main;this.add.rectangle(0,0,e,t,2863094,.9).setOrigin(0,0).setInteractive()}addSelectPanel(){const e=new de(this,0,0,this.skins,n=>{this.game.sound.playAudioSprite("sfx","select");const l=this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData"),h=l.get("fishes");if(h.includes(n.frame.name))l.set("selectFish",n.frame.name),n.setOver();else{const d=new ue(this,n.frame.name);d.on("button.click",c=>{if(c.frame.name==="back")this.game.sound.playAudioSprite("sfx","button"),d.closeModal();else if(c.frame.name==="like"&&l.get("roe")>=i.FISH.BUY_COST)this.game.sound.playAudioSprite("sfx","victory"),l.set("selectFish",n.frame.name),l.set("fishes",[...h,n.frame.name]),n.setDefaultStyle(),n.setOver(),l.inc("roe",i.FISH.BUY_COST*-1),this.countText.setText(`${h.length+1}/${i.FISH.COUNT}`),d.closeModal();else if(c.frame.name==="like"&&l.get("roe")<i.FISH.BUY_COST){this.game.sound.playAudioSprite("sfx","error");const p=i.FISH.BUY_COST-l.get("roe");new C(this).showMessage(g.t("Missing")+" "+p)}}),d.on("button.over",c=>{c.isDisabled||c.setOver()}),d.on("button.out",c=>{c.isDisabled||c.setDefaultStyle()})}}),a=this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").get("selectFish");e.selectItem(a)}loadAllSkins(){if(this.skins.length===0)for(let e=1;e<=i.FISH.COUNT;e++){const s=`fish_${u.Utils.String.Pad(e,2,"0",1)}a`;this.skins.push({texture:"fish",frameIcon:s})}}addCountSkins(){const a=this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").get("fishes").length,n=i.FISH.COUNT;this.countText=this.add.text(0,0,`${a}/${n}`,{fontSize:"126px",fontFamily:i.FONT.FAMILY,color:"#ffffff",align:"right"}).setOrigin(1,.5),new w(this.countText,{x:"right-50",y:"top+180"})}addButtons(){const e=new S(this,{texture:"ui",frameIcon:"back",backgroundColor:16777215,backgroundColorOver:20345}),t=new T(this,{x:0,y:0,anchor:{centerX:"left+120",centerY:"top+180"},orientation:"horizontal",buttons:[e],space:{item:50}}).layout();this.add.existing(t),t.on("button.over",s=>{s.setOver()},this),t.on("button.out",s=>{s.setDefaultStyle()},this),t.on("button.click",(s,a)=>{switch(this.game.sound.playAudioSprite("sfx","button"),a){case 0:this.scene.stop()}},this)}}class Ee extends F{constructor(e,t){const s=Ce(e);super(e,{anchor:{x:"center",y:"center"},width:800,background:xe(e),title:e.add.text(0,0,g.t("New"),{fontSize:"72px",fontFamily:i.FONT.FAMILY}),content:e.add.image(0,0,"fish",t),actions:[be(e),we(e)],space:{left:30,right:30,top:30,bottom:30,title:50,content:50,description:50,choices:25,toolbarItem:5,action:25},expand:{title:!1,content:!1,description:!1},align:{title:"center",actions:"right",description:"right"},click:{mode:"release"}}),this.shadowBackground=s,this.layout(),this.popUp(1e3),e.add.existing(this),e.tweens.add({targets:this,scaleX:1,scaleY:1,ease:"Bounce",duration:1e3,repeat:0,yoyo:!1}),e.tweens.add({targets:this.shadowBackground,alpha:1,ease:"Sine.easeInOut",duration:700,repeat:0,yoyo:!1})}closeModal(){this.shadowBackground.destroy(),this.destroy()}}const Ce=o=>{const{width:e,height:t}=o.cameras.main;return o.add.rectangle(0,0,e,t,20345,.5).setOrigin(0,0).setInteractive().setAlpha(0)},xe=o=>{const e=new x(o,0,0,500,500,{radius:50},20345);return o.add.existing(e),e},be=o=>new S(o,{texture:"ui",frameIcon:"back",backgroundColor:16777215,backgroundColorOver:2863094}),we=o=>new S(o,{texture:"ui",frameIcon:"like",backgroundColor:16777215,backgroundColorOver:2863094});function Te(o){const t=ve().filter(s=>!o.includes(s));return u.Utils.Array.GetRandom(t)}const ve=()=>{const o=[];if(o.length===0)for(let e=1;e<=i.FISH.COUNT;e++){const s=`fish_${u.Utils.String.Pad(e,2,"0",1)}a`;o.push(s)}return o};class Ae extends u.Scene{constructor(){super(i.SCENES.SHOP)}create(){this.addBackground(),this.addTitle(),this.addButtons(),this.addGift()}addBackground(){const{width:e,height:t}=this.cameras.main;this.add.rectangle(0,0,e,t,2863094,.9).setOrigin(0,0).setInteractive()}addTitle(){const e=this.add.text(0,0,g.t("Shop"),{fontSize:"126px",fontFamily:i.FONT.FAMILY,color:"#ffffff",align:"right"}).setOrigin(1,.5);new w(e,{x:"right-50",y:"top+180"})}addButtons(){const e=new S(this,{texture:"ui",frameIcon:"back",backgroundColor:16777215,backgroundColorOver:20345}),t=new T(this,{x:0,y:0,anchor:{centerX:"left+120",centerY:"top+180"},orientation:"horizontal",buttons:[e],space:{item:50}}).layout();this.add.existing(t),t.on("button.over",s=>{s.setOver()},this),t.on("button.out",s=>{s.setDefaultStyle()},this),t.on("button.click",(s,a)=>{switch(this.game.sound.playAudioSprite("sfx","button"),a){case 0:this.scene.stop()}},this)}addGift(){const e=new y(this,{text:this.add.text(0,0,i.FISH.GIFT_COST.toString(),{fontFamily:i.FONT.FAMILY,fontSize:"76px"}),icon:this.add.image(0,0,"roe","roe_1"),space:{icon:25}}).layout();this.add.existing(e),this.gift=new y(this,{anchor:{centerX:"center",centerY:"center"},orientation:"y",text:e,icon:this.add.image(0,0,"gift"),space:{icon:40}}).layout().setInteractive().on("pointerover",t=>{this.gift.getElement("icon").setTint(12303291)}).on("pointerout",t=>{this.gift.getElement("icon").clearTint()}).on("pointerdown",t=>{const a=this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData"),n=a.get("fishes"),r=a.get("roe");if(n.length>=i.FISH.COUNT){this.game.sound.playAudioSprite("sfx","error"),new C(this).showMessage(g.t("You have all the fish"));return}if(r<i.FISH.GIFT_COST){this.game.sound.playAudioSprite("sfx","error");const c=i.FISH.GIFT_COST-r;new C(this).showMessage(g.t("Missing")+" "+c);return}this.game.sound.playAudioSprite("sfx","victory");const l=this.gift.getElement("icon");new H(l,{mode:"effect",duration:1500,magnitude:10,magnitudeMode:"decay"}).shake();const h=Te(n),d=new Ee(this,h);d.on("button.click",c=>{c.frame.name==="back"?(this.game.sound.playAudioSprite("sfx","button"),d.closeModal()):c.frame.name==="like"&&(this.game.sound.playAudioSprite("sfx","button"),a.set("selectFish",h),d.closeModal()),n.includes(h)||a.set("fishes",[...n,h])}),d.on("button.over",c=>{c.setOver()}),d.on("button.out",c=>{c.setDefaultStyle()}),a.inc("roe",i.FISH.GIFT_COST*-1)}),this.add.existing(this.gift)}}class Oe extends Phaser.Scene{constructor(){super(i.SCENES.SETTINGS)}create(){this.addBackground(),this.addTitle(),this.addVersion(),this.addButtons(),this.addChangeLanguage(),this.addVolume(),this.addCheats()}addBackground(){const{width:e,height:t}=this.cameras.main;this.add.rectangle(0,0,e,t,20345,.9).setOrigin(0,0).setInteractive()}addTitle(){const e=this.add.text(0,0,g.t("Settings"),{fontSize:"126px",fontFamily:i.FONT.FAMILY,color:"#ffffff",align:"right"}).setOrigin(1,.5);new w(e,{x:"right-50",y:"top+180"})}addVersion(){const e=this.game.config.gameVersion,t=this.add.text(0,0,"v"+e,{fontSize:"48px",fontFamily:i.FONT.FAMILY,color:"#ffffff",align:"right"}).setOrigin(.5,.5);new w(t,{x:"center",y:"bottom-100"})}addButtons(){const e=new S(this,{texture:"ui",frameIcon:"back",backgroundColor:16777215,backgroundColorOver:20345}),t=new T(this,{x:0,y:0,anchor:{centerX:"left+120",centerY:"top+180"},orientation:"horizontal",buttons:[e],space:{item:50}}).layout();this.add.existing(t),t.on("button.over",s=>{s.setOver()},this),t.on("button.out",s=>{s.setDefaultStyle()},this),t.on("button.click",(s,a)=>{switch(this.game.sound.playAudioSprite("sfx","button"),a){case 0:this.scene.stop()}},this)}addChangeLanguage(){const e=[{text:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",value:"ru",icon:"ru"},{text:"English",value:"en",icon:"en"}],t=new U(this,{anchor:{centerX:"center",centerY:"top+450"},width:this.cameras.main.width*.8,background:m(this),text:A(this,g.t("Change language")),icon:this.add.image(0,0,"ui","earth"),space:{left:50,right:50,top:50,bottom:50,icon:50},options:e,list:{createBackgroundCallback:s=>m(s),createButtonCallback:(s,a)=>{const n=a.text,r=a.icon;return Ie(this,n,r).setName(a.value)},onButtonClick:s=>{this.game.sound.playAudioSprite("sfx","button"),new C(this).showMessage(g.t("Restart the game to apply the changes")),g.changeLanguage(s.name)},onButtonOver:s=>{s.getElement("background").setFillStyle(20345)},onButtonOut:s=>{s.getElement("background").setFillStyle(2863094)},space:{left:20,right:20,top:20,bottom:20,item:20}},setValueCallback:(s,a)=>{const n=s.getElement("text"),r=e.find(l=>l.value===a);r&&n.setText(r.text)},value:g.language}).layout();this.add.existing(t)}addVolume(){const e=new V(this,{anchor:{centerX:"center",centerY:"top+700"},width:this.cameras.main.width*.8,background:m(this),icon:this.add.image(0,0,"ui","volume-max"),slider:{track:m(this,20345),indicator:m(this,16777215),input:"click"},text:this.add.text(0,0,"",{fontSize:"48px",fontFamily:i.FONT.FAMILY,color:"#ffffff"}),space:{left:50,right:75,top:50,bottom:50,icon:50,slider:50},valuechangeCallback:(t,s,a)=>{const n=Math.round(Phaser.Math.Linear(0,100,t));a.text=n.toString();const r=a.getElement("icon");n<1?r.setFrame("volume-off"):n<25?r.setFrame("volume"):n<75?r.setFrame("volume-min"):n<100&&r.setFrame("volume-max"),this.game.sound.volume=t}}).layout().setValue(this.game.sound.volume);this.add.existing(e)}addCheats(){const e=new y(this,{anchor:{centerX:"center",centerY:"top+950"},width:this.cameras.main.width*.8,background:m(this),icon:this.add.image(0,0,"ui","cool"),text:A(this,"Code:"),space:{left:50,right:75,top:50,bottom:50,icon:50}}).layout();this.add.existing(e);const t=e.getElement("text"),s=new z(t,{x:-500,y:-500,width:this.cameras.main.width*.8,height:180,type:"text",fontFamily:i.FONT.FAMILY,fontSize:"48px",color:"#ffffff",border:0,backgroundColor:"transparent",borderColor:"transparent",outline:"none"}).on("textchange",a=>{switch(a.text){case"Code:1111":{this.game.sound.playAudioSprite("sfx","victory"),this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").inc("roe",500),new C(this).showMessage(g.t("Added")+" "+500),a.setText("Code:");break}case"Code:1110":{this.game.sound.playAudioSprite("sfx","victory"),this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").set("roe",0),a.setText("Code:");break}case"Code:1112":{this.game.sound.playAudioSprite("sfx","victory"),this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").set("roe",5e4),a.setText("Code:");break}case"Code:0000":{this.game.sound.playAudioSprite("sfx","victory"),this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").reset(),a.setText("Code:");break}case"Code:0001":{this.game.sound.playAudioSprite("sfx","victory"),this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData").set("roe",0),a.setText("Code:");break}case"Code:0002":{this.game.sound.playAudioSprite("sfx","victory");const r=this.scene.get(i.SCENES.LOCAL_STORAGE).data.get("localStorageData"),l=r.getDefaultValue("fishes");r.set("fishes",l);const h=r.getDefaultValue("selectFish");r.set("selectFish",h),a.setText("Code:");break}}});this.add.existing(s)}}const m=(o,e=2863094)=>{const t=new X(o,0,0,0,0,{radius:40},e);return o.add.existing(t),t},A=(o,e)=>o.add.text(0,0,e,{fontFamily:i.FONT.FAMILY,fontSize:"48px",color:"#ffffff"}),Ie=(o,e,t)=>{const s=new y(o,{background:m(o).setName("background"),width:o.cameras.main.width*.6,text:A(o,e),icon:o.add.image(0,0,"ui",t),space:{left:50,right:50,top:50,bottom:50,icon:50}});return o.add.existing(s),s},Fe=[Q,le,Z,j,ce,he,ke,Ae,Oe];class Le{constructor(e,t){this.pluginManager=t,this.game=t.game,this.scene=e,this.systems=e.sys,this.sticks=null,this.buttons=null,this._pointerTotal=0,e.sys.events.once("boot",this.boot,this),this.tooltipCollection={},this.configObj={align:"center",textOptions:{},offsetX:0,offsetY:0,animation:"up",timeToLive:400,animationDistance:50,animationEase:"Sine.easeOut",fixedToCamera:!1,text:"",store:!1,textType:"normal",parentObject:null,target:this.scene,pointX:[],pointY:[]}}createFloatingText(e){let t=Object.assign(this.configObj,e),s={};if(t.textType==="normal"){if(s=this.scene.add.text(0,0,t.text,t.textOptions),t.parentObject!==null)switch(t.align){case"center":{Phaser.Display.Align.In.Center(s,t.parentObject,t.offsetX,t.offsetY);break}case"left":{Phaser.Display.Align.In.LeftCenter(s,t.parentObject,t.offsetX,t.offsetY);break}case"right":{Phaser.Display.Align.In.RightCenter(s,t.parentObject,t.offsetX,t.offsetY);break}case"top-center":{Phaser.Display.Align.In.TopCenter(s,t.parentObject,t.offsetX,t.offsetY);break}}if(s.isAnimating=!1,t.store===!1)this.scene.children.bringToTop(s),this.animateText(t,s);else return s}}animateText(e,t){let s,a,n,r,l;const h={t:0,vec:new Phaser.Math.Vector2};if(t.isAnimating===!1)switch(t.isAnimating=!0,e.animation){case"physics":break;case"custom":{e.pointX.length>0&&e.pointY.length>0&&(s=new Phaser.Math.Vector2(e.pointX[0],e.pointY[0]),a=new Phaser.Math.Vector2(e.pointX[1],e.pointY[1]),n=new Phaser.Math.Vector2(e.pointX[2],e.pointY[2]),r=new Phaser.Math.Vector2(e.pointX[3],e.pointY[3]),l=new Phaser.Curves.CubicBezier(s,a,n,r),this.scene.tweens.add({targets:h,t:1,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onUpdate:function(){let d=l.getPoint(h.t,h.vec);t.x=d.x,t.y=d.y}}));break}case"explode":{this.scene.tweens.add({targets:t,scale:e.animationDistance,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){this.scene.tweens.add({targets:t,alpha:0,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){t.destroy()}})}});break}case"fade":{t.alpha=0,this.scene.tweens.add({targets:t,alpha:1,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){this.scene.tweens.add({targets:t,alpha:0,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){t.destroy()}})}});break}case"smoke":{let d=Math.round(Math.random()*10),c=1;d>5&&(c=c*-1),s=new Phaser.Math.Vector2(t.x+25*c,t.y-25),a=new Phaser.Math.Vector2(t.x-50*c,t.y-50),n=new Phaser.Math.Vector2(t.x+75*c,t.y-75),r=new Phaser.Math.Vector2(t.x-25*c,t.y-100),l=new Phaser.Curves.CubicBezier(s,a,n,r),this.scene.tweens.add({targets:h,t:1,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){this.scene.tweens.add({targets:t,alpha:0,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){t.destroy()}})},onUpdate:function(){let p=l.getPoint(h.t,h.vec);t.x=p.x,t.y=p.y}});break}case"left":{this.scene.tweens.add({targets:t,y:t.x-e.animationDistance,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){this.scene.tweens.add({targets:t,alpha:0,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){t.destroy()}})}});break}case"right":{this.scene.tweens.add({targets:t,y:t.x+e.animationDistance,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){this.scene.tweens.add({targets:t,alpha:0,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){t.destroy()}})}});break}case"up":{this.scene.tweens.add({targets:t,y:t.y-e.animationDistance,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){this.scene.tweens.add({targets:t,alpha:0,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){t.destroy()}})}});break}case"down":{this.scene.tweens.add({targets:t,y:t.y+e.animationDistance,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){this.scene.tweens.add({targets:t,alpha:0,ease:e.animationEase,duration:e.timeToLive,yoyo:!1,callbackScope:this,onComplete:function(){t.destroy()}})}});break}}}boot(){this.systems.events.once("destroy",this.destroy,this),this.systems.settings.active?this.start():this.systems.events.on("start",this.start,this)}start(){this.systems.events.on("update",this.update,this),this.systems.events.once("shutdown",this.shutdown,this)}update(e){}shutdown(){const e=this.systems.events;e.off("update",this.update,this),e.off("shutdown",this.shutdown,this)}destroy(){this.shutdown()}hideTooltip(e,t){t?(this.scene.tweens.isTweening(this.tooltipCollection[e])&&this.scene.tweens.killTweensOf(this.tooltipCollection[e]),this.tween=this.scene.tweens.add({targets:this.tooltipCollection[e],alpha:0,ease:"Power1",duration:250,delay:0,onComplete:a=>{}})):this.tooltipCollection[e].visible=!1}showTooltip(e,t){t?(this.tooltipCollection[e].alpha=0,this.tooltipCollection[e].visible=!0,this.scene.children.bringToTop(this.tooltipCollection[e]),this.scene.tweens.isTweening(this.tooltipCollection[e])&&this.scene.tweens.killTweensOf(this.tooltipCollection[e]),this.tween=this.scene.tweens.add({targets:this.tooltipCollection[e],alpha:1,ease:"Power1",duration:500,delay:0,onComplete:a=>{}})):(this.tooltipCollection[e].visible=!0,this.scene.children.bringToTop(this.tooltipCollection[e]))}createTooltip(e){let t,s=this.scene.add.container(e.x,e.y),a=this.createLabel(s,e.x,e.y,e);return e.hasBackground&&(t=this.createBackground(s,a,e.x,e.y,e.background.width,e.background.height,e),a.x=t.rect.centerX-a.displayWidth*.5,a.y=t.rect.centerY-a.displayHeight*.5),s.add(a),s.x=e.x,s.y=e.y,this.tooltipCollection[e.id]=s,s}createLabel(e,t,s,a){let n=this.scene.add.text(t,s,a.text.text,{fontFamily:a.text.fontFamily||"new_rockerregular",fontSize:a.text.fontSize||19,color:a.text.textColor||"#ffffff",fontStyle:a.text.fontStyle||"",align:a.text.align||"center"});if(a.hasShadow){let r=a.text.shadowColor||"#1e1e1e",l=a.text.blur||1,h=a.text.shadowStroke||!1,d=a.text.shadowFill||!0;n.setShadow(0,0,r,l,h,d)}return n}}const Ne={scene:[{key:"floatingNumbers",plugin:Le,sceneKey:"floatingNumbers",mapping:"floatingNumbers",systemKey:"floatingNumbers"}]},De={title:"Dont Touch",version:"0.0.16",type:u.AUTO,parent:"game-container",backgroundColor:i.COLORS.DEFAULT.BACKGROUND,scale:{mode:u.Scale.FIT,autoCenter:u.Scale.CENTER_BOTH,zoom:i.SCALE,width:i.WIDTH,height:i.HEIGHT},physics:{default:"matter",matter:{debug:i.DEBUG,gravity:{y:3}}},render:{pixelArt:!1,antialias:!0,antialiasGL:!0,roundPixels:!0},autoFocus:!0,dom:{createContainer:!0},powerPreference:"high-performance",scene:Fe,plugins:Ne},Pe="Added",Ge="Buy",Me="Missing",Be="New",_e="SCORE",Re="Settings",Ye="Shop",He={Added:Pe,"Best score":"Best score:",Buy:Ge,"Change language":"Change language","Games played":"Games played:",Missing:Me,New:Be,"Restart the game to apply the changes":"Restart the game to apply the changes",Score:_e,Settings:Re,Shop:Ye,"Tap to jump":`Tap
to jump`,"You have all the fish":"You have all the fish!"},Ue="\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E",Ve="\u041A\u0443\u043F\u0438\u0442\u044C",ze="\u041D\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442",Xe="\u041D\u043E\u0432\u044B\u0439",$e="\u0420\u0415\u0417\u0423\u041B\u042C\u0422\u0410\u0422",Ke="\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",We="\u041C\u0430\u0433\u0430\u0437\u0438\u043D",qe={Added:Ue,"Best score":"\u0420\u0435\u043A\u043E\u0440\u0434:",Buy:Ve,"Change language":"\u0421\u043C\u0435\u043D\u0438\u0442\u044C \u044F\u0437\u044B\u043A","Games played":"\u0421\u044B\u0433\u0440\u0430\u043D\u043E:",Missing:ze,New:Xe,"Restart the game to apply the changes":`\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u0435 \u0438\u0433\u0440\u0443,
\u0447\u0442\u043E\u0431\u044B \u043F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F`,Score:$e,Settings:Ke,Shop:We,"Tap to jump":`\u041D\u0430\u0436\u043C\u0438\u0442\u0435
\u0447\u0442\u043E\u0431\u044B \u043F\u0440\u044B\u0433\u043D\u0443\u0442\u044C`,"You have all the fish":"\u0412\u044B \u0441\u043E\u0431\u0440\u0430\u043B\u0438 \u0432\u0441\u0435\u0445 \u0440\u044B\u0431\u043E\u043A!"},Je={en:{translation:{...He}},ru:{translation:{...qe}}};g.use($).init({fallbackLng:"en",debug:!0,resources:{...Je}});new u.Game(De);
//# sourceMappingURL=index.479012f2.js.map
